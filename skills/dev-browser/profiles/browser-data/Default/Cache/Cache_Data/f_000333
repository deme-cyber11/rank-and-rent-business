import __vite__cjsImport0_react from "/node_modules/.vite/deps/react.js?v=aadb9797"; const useState = __vite__cjsImport0_react["useState"]; const useCallback = __vite__cjsImport0_react["useCallback"]; const useEffect = __vite__cjsImport0_react["useEffect"];
import { supabase } from "/src/lib/supabase.ts";
const DEFAULT_SETTINGS = {
  assignment_mode: "first_come",
  round_robin_brokers: [],
  last_assigned_broker_id: null,
  updated_at: null
};
export function useRoundRobinAssignment() {
  const [settings, setSettings] = useState(null);
  const [brokers, setBrokers] = useState([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const fetchSettings = useCallback(async () => {
    setLoading(true);
    setError(null);
    try {
      const { data, error: fetchError } = await supabase.rpc("get_assignment_settings");
      if (fetchError) {
        if (fetchError.message.includes("function") || fetchError.message.includes("does not exist")) {
          console.warn("Assignment settings function not available, using defaults");
          setSettings(DEFAULT_SETTINGS);
          return;
        }
        throw fetchError;
      }
      const parsedSettings = {
        assignment_mode: data?.assignment_mode || "first_come",
        round_robin_brokers: Array.isArray(data?.round_robin_brokers) ? data.round_robin_brokers : [],
        last_assigned_broker_id: data?.last_assigned_broker_id || null,
        updated_at: data?.updated_at || null
      };
      setSettings(parsedSettings);
    } catch (err) {
      console.error("Error fetching assignment settings:", err);
      setError(err instanceof Error ? err.message : "Failed to load settings");
      setSettings(DEFAULT_SETTINGS);
    } finally {
      setLoading(false);
    }
  }, []);
  const fetchBrokers = useCallback(async () => {
    try {
      const { data, error: fetchError } = await supabase.from("cold_email_brokers").select("*");
      if (fetchError) {
        if (fetchError.message.includes("does not exist") || fetchError.code === "42P01") {
          console.warn("cold_email_brokers view not available, using hardcoded list");
          const { data: profiles } = await supabase.from("profiles").select("id, email, full_name").in("email", ["zac@hugecapitalfunding.com", "luke@hugecapitalfunding.com"]);
          if (profiles) {
            setBrokers(
              profiles.map((p) => ({
                id: p.id,
                email: p.email || "",
                name: p.full_name || p.email?.split("@")[0] || "Unknown",
                avatar_url: null
              }))
            );
          }
          return;
        }
        throw fetchError;
      }
      setBrokers(data || []);
    } catch (err) {
      console.error("Error fetching brokers:", err);
    }
  }, []);
  const updateSettings = useCallback(
    async (mode, brokerIds) => {
      setLoading(true);
      setError(null);
      try {
        const { error: updateError } = await supabase.rpc("update_assignment_settings", {
          p_assignment_mode: mode,
          p_round_robin_brokers: brokerIds
        });
        if (updateError) {
          throw updateError;
        }
        setSettings((prev) => ({
          ...prev,
          assignment_mode: mode,
          round_robin_brokers: brokerIds,
          updated_at: (/* @__PURE__ */ new Date()).toISOString()
        }));
        return true;
      } catch (err) {
        console.error("Error updating assignment settings:", err);
        setError(err instanceof Error ? err.message : "Failed to update settings");
        return false;
      } finally {
        setLoading(false);
      }
    },
    []
  );
  const assignLeadRoundRobin = useCallback(async (leadId) => {
    try {
      const { data, error: assignError } = await supabase.rpc("assign_lead_round_robin", {
        p_lead_id: leadId
      });
      if (assignError) {
        console.error("Error auto-assigning lead:", assignError);
        return null;
      }
      return data;
    } catch (err) {
      console.error("Error in round robin assignment:", err);
      return null;
    }
  }, []);
  const reassignLead = useCallback(
    async (leadId, newBrokerId) => {
      setError(null);
      try {
        const { error: reassignError } = await supabase.rpc("admin_reassign_lead", {
          p_lead_id: leadId,
          p_new_broker_id: newBrokerId
        });
        if (reassignError) {
          throw reassignError;
        }
        return true;
      } catch (err) {
        console.error("Error reassigning lead:", err);
        setError(err instanceof Error ? err.message : "Failed to reassign lead");
        return false;
      }
    },
    []
  );
  useEffect(() => {
    fetchSettings();
    fetchBrokers();
  }, [fetchSettings, fetchBrokers]);
  return {
    settings,
    brokers,
    loading,
    error,
    fetchSettings,
    fetchBrokers,
    updateSettings,
    assignLeadRoundRobin,
    reassignLead
  };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZVJvdW5kUm9iaW5Bc3NpZ25tZW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVN0YXRlLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gJy4uL2xpYi9zdXBhYmFzZSc7XHJcblxyXG4vLyBUeXBlc1xyXG5leHBvcnQgdHlwZSBBc3NpZ25tZW50TW9kZSA9ICdmaXJzdF9jb21lJyB8ICdyb3VuZF9yb2JpbicgfCAnbWFudWFsJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQnJva2VyIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIGVtYWlsOiBzdHJpbmc7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIGF2YXRhcl91cmw6IHN0cmluZyB8IG51bGw7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQXNzaWdubWVudFNldHRpbmdzIHtcclxuICBhc3NpZ25tZW50X21vZGU6IEFzc2lnbm1lbnRNb2RlO1xyXG4gIHJvdW5kX3JvYmluX2Jyb2tlcnM6IHN0cmluZ1tdO1xyXG4gIGxhc3RfYXNzaWduZWRfYnJva2VyX2lkOiBzdHJpbmcgfCBudWxsO1xyXG4gIHVwZGF0ZWRfYXQ6IHN0cmluZyB8IG51bGw7XHJcbn1cclxuXHJcbmludGVyZmFjZSBVc2VSb3VuZFJvYmluQXNzaWdubWVudFJldHVybiB7XHJcbiAgLy8gU3RhdGVcclxuICBzZXR0aW5nczogQXNzaWdubWVudFNldHRpbmdzIHwgbnVsbDtcclxuICBicm9rZXJzOiBCcm9rZXJbXTtcclxuICBsb2FkaW5nOiBib29sZWFuO1xyXG4gIGVycm9yOiBzdHJpbmcgfCBudWxsO1xyXG5cclxuICAvLyBBY3Rpb25zXHJcbiAgZmV0Y2hTZXR0aW5nczogKCkgPT4gUHJvbWlzZTx2b2lkPjtcclxuICBmZXRjaEJyb2tlcnM6ICgpID0+IFByb21pc2U8dm9pZD47XHJcbiAgdXBkYXRlU2V0dGluZ3M6IChtb2RlOiBBc3NpZ25tZW50TW9kZSwgYnJva2VySWRzOiBzdHJpbmdbXSkgPT4gUHJvbWlzZTxib29sZWFuPjtcclxuICBhc3NpZ25MZWFkUm91bmRSb2JpbjogKGxlYWRJZDogc3RyaW5nKSA9PiBQcm9taXNlPHN0cmluZyB8IG51bGw+O1xyXG4gIHJlYXNzaWduTGVhZDogKGxlYWRJZDogc3RyaW5nLCBuZXdCcm9rZXJJZDogc3RyaW5nIHwgbnVsbCkgPT4gUHJvbWlzZTxib29sZWFuPjtcclxufVxyXG5cclxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogQXNzaWdubWVudFNldHRpbmdzID0ge1xyXG4gIGFzc2lnbm1lbnRfbW9kZTogJ2ZpcnN0X2NvbWUnLFxyXG4gIHJvdW5kX3JvYmluX2Jyb2tlcnM6IFtdLFxyXG4gIGxhc3RfYXNzaWduZWRfYnJva2VyX2lkOiBudWxsLFxyXG4gIHVwZGF0ZWRfYXQ6IG51bGwsXHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXNlUm91bmRSb2JpbkFzc2lnbm1lbnQoKTogVXNlUm91bmRSb2JpbkFzc2lnbm1lbnRSZXR1cm4ge1xyXG4gIGNvbnN0IFtzZXR0aW5ncywgc2V0U2V0dGluZ3NdID0gdXNlU3RhdGU8QXNzaWdubWVudFNldHRpbmdzIHwgbnVsbD4obnVsbCk7XHJcbiAgY29uc3QgW2Jyb2tlcnMsIHNldEJyb2tlcnNdID0gdXNlU3RhdGU8QnJva2VyW10+KFtdKTtcclxuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcclxuXHJcbiAgLy8gRmV0Y2ggYXNzaWdubWVudCBzZXR0aW5nc1xyXG4gIGNvbnN0IGZldGNoU2V0dGluZ3MgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XHJcbiAgICBzZXRMb2FkaW5nKHRydWUpO1xyXG4gICAgc2V0RXJyb3IobnVsbCk7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvcjogZmV0Y2hFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UucnBjKCdnZXRfYXNzaWdubWVudF9zZXR0aW5ncycpO1xyXG5cclxuICAgICAgaWYgKGZldGNoRXJyb3IpIHtcclxuICAgICAgICAvLyBJZiBmdW5jdGlvbiBkb2Vzbid0IGV4aXN0LCB1c2UgZGVmYXVsdHNcclxuICAgICAgICBpZiAoZmV0Y2hFcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdmdW5jdGlvbicpIHx8IGZldGNoRXJyb3IubWVzc2FnZS5pbmNsdWRlcygnZG9lcyBub3QgZXhpc3QnKSkge1xyXG4gICAgICAgICAgY29uc29sZS53YXJuKCdBc3NpZ25tZW50IHNldHRpbmdzIGZ1bmN0aW9uIG5vdCBhdmFpbGFibGUsIHVzaW5nIGRlZmF1bHRzJyk7XHJcbiAgICAgICAgICBzZXRTZXR0aW5ncyhERUZBVUxUX1NFVFRJTkdTKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgZmV0Y2hFcnJvcjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gUGFyc2UgdGhlIEpTT05CIHJlc3BvbnNlXHJcbiAgICAgIGNvbnN0IHBhcnNlZFNldHRpbmdzOiBBc3NpZ25tZW50U2V0dGluZ3MgPSB7XHJcbiAgICAgICAgYXNzaWdubWVudF9tb2RlOiAoZGF0YT8uYXNzaWdubWVudF9tb2RlIGFzIEFzc2lnbm1lbnRNb2RlKSB8fCAnZmlyc3RfY29tZScsXHJcbiAgICAgICAgcm91bmRfcm9iaW5fYnJva2VyczogQXJyYXkuaXNBcnJheShkYXRhPy5yb3VuZF9yb2Jpbl9icm9rZXJzKVxyXG4gICAgICAgICAgPyBkYXRhLnJvdW5kX3JvYmluX2Jyb2tlcnNcclxuICAgICAgICAgIDogW10sXHJcbiAgICAgICAgbGFzdF9hc3NpZ25lZF9icm9rZXJfaWQ6IGRhdGE/Lmxhc3RfYXNzaWduZWRfYnJva2VyX2lkIHx8IG51bGwsXHJcbiAgICAgICAgdXBkYXRlZF9hdDogZGF0YT8udXBkYXRlZF9hdCB8fCBudWxsLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgc2V0U2V0dGluZ3MocGFyc2VkU2V0dGluZ3MpO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGFzc2lnbm1lbnQgc2V0dGluZ3M6JywgZXJyKTtcclxuICAgICAgc2V0RXJyb3IoZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdGYWlsZWQgdG8gbG9hZCBzZXR0aW5ncycpO1xyXG4gICAgICAvLyBTZXQgZGVmYXVsdHMgb24gZXJyb3JcclxuICAgICAgc2V0U2V0dGluZ3MoREVGQVVMVF9TRVRUSU5HUyk7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgIH1cclxuICB9LCBbXSk7XHJcblxyXG4gIC8vIEZldGNoIGF2YWlsYWJsZSBicm9rZXJzXHJcbiAgY29uc3QgZmV0Y2hCcm9rZXJzID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvcjogZmV0Y2hFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgnY29sZF9lbWFpbF9icm9rZXJzJylcclxuICAgICAgICAuc2VsZWN0KCcqJyk7XHJcblxyXG4gICAgICBpZiAoZmV0Y2hFcnJvcikge1xyXG4gICAgICAgIC8vIElmIHZpZXcgZG9lc24ndCBleGlzdCwgdHJ5IGZldGNoaW5nIGZyb20gcHJvZmlsZXNcclxuICAgICAgICBpZiAoZmV0Y2hFcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdkb2VzIG5vdCBleGlzdCcpIHx8IGZldGNoRXJyb3IuY29kZSA9PT0gJzQyUDAxJykge1xyXG4gICAgICAgICAgY29uc29sZS53YXJuKCdjb2xkX2VtYWlsX2Jyb2tlcnMgdmlldyBub3QgYXZhaWxhYmxlLCB1c2luZyBoYXJkY29kZWQgbGlzdCcpO1xyXG4gICAgICAgICAgLy8gRmFsbGJhY2sgdG8gaGFyZGNvZGVkIGJyb2tlciBlbWFpbHNcclxuICAgICAgICAgIGNvbnN0IHsgZGF0YTogcHJvZmlsZXMgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAgIC5mcm9tKCdwcm9maWxlcycpXHJcbiAgICAgICAgICAgIC5zZWxlY3QoJ2lkLCBlbWFpbCwgZnVsbF9uYW1lJylcclxuICAgICAgICAgICAgLmluKCdlbWFpbCcsIFsnemFjQGh1Z2VjYXBpdGFsZnVuZGluZy5jb20nLCAnbHVrZUBodWdlY2FwaXRhbGZ1bmRpbmcuY29tJ10pO1xyXG5cclxuICAgICAgICAgIGlmIChwcm9maWxlcykge1xyXG4gICAgICAgICAgICBzZXRCcm9rZXJzKFxyXG4gICAgICAgICAgICAgIHByb2ZpbGVzLm1hcCgocCkgPT4gKHtcclxuICAgICAgICAgICAgICAgIGlkOiBwLmlkLFxyXG4gICAgICAgICAgICAgICAgZW1haWw6IHAuZW1haWwgfHwgJycsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBwLmZ1bGxfbmFtZSB8fCBwLmVtYWlsPy5zcGxpdCgnQCcpWzBdIHx8ICdVbmtub3duJyxcclxuICAgICAgICAgICAgICAgIGF2YXRhcl91cmw6IG51bGwsXHJcbiAgICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IGZldGNoRXJyb3I7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHNldEJyb2tlcnMoZGF0YSB8fCBbXSk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYnJva2VyczonLCBlcnIpO1xyXG4gICAgICAvLyBEb24ndCBzZXQgZXJyb3IgZm9yIGJyb2tlciBmZXRjaCBmYWlsdXJlc1xyXG4gICAgfVxyXG4gIH0sIFtdKTtcclxuXHJcbiAgLy8gVXBkYXRlIGFzc2lnbm1lbnQgc2V0dGluZ3NcclxuICBjb25zdCB1cGRhdGVTZXR0aW5ncyA9IHVzZUNhbGxiYWNrKFxyXG4gICAgYXN5bmMgKG1vZGU6IEFzc2lnbm1lbnRNb2RlLCBicm9rZXJJZHM6IHN0cmluZ1tdKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XHJcbiAgICAgIHNldExvYWRpbmcodHJ1ZSk7XHJcbiAgICAgIHNldEVycm9yKG51bGwpO1xyXG5cclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB7IGVycm9yOiB1cGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UucnBjKCd1cGRhdGVfYXNzaWdubWVudF9zZXR0aW5ncycsIHtcclxuICAgICAgICAgIHBfYXNzaWdubWVudF9tb2RlOiBtb2RlLFxyXG4gICAgICAgICAgcF9yb3VuZF9yb2Jpbl9icm9rZXJzOiBicm9rZXJJZHMsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh1cGRhdGVFcnJvcikge1xyXG4gICAgICAgICAgdGhyb3cgdXBkYXRlRXJyb3I7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBVcGRhdGUgbG9jYWwgc3RhdGVcclxuICAgICAgICBzZXRTZXR0aW5ncygocHJldikgPT4gKHtcclxuICAgICAgICAgIC4uLnByZXYsXHJcbiAgICAgICAgICBhc3NpZ25tZW50X21vZGU6IG1vZGUsXHJcbiAgICAgICAgICByb3VuZF9yb2Jpbl9icm9rZXJzOiBicm9rZXJJZHMsXHJcbiAgICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgfSBhcyBBc3NpZ25tZW50U2V0dGluZ3MpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGFzc2lnbm1lbnQgc2V0dGluZ3M6JywgZXJyKTtcclxuICAgICAgICBzZXRFcnJvcihlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogJ0ZhaWxlZCB0byB1cGRhdGUgc2V0dGluZ3MnKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBbXVxyXG4gICk7XHJcblxyXG4gIC8vIEF1dG8tYXNzaWduIGxlYWQgdmlhIHJvdW5kIHJvYmluXHJcbiAgY29uc3QgYXNzaWduTGVhZFJvdW5kUm9iaW4gPSB1c2VDYWxsYmFjayhhc3luYyAobGVhZElkOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+ID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3I6IGFzc2lnbkVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5ycGMoJ2Fzc2lnbl9sZWFkX3JvdW5kX3JvYmluJywge1xyXG4gICAgICAgIHBfbGVhZF9pZDogbGVhZElkLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmIChhc3NpZ25FcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGF1dG8tYXNzaWduaW5nIGxlYWQ6JywgYXNzaWduRXJyb3IpO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gZGF0YSBhcyBzdHJpbmcgfCBudWxsO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHJvdW5kIHJvYmluIGFzc2lnbm1lbnQ6JywgZXJyKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfSwgW10pO1xyXG5cclxuICAvLyBBZG1pbiByZWFzc2lnbiBsZWFkXHJcbiAgY29uc3QgcmVhc3NpZ25MZWFkID0gdXNlQ2FsbGJhY2soXHJcbiAgICBhc3luYyAobGVhZElkOiBzdHJpbmcsIG5ld0Jyb2tlcklkOiBzdHJpbmcgfCBudWxsKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XHJcbiAgICAgIHNldEVycm9yKG51bGwpO1xyXG5cclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB7IGVycm9yOiByZWFzc2lnbkVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5ycGMoJ2FkbWluX3JlYXNzaWduX2xlYWQnLCB7XHJcbiAgICAgICAgICBwX2xlYWRfaWQ6IGxlYWRJZCxcclxuICAgICAgICAgIHBfbmV3X2Jyb2tlcl9pZDogbmV3QnJva2VySWQsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChyZWFzc2lnbkVycm9yKSB7XHJcbiAgICAgICAgICB0aHJvdyByZWFzc2lnbkVycm9yO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlYXNzaWduaW5nIGxlYWQ6JywgZXJyKTtcclxuICAgICAgICBzZXRFcnJvcihlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogJ0ZhaWxlZCB0byByZWFzc2lnbiBsZWFkJyk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgW11cclxuICApO1xyXG5cclxuICAvLyBGZXRjaCBzZXR0aW5ncyBhbmQgYnJva2VycyBvbiBtb3VudFxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBmZXRjaFNldHRpbmdzKCk7XHJcbiAgICBmZXRjaEJyb2tlcnMoKTtcclxuICB9LCBbZmV0Y2hTZXR0aW5ncywgZmV0Y2hCcm9rZXJzXSk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBzZXR0aW5ncyxcclxuICAgIGJyb2tlcnMsXHJcbiAgICBsb2FkaW5nLFxyXG4gICAgZXJyb3IsXHJcbiAgICBmZXRjaFNldHRpbmdzLFxyXG4gICAgZmV0Y2hCcm9rZXJzLFxyXG4gICAgdXBkYXRlU2V0dGluZ3MsXHJcbiAgICBhc3NpZ25MZWFkUm91bmRSb2JpbixcclxuICAgIHJlYXNzaWduTGVhZCxcclxuICB9O1xyXG59XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBUyxVQUFVLGFBQWEsaUJBQWlCO0FBQ2pELFNBQVMsZ0JBQWdCO0FBa0N6QixNQUFNLG1CQUF1QztBQUFBLEVBQzNDLGlCQUFpQjtBQUFBLEVBQ2pCLHFCQUFxQixDQUFDO0FBQUEsRUFDdEIseUJBQXlCO0FBQUEsRUFDekIsWUFBWTtBQUNkO0FBRU8sZ0JBQVMsMEJBQXlEO0FBQ3ZFLFFBQU0sQ0FBQyxVQUFVLFdBQVcsSUFBSSxTQUFvQyxJQUFJO0FBQ3hFLFFBQU0sQ0FBQyxTQUFTLFVBQVUsSUFBSSxTQUFtQixDQUFDLENBQUM7QUFDbkQsUUFBTSxDQUFDLFNBQVMsVUFBVSxJQUFJLFNBQVMsS0FBSztBQUM1QyxRQUFNLENBQUMsT0FBTyxRQUFRLElBQUksU0FBd0IsSUFBSTtBQUd0RCxRQUFNLGdCQUFnQixZQUFZLFlBQVk7QUFDNUMsZUFBVyxJQUFJO0FBQ2YsYUFBUyxJQUFJO0FBRWIsUUFBSTtBQUNGLFlBQU0sRUFBRSxNQUFNLE9BQU8sV0FBVyxJQUFJLE1BQU0sU0FBUyxJQUFJLHlCQUF5QjtBQUVoRixVQUFJLFlBQVk7QUFFZCxZQUFJLFdBQVcsUUFBUSxTQUFTLFVBQVUsS0FBSyxXQUFXLFFBQVEsU0FBUyxnQkFBZ0IsR0FBRztBQUM1RixrQkFBUSxLQUFLLDREQUE0RDtBQUN6RSxzQkFBWSxnQkFBZ0I7QUFDNUI7QUFBQSxRQUNGO0FBQ0EsY0FBTTtBQUFBLE1BQ1I7QUFHQSxZQUFNLGlCQUFxQztBQUFBLFFBQ3pDLGlCQUFrQixNQUFNLG1CQUFzQztBQUFBLFFBQzlELHFCQUFxQixNQUFNLFFBQVEsTUFBTSxtQkFBbUIsSUFDeEQsS0FBSyxzQkFDTCxDQUFDO0FBQUEsUUFDTCx5QkFBeUIsTUFBTSwyQkFBMkI7QUFBQSxRQUMxRCxZQUFZLE1BQU0sY0FBYztBQUFBLE1BQ2xDO0FBRUEsa0JBQVksY0FBYztBQUFBLElB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