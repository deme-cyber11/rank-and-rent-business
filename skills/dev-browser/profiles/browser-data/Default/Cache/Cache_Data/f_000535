import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/pages/marketing/pricing-update/page.tsx");import __vite__cjsImport0_react_jsxDevRuntime from "/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=96fa1abf"; const Fragment = __vite__cjsImport0_react_jsxDevRuntime["Fragment"]; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
import * as RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
let prevRefreshReg;
let prevRefreshSig;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  prevRefreshReg = window.$RefreshReg$;
  prevRefreshSig = window.$RefreshSig$;
  window.$RefreshReg$ = RefreshRuntime.getRefreshReg("C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx");
  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;
}
"use client";
var _s = $RefreshSig$();
import __vite__cjsImport3_react from "/node_modules/.vite/deps/react.js?v=96fa1abf"; const useState = __vite__cjsImport3_react["useState"]; const useEffect = __vite__cjsImport3_react["useEffect"]; const useCallback = __vite__cjsImport3_react["useCallback"]; const useMemo = __vite__cjsImport3_react["useMemo"];
import { RefreshCw, CheckCircle, AlertCircle } from "/node_modules/.vite/deps/lucide-react.js?v=8e4fabdf";
import { SectionHeader } from "/src/components/section-header.tsx";
import { Card } from "/src/components/ui/card.tsx";
import { Button } from "/src/components/ui/button.tsx";
import { Badge } from "/src/components/ui/badge.tsx";
import { InlineAlert } from "/src/components/ui/inline-alert.tsx?t=1768449300285";
import {
  PricingFileUploader,
  PricingPreviewTable,
  ValidationErrorsPanel,
  ApplyPricingDialog,
  PriceCalculator,
  FormulaBuilder
} from "/src/components/pricing/index.ts?t=1768449878016";
import { useAuth } from "/src/vite/auth/auth-provider.tsx";
export function PricingUpdatePage() {
  _s();
  const auth = useAuth();
  const [currentStep, setCurrentStep] = useState("upload");
  const [shopifyData, setShopifyData] = useState(/* @__PURE__ */ new Map());
  const [isLoadingProducts, setIsLoadingProducts] = useState(true);
  const [loadingError, setLoadingError] = useState(null);
  const [processorResult, setProcessorResult] = useState(null);
  const [isDialogOpen, setIsDialogOpen] = useState(false);
  const [applySuccess, setApplySuccess] = useState(false);
  const [modifiedRecords, setModifiedRecords] = useState([]);
  const [lastApplyWasScheduled, setLastApplyWasScheduled] = useState(false);
  const [scheduledDate, setScheduledDate] = useState(null);
  const token = auth.session?.access_token;
  useEffect(() => {
    if (!token) return;
    fetchShopifyProducts();
  }, [token]);
  const fetchShopifyProducts = async () => {
    setIsLoadingProducts(true);
    setLoadingError(null);
    try {
      const response = await fetch("/api/marketing/shopify-products", {
        method: "GET",
        headers: {
          Authorization: `Bearer ${token}`
        }
      });
      const data = await response.json();
      if (!response.ok) {
        throw new Error(data.error || `Failed to fetch Shopify products (${response.status})`);
      }
      if (!data.success || !data.products) {
        throw new Error(data.error || "No product data returned");
      }
      const productMap = /* @__PURE__ */ new Map();
      data.products.forEach((product) => {
        product.variants?.forEach((variant) => {
          if (variant.sku) {
            const sku = variant.sku.trim().toUpperCase();
            productMap.set(sku, {
              sku,
              variantId: variant.id,
              productId: product.id,
              productTitle: product.title,
              variantTitle: variant.title,
              currentPrice: parseFloat(variant.price) || 0,
              compareAtPrice: variant.compareAtPrice ? parseFloat(variant.compareAtPrice) : null,
              handle: product.handle,
              status: product.status
            });
          }
        });
      });
      setShopifyData(productMap);
      console.log(`[PricingUpdatePage] Loaded ${productMap.size} products from Shopify`);
    } catch (error) {
      console.error("[PricingUpdatePage] Error fetching Shopify products:", error);
      setLoadingError(error instanceof Error ? error.message : "Failed to load product data");
    } finally {
      setIsLoadingProducts(false);
    }
  };
  const handleFileProcessed = useCallback((result) => {
    setProcessorResult(result);
    setModifiedRecords([...result.records]);
    setCurrentStep("preview");
    setApplySuccess(false);
  }, []);
  const handleApplyPricing = useCallback(async (records, effectiveDate) => {
    const response = await fetch("/api/marketing/apply-pricing", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        Authorization: `Bearer ${token}`
      },
      body: JSON.stringify({
        records: records.map((r) => ({
          shopifyProductId: r.productId,
          shopifyVariantId: r.variantId,
          sku: r.sku,
          productTitle: r.productTitle,
          currentPrice: r.currentPrice,
          newPrice: r.newPrice,
          compareAtPrice: r.newCompareAtPrice,
          effectiveDate
        })),
        effectiveDate
      })
    });
    if (!response.ok) {
      const errorData = await response.json();
      throw new Error(errorData.error || "Failed to apply pricing updates");
    }
    const result = await response.json();
    if (!result.success) {
      throw new Error(result.error || "Failed to apply pricing updates");
    }
    setLastApplyWasScheduled(!!effectiveDate);
    setScheduledDate(effectiveDate || null);
    setApplySuccess(true);
    setCurrentStep("applied");
  }, [token]);
  const handleReset = useCallback(() => {
    setCurrentStep("upload");
    setProcessorResult(null);
    setModifiedRecords([]);
    setApplySuccess(false);
    setIsDialogOpen(false);
    setLastApplyWasScheduled(false);
    setScheduledDate(null);
  }, []);
  const handleRecordChange = useCallback((index, updatedRecord) => {
    setModifiedRecords((prev) => {
      const newRecords = [...prev];
      newRecords[index] = updatedRecord;
      return newRecords;
    });
  }, []);
  const hasModifications = useMemo(() => {
    if (!processorResult || modifiedRecords.length === 0) return false;
    const originalRecords = processorResult.records;
    if (originalRecords.length !== modifiedRecords.length) return true;
    return modifiedRecords.some((record, index) => {
      const original = originalRecords[index];
      return original && record.newPrice !== original.newPrice;
    });
  }, [processorResult, modifiedRecords]);
  const hasErrors = processorResult && processorResult.validation.errors.length > 0;
  const hasWarnings = processorResult && processorResult.validation.warnings.length > 0;
  const validRecords = processorResult?.records || [];
  const errorSkus = new Set(processorResult?.validation.errors.map((e) => e.sku) || []);
  const warningSkus = new Set(processorResult?.validation.warnings.map((w) => w.sku) || []);
  return /* @__PURE__ */ jsxDEV("div", { className: "space-y-8", children: [
    /* @__PURE__ */ jsxDEV(
      SectionHeader,
      {
        title: "Pricing Update",
        description: "Upload CSV files to bulk update product prices across your Shopify catalog.",
        badge: currentStep === "applied" ? "Applied" : currentStep === "preview" ? "Phase 2 - Calculation Tools" : void 0
      },
      void 0,
      false,
      {
        fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
        lineNumber: 217,
        columnNumber: 7
      },
      this
    ),
    isLoadingProducts && /* @__PURE__ */ jsxDEV(Card, { padding: "lg", className: "text-center", children: /* @__PURE__ */ jsxDEV("div", { className: "flex flex-col items-center gap-4", children: [
      /* @__PURE__ */ jsxDEV(RefreshCw, { className: "h-8 w-8 animate-spin text-primary" }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
        lineNumber: 233,
        columnNumber: 13
      }, this),
      /* @__PURE__ */ jsxDEV("div", { children: [
        /* @__PURE__ */ jsxDEV("h3", { className: "text-lg font-semibold text-foreground", children: "Loading Product Data" }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
          lineNumber: 235,
          columnNumber: 15
        }, this),
        /* @__PURE__ */ jsxDEV("p", { className: "text-sm text-muted-foreground", children: "Fetching product information from Shopify..." }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
          lineNumber: 236,
          columnNumber: 15
        }, this)
      ] }, void 0, true, {
        fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
        lineNumber: 234,
        columnNumber: 13
      }, this)
    ] }, void 0, true, {
      fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
      lineNumber: 232,
      columnNumber: 11
    }, this) }, void 0, false, {
      fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
      lineNumber: 231,
      columnNumber: 7
    }, this),
    loadingError && /* @__PURE__ */ jsxDEV(
      InlineAlert,
      {
        variant: "warning",
        title: "Error Loading Products",
        message: loadingError,
        children: /* @__PURE__ */ jsxDEV(Button, { variant: "outline", onClick: fetchShopifyProducts, size: "sm", className: "mt-2", children: [
          /* @__PURE__ */ jsxDEV(RefreshCw, { className: "h-4 w-4" }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
            lineNumber: 252,
            columnNumber: 13
          }, this),
          "Retry"
        ] }, void 0, true, {
          fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
          lineNumber: 251,
          columnNumber: 11
        }, this)
      },
      void 0,
      false,
      {
        fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
        lineNumber: 246,
        columnNumber: 7
      },
      this
    ),
    !isLoadingProducts && !loadingError && /* @__PURE__ */ jsxDEV(Fragment, { children: [
      currentStep === "upload" && /* @__PURE__ */ jsxDEV(Card, { padding: "lg", children: /* @__PURE__ */ jsxDEV(
        PricingFileUploader,
        {
          shopifyData,
          onFileProcessed: handleFileProcessed
        },
        void 0,
        false,
        {
          fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
          lineNumber: 264,
          columnNumber: 15
        },
        this
      ) }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
        lineNumber: 263,
        columnNumber: 9
      }, this),
      currentStep === "preview" && processorResult && /* @__PURE__ */ jsxDEV("div", { className: "space-y-6", children: [
        /* @__PURE__ */ jsxDEV(Card, { padding: "lg", children: [
          /* @__PURE__ */ jsxDEV("h3", { className: "text-lg font-semibold text-foreground mb-4", children: "Validation Results" }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
            lineNumber: 276,
            columnNumber: 17
          }, this),
          /* @__PURE__ */ jsxDEV(
            ValidationErrorsPanel,
            {
              errors: processorResult.validation.errors,
              warnings: processorResult.validation.warnings
            },
            void 0,
            false,
            {
              fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
              lineNumber: 279,
              columnNumber: 17
            },
            this
          )
        ] }, void 0, true, {
          fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
          lineNumber: 275,
          columnNumber: 15
        }, this),
        modifiedRecords.length > 0 && /* @__PURE__ */ jsxDEV("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-6", children: [
          /* @__PURE__ */ jsxDEV(
            PriceCalculator,
            {
              records: modifiedRecords,
              onRecordsChange: setModifiedRecords
            },
            void 0,
            false,
            {
              fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
              lineNumber: 288,
              columnNumber: 19
            },
            this
          ),
          /* @__PURE__ */ jsxDEV(
            FormulaBuilder,
            {
              records: modifiedRecords,
              onRecordsChange: setModifiedRecords
            },
            void 0,
            false,
            {
              fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
              lineNumber: 292,
              columnNumber: 19
            },
            this
          )
        ] }, void 0, true, {
          fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
          lineNumber: 287,
          columnNumber: 11
        }, this),
        modifiedRecords.length > 0 && /* @__PURE__ */ jsxDEV(Card, { padding: "lg", children: /* @__PURE__ */ jsxDEV("div", { className: "space-y-4", children: [
          /* @__PURE__ */ jsxDEV("div", { className: "flex items-center justify-between", children: [
            /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-3", children: [
              /* @__PURE__ */ jsxDEV("h3", { className: "text-lg font-semibold text-foreground", children: "Price Changes Preview" }, void 0, false, {
                fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
                lineNumber: 305,
                columnNumber: 25
              }, this),
              hasModifications && /* @__PURE__ */ jsxDEV(Badge, { variant: "warning", className: "flex items-center gap-1", children: [
                /* @__PURE__ */ jsxDEV(AlertCircle, { className: "h-3 w-3" }, void 0, false, {
                  fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
                  lineNumber: 311,
                  columnNumber: 29
                }, this),
                "Changes Pending"
              ] }, void 0, true, {
                fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
                lineNumber: 310,
                columnNumber: 19
              }, this)
            ] }, void 0, true, {
              fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
              lineNumber: 304,
              columnNumber: 23
            }, this),
            /* @__PURE__ */ jsxDEV("div", { className: "flex gap-2", children: [
              /* @__PURE__ */ jsxDEV(Button, { variant: "outline", onClick: handleReset, children: "Start Over" }, void 0, false, {
                fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
                lineNumber: 317,
                columnNumber: 25
              }, this),
              /* @__PURE__ */ jsxDEV(
                Button,
                {
                  variant: "primary",
                  onClick: () => setIsDialogOpen(true),
                  disabled: hasErrors || modifiedRecords.length === 0,
                  children: "Apply Pricing Updates"
                },
                void 0,
                false,
                {
                  fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
                  lineNumber: 320,
                  columnNumber: 25
                },
                this
              )
            ] }, void 0, true, {
              fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
              lineNumber: 316,
              columnNumber: 23
            }, this)
          ] }, void 0, true, {
            fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
            lineNumber: 303,
            columnNumber: 21
          }, this),
          /* @__PURE__ */ jsxDEV(
            PricingPreviewTable,
            {
              records: modifiedRecords,
              errorSkus,
              warningSkus,
              editable: true,
              onRecordChange: handleRecordChange
            },
            void 0,
            false,
            {
              fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
              lineNumber: 330,
              columnNumber: 21
            },
            this
          )
        ] }, void 0, true, {
          fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
          lineNumber: 302,
          columnNumber: 19
        }, this) }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
          lineNumber: 301,
          columnNumber: 11
        }, this),
        validRecords.length === 0 && /* @__PURE__ */ jsxDEV(
          InlineAlert,
          {
            variant: "warning",
            title: "No Valid Records",
            message: "All records in the uploaded file have errors. Please fix the errors and upload again.",
            children: /* @__PURE__ */ jsxDEV(Button, { variant: "outline", onClick: handleReset, size: "sm", className: "mt-2", children: "Upload New File" }, void 0, false, {
              fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
              lineNumber: 348,
              columnNumber: 19
            }, this)
          },
          void 0,
          false,
          {
            fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
            lineNumber: 343,
            columnNumber: 11
          },
          this
        )
      ] }, void 0, true, {
        fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
        lineNumber: 273,
        columnNumber: 9
      }, this),
      currentStep === "applied" && applySuccess && /* @__PURE__ */ jsxDEV(Card, { padding: "lg", children: /* @__PURE__ */ jsxDEV("div", { className: "text-center space-y-4", children: [
        /* @__PURE__ */ jsxDEV("div", { className: "flex justify-center", children: /* @__PURE__ */ jsxDEV("div", { className: "h-16 w-16 rounded-full bg-success/10 flex items-center justify-center", children: /* @__PURE__ */ jsxDEV(CheckCircle, { className: "h-8 w-8 text-success" }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
          lineNumber: 362,
          columnNumber: 21
        }, this) }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
          lineNumber: 361,
          columnNumber: 19
        }, this) }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
          lineNumber: 360,
          columnNumber: 17
        }, this),
        /* @__PURE__ */ jsxDEV("div", { children: [
          /* @__PURE__ */ jsxDEV("h3", { className: "text-xl font-semibold text-foreground mb-2", children: "Pricing Updates Applied Successfully" }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
            lineNumber: 366,
            columnNumber: 19
          }, this),
          /* @__PURE__ */ jsxDEV("p", { className: "text-sm text-muted-foreground max-w-md mx-auto", children: "All price changes have been applied to your Shopify store. Changes should be visible on your storefront shortly." }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
            lineNumber: 369,
            columnNumber: 19
          }, this)
        ] }, void 0, true, {
          fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
          lineNumber: 365,
          columnNumber: 17
        }, this),
        /* @__PURE__ */ jsxDEV("div", { className: "flex justify-center gap-2", children: /* @__PURE__ */ jsxDEV(Button, { variant: "primary", onClick: handleReset, children: "Upload Another File" }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
          lineNumber: 374,
          columnNumber: 19
        }, this) }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
          lineNumber: 373,
          columnNumber: 17
        }, this)
      ] }, void 0, true, {
        fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
        lineNumber: 359,
        columnNumber: 15
      }, this) }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
        lineNumber: 358,
        columnNumber: 9
      }, this)
    ] }, void 0, true, {
      fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
      lineNumber: 260,
      columnNumber: 7
    }, this),
    /* @__PURE__ */ jsxDEV(
      ApplyPricingDialog,
      {
        open: isDialogOpen,
        onOpenChange: setIsDialogOpen,
        records: modifiedRecords,
        onApply: handleApplyPricing,
        hasErrors: !!hasErrors
      },
      void 0,
      false,
      {
        fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
        lineNumber: 385,
        columnNumber: 7
      },
      this
    )
  ] }, void 0, true, {
    fileName: "C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx",
    lineNumber: 215,
    columnNumber: 5
  }, this);
}
_s(PricingUpdatePage, "yGsUvopo8yQei9HnPqp08zi9gsI=", false, function() {
  return [useAuth];
});
_c = PricingUpdatePage;
var _c;
$RefreshReg$(_c, "PricingUpdatePage");
if (import.meta.hot && !inWebWorker) {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}
if (import.meta.hot && !inWebWorker) {
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("C:/Projects/Source 4 Industries/src/pages/marketing/pricing-update/page.tsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}

//# sourceMappingURL=data:application/json;base64,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QWlMQTtBQUVKO0FBQUNoSCxHQTFWZXFCLG1CQUFpQjtBQUFBLFVBQ2xCRCxPQUFPO0FBQUE7QUFBQXdHLEtBRE52RztBQUFpQixJQUFBdUc7QUFBQUMsYUFBQUQsSUFBQSIsIm5hbWVzIjpbIl9zIiwiJFJlZnJlc2hTaWckIiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VDYWxsYmFjayIsInVzZU1lbW8iLCJSZWZyZXNoQ3ciLCJDaGVja0NpcmNsZSIsIkFsZXJ0Q2lyY2xlIiwiU2VjdGlvbkhlYWRlciIsIkNhcmQiLCJCdXR0b24iLCJCYWRnZSIsIklubGluZUFsZXJ0IiwiUHJpY2luZ0ZpbGVVcGxvYWRlciIsIlByaWNpbmdQcmV2aWV3VGFibGUiLCJWYWxpZGF0aW9uRXJyb3JzUGFuZWwiLCJBcHBseVByaWNpbmdEaWFsb2ciLCJQcmljZUNhbGN1bGF0b3IiLCJGb3JtdWxhQnVpbGRlciIsInVzZUF1dGgiLCJQcmljaW5nVXBkYXRlUGFnZSIsImF1dGgiLCJjdXJyZW50U3RlcCIsInNldEN1cnJlbnRTdGVwIiwic2hvcGlmeURhdGEiLCJzZXRTaG9waWZ5RGF0YSIsIk1hcCIsImlzTG9hZGluZ1Byb2R1Y3RzIiwic2V0SXNMb2FkaW5nUHJvZHVjdHMiLCJsb2FkaW5nRXJyb3IiLCJzZXRMb2FkaW5nRXJyb3IiLCJwcm9jZXNzb3JSZXN1bHQiLCJzZXRQcm9jZXNzb3JSZXN1bHQiLCJpc0RpYWxvZ09wZW4iLCJzZXRJc0RpYWxvZ09wZW4iLCJhcHBseVN1Y2Nlc3MiLCJzZXRBcHBseVN1Y2Nlc3MiLCJtb2RpZmllZFJlY29yZHMiLCJzZXRNb2RpZmllZFJlY29yZHMiLCJsYXN0QXBwbHlXYXNTY2hlZHVsZWQiLCJzZXRMYXN0QXBwbHlXYXNTY2hlZHVsZWQiLCJzY2hlZHVsZWREYXRlIiwic2V0U2NoZWR1bGVkRGF0ZSIsInRva2VuIiwic2Vzc2lvbiIsImFjY2Vzc190b2tlbiIsImZldGNoU2hvcGlmeVByb2R1Y3RzIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwiZGF0YSIsImpzb24iLCJvayIsIkVycm9yIiwiZXJyb3IiLCJzdGF0dXMiLCJzdWNjZXNzIiwicHJvZHVjdHMiLCJwcm9kdWN0TWFwIiwiZm9yRWFjaCIsInByb2R1Y3QiLCJ2YXJpYW50cyIsInZhcmlhbnQiLCJza3UiLCJ0cmltIiwidG9VcHBlckNhc2UiLCJzZXQiLCJ2YXJpYW50SWQiLCJpZCIsInByb2R1Y3RJZCIsInByb2R1Y3RUaXRsZSIsInRpdGxlIiwidmFyaWFudFRpdGxlIiwiY3VycmVudFByaWNlIiwicGFyc2VGbG9hdCIsInByaWNlIiwiY29tcGFyZUF0UHJpY2UiLCJoYW5kbGUiLCJjb25zb2xlIiwibG9nIiwic2l6ZSIsIm1lc3NhZ2UiLCJoYW5kbGVGaWxlUHJvY2Vzc2VkIiwicmVzdWx0IiwicmVjb3JkcyIsImhhbmRsZUFwcGx5UHJpY2luZyIsImVmZmVjdGl2ZURhdGUiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm1hcCIsInIiLCJzaG9waWZ5UHJvZHVjdElkIiwic2hvcGlmeVZhcmlhbnRJZCIsIm5ld1ByaWNlIiwibmV3Q29tcGFyZUF0UHJpY2UiLCJlcnJvckRhdGEiLCJoYW5kbGVSZXNldCIsImhhbmRsZVJlY29yZENoYW5nZSIsImluZGV4IiwidXBkYXRlZFJlY29yZCIsInByZXYiLCJuZXdSZWNvcmRzIiwiaGFzTW9kaWZpY2F0aW9ucyIsImxlbmd0aCIsIm9yaWdpbmFsUmVjb3JkcyIsInNvbWUiLCJyZWNvcmQiLCJvcmlnaW5hbCIsImhhc0Vycm9ycyIsInZhbGlkYXRpb24iLCJlcnJvcnMiLCJoYXNXYXJuaW5ncyIsIndhcm5pbmdzIiwidmFsaWRSZWNvcmRzIiwiZXJyb3JTa3VzIiwiU2V0IiwiZSIsIndhcm5pbmdTa3VzIiwidyIsInVuZGVmaW5lZCIsIl9jIiwiJFJlZnJlc2hSZWckIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VzIjpbInBhZ2UudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VDYWxsYmFjaywgdXNlTWVtbyB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgTGluayB9IGZyb20gXCJyZWFjdC1yb3V0ZXItZG9tXCI7XG5pbXBvcnQgeyBSZWZyZXNoQ3csIENoZWNrQ2lyY2xlLCBBbGVydENpcmNsZSwgQ2xvY2ssIENhbGVuZGFyIH0gZnJvbSBcImx1Y2lkZS1yZWFjdFwiO1xuaW1wb3J0IHsgZm9ybWF0IH0gZnJvbSBcImRhdGUtZm5zXCI7XG5pbXBvcnQgeyBTZWN0aW9uSGVhZGVyIH0gZnJvbSBcIkAvY29tcG9uZW50cy9zZWN0aW9uLWhlYWRlclwiO1xuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvY2FyZFwiO1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9idXR0b25cIjtcbmltcG9ydCB7IEJhZGdlIH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9iYWRnZVwiO1xuaW1wb3J0IHsgSW5saW5lQWxlcnQgfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2lubGluZS1hbGVydFwiO1xuaW1wb3J0IHtcbiAgUHJpY2luZ0ZpbGVVcGxvYWRlcixcbiAgUHJpY2luZ1ByZXZpZXdUYWJsZSxcbiAgVmFsaWRhdGlvbkVycm9yc1BhbmVsLFxuICBBcHBseVByaWNpbmdEaWFsb2csXG4gIFByaWNlQ2FsY3VsYXRvcixcbiAgRm9ybXVsYUJ1aWxkZXIsXG59IGZyb20gXCJAL2NvbXBvbmVudHMvcHJpY2luZ1wiO1xuaW1wb3J0IHtcbiAgdHlwZSBQcmljaW5nUHJvY2Vzc29yUmVzdWx0LFxuICB0eXBlIFByaWNlVXBkYXRlUmVjb3JkLFxuICB0eXBlIFByb2R1Y3REYXRhLFxufSBmcm9tIFwiQC9saWIvcHJpY2luZy1wcm9jZXNzb3JcIjtcbmltcG9ydCB7IHVzZUF1dGggfSBmcm9tIFwiQC92aXRlL2F1dGgvYXV0aC1wcm92aWRlclwiO1xuXG50eXBlIFdvcmtmbG93U3RlcCA9IFwidXBsb2FkXCIgfCBcInByZXZpZXdcIiB8IFwiYXBwbGllZFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gUHJpY2luZ1VwZGF0ZVBhZ2UoKSB7XG4gIGNvbnN0IGF1dGggPSB1c2VBdXRoKCk7XG5cbiAgLy8gU3RhdGUgbWFuYWdlbWVudFxuICBjb25zdCBbY3VycmVudFN0ZXAsIHNldEN1cnJlbnRTdGVwXSA9IHVzZVN0YXRlPFdvcmtmbG93U3RlcD4oXCJ1cGxvYWRcIik7XG4gIGNvbnN0IFtzaG9waWZ5RGF0YSwgc2V0U2hvcGlmeURhdGFdID0gdXNlU3RhdGU8TWFwPHN0cmluZywgUHJvZHVjdERhdGE+PihuZXcgTWFwKCkpO1xuICBjb25zdCBbaXNMb2FkaW5nUHJvZHVjdHMsIHNldElzTG9hZGluZ1Byb2R1Y3RzXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbbG9hZGluZ0Vycm9yLCBzZXRMb2FkaW5nRXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtwcm9jZXNzb3JSZXN1bHQsIHNldFByb2Nlc3NvclJlc3VsdF0gPSB1c2VTdGF0ZTxQcmljaW5nUHJvY2Vzc29yUmVzdWx0IHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpc0RpYWxvZ09wZW4sIHNldElzRGlhbG9nT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFthcHBseVN1Y2Nlc3MsIHNldEFwcGx5U3VjY2Vzc10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFttb2RpZmllZFJlY29yZHMsIHNldE1vZGlmaWVkUmVjb3Jkc10gPSB1c2VTdGF0ZTxQcmljZVVwZGF0ZVJlY29yZFtdPihbXSk7XG4gIGNvbnN0IFtsYXN0QXBwbHlXYXNTY2hlZHVsZWQsIHNldExhc3RBcHBseVdhc1NjaGVkdWxlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzY2hlZHVsZWREYXRlLCBzZXRTY2hlZHVsZWREYXRlXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuXG4gIC8vIEdldCBhdXRoIHRva2VuXG4gIGNvbnN0IHRva2VuID0gYXV0aC5zZXNzaW9uPy5hY2Nlc3NfdG9rZW47XG5cbiAgLy8gRmV0Y2ggU2hvcGlmeSBwcm9kdWN0IGRhdGEgb24gbW91bnRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXRva2VuKSByZXR1cm47XG4gICAgZmV0Y2hTaG9waWZ5UHJvZHVjdHMoKTtcbiAgfSwgW3Rva2VuXSk7XG5cbiAgY29uc3QgZmV0Y2hTaG9waWZ5UHJvZHVjdHMgPSBhc3luYyAoKSA9PiB7XG4gICAgc2V0SXNMb2FkaW5nUHJvZHVjdHModHJ1ZSk7XG4gICAgc2V0TG9hZGluZ0Vycm9yKG51bGwpO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIEZldGNoIGZyb20gQVBJIGVuZHBvaW50IHRoYXQgcmV0dXJucyBhbGwgcHJvZHVjdHNcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXCIvYXBpL21hcmtldGluZy9zaG9waWZ5LXByb2R1Y3RzXCIsIHtcbiAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VufWAsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZGF0YS5lcnJvciB8fCBgRmFpbGVkIHRvIGZldGNoIFNob3BpZnkgcHJvZHVjdHMgKCR7cmVzcG9uc2Uuc3RhdHVzfSlgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFkYXRhLnN1Y2Nlc3MgfHwgIWRhdGEucHJvZHVjdHMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGRhdGEuZXJyb3IgfHwgXCJObyBwcm9kdWN0IGRhdGEgcmV0dXJuZWRcIik7XG4gICAgICB9XG5cbiAgICAgIC8vIFRyYW5zZm9ybSBBUEkgcmVzcG9uc2UgdG8gUHJvZHVjdERhdGEgbWFwXG4gICAgICBjb25zdCBwcm9kdWN0TWFwID0gbmV3IE1hcDxzdHJpbmcsIFByb2R1Y3REYXRhPigpO1xuXG4gICAgICBkYXRhLnByb2R1Y3RzLmZvckVhY2goKHByb2R1Y3Q6IGFueSkgPT4ge1xuICAgICAgICBwcm9kdWN0LnZhcmlhbnRzPy5mb3JFYWNoKCh2YXJpYW50OiBhbnkpID0+IHtcbiAgICAgICAgICBpZiAodmFyaWFudC5za3UpIHtcbiAgICAgICAgICAgIGNvbnN0IHNrdSA9IHZhcmlhbnQuc2t1LnRyaW0oKS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgcHJvZHVjdE1hcC5zZXQoc2t1LCB7XG4gICAgICAgICAgICAgIHNrdTogc2t1LFxuICAgICAgICAgICAgICB2YXJpYW50SWQ6IHZhcmlhbnQuaWQsXG4gICAgICAgICAgICAgIHByb2R1Y3RJZDogcHJvZHVjdC5pZCxcbiAgICAgICAgICAgICAgcHJvZHVjdFRpdGxlOiBwcm9kdWN0LnRpdGxlLFxuICAgICAgICAgICAgICB2YXJpYW50VGl0bGU6IHZhcmlhbnQudGl0bGUsXG4gICAgICAgICAgICAgIGN1cnJlbnRQcmljZTogcGFyc2VGbG9hdCh2YXJpYW50LnByaWNlKSB8fCAwLFxuICAgICAgICAgICAgICBjb21wYXJlQXRQcmljZTogdmFyaWFudC5jb21wYXJlQXRQcmljZSA/IHBhcnNlRmxvYXQodmFyaWFudC5jb21wYXJlQXRQcmljZSkgOiBudWxsLFxuICAgICAgICAgICAgICBoYW5kbGU6IHByb2R1Y3QuaGFuZGxlLFxuICAgICAgICAgICAgICBzdGF0dXM6IHByb2R1Y3Quc3RhdHVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBzZXRTaG9waWZ5RGF0YShwcm9kdWN0TWFwKTtcbiAgICAgIGNvbnNvbGUubG9nKGBbUHJpY2luZ1VwZGF0ZVBhZ2VdIExvYWRlZCAke3Byb2R1Y3RNYXAuc2l6ZX0gcHJvZHVjdHMgZnJvbSBTaG9waWZ5YCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJbUHJpY2luZ1VwZGF0ZVBhZ2VdIEVycm9yIGZldGNoaW5nIFNob3BpZnkgcHJvZHVjdHM6XCIsIGVycm9yKTtcbiAgICAgIHNldExvYWRpbmdFcnJvcihlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiRmFpbGVkIHRvIGxvYWQgcHJvZHVjdCBkYXRhXCIpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRJc0xvYWRpbmdQcm9kdWN0cyhmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUZpbGVQcm9jZXNzZWQgPSB1c2VDYWxsYmFjaygocmVzdWx0OiBQcmljaW5nUHJvY2Vzc29yUmVzdWx0KSA9PiB7XG4gICAgc2V0UHJvY2Vzc29yUmVzdWx0KHJlc3VsdCk7XG4gICAgc2V0TW9kaWZpZWRSZWNvcmRzKFsuLi5yZXN1bHQucmVjb3Jkc10pOyAvLyBJbml0aWFsaXplIHdpdGggb3JpZ2luYWwgcmVjb3Jkc1xuICAgIHNldEN1cnJlbnRTdGVwKFwicHJldmlld1wiKTtcbiAgICBzZXRBcHBseVN1Y2Nlc3MoZmFsc2UpO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgaGFuZGxlQXBwbHlQcmljaW5nID0gdXNlQ2FsbGJhY2soYXN5bmMgKHJlY29yZHM6IFByaWNlVXBkYXRlUmVjb3JkW10sIGVmZmVjdGl2ZURhdGU/OiBzdHJpbmcpID0+IHtcbiAgICAvLyBDYWxsIEFQSSB0byBhcHBseSBwcmljaW5nIHVwZGF0ZXNcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiL2FwaS9tYXJrZXRpbmcvYXBwbHktcHJpY2luZ1wiLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VufWAsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICByZWNvcmRzOiByZWNvcmRzLm1hcChyID0+ICh7XG4gICAgICAgICAgc2hvcGlmeVByb2R1Y3RJZDogci5wcm9kdWN0SWQsXG4gICAgICAgICAgc2hvcGlmeVZhcmlhbnRJZDogci52YXJpYW50SWQsXG4gICAgICAgICAgc2t1OiByLnNrdSxcbiAgICAgICAgICBwcm9kdWN0VGl0bGU6IHIucHJvZHVjdFRpdGxlLFxuICAgICAgICAgIGN1cnJlbnRQcmljZTogci5jdXJyZW50UHJpY2UsXG4gICAgICAgICAgbmV3UHJpY2U6IHIubmV3UHJpY2UsXG4gICAgICAgICAgY29tcGFyZUF0UHJpY2U6IHIubmV3Q29tcGFyZUF0UHJpY2UsXG4gICAgICAgICAgZWZmZWN0aXZlRGF0ZTogZWZmZWN0aXZlRGF0ZSxcbiAgICAgICAgfSkpLFxuICAgICAgICBlZmZlY3RpdmVEYXRlLFxuICAgICAgfSksXG4gICAgfSk7XG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JEYXRhLmVycm9yIHx8IFwiRmFpbGVkIHRvIGFwcGx5IHByaWNpbmcgdXBkYXRlc1wiKTtcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IocmVzdWx0LmVycm9yIHx8IFwiRmFpbGVkIHRvIGFwcGx5IHByaWNpbmcgdXBkYXRlc1wiKTtcbiAgICB9XG5cbiAgICAvLyBUcmFjayB3aGV0aGVyIHRoaXMgd2FzIGEgc2NoZWR1bGVkIHVwZGF0ZVxuICAgIHNldExhc3RBcHBseVdhc1NjaGVkdWxlZCghIWVmZmVjdGl2ZURhdGUpO1xuICAgIHNldFNjaGVkdWxlZERhdGUoZWZmZWN0aXZlRGF0ZSB8fCBudWxsKTtcblxuICAgIC8vIE1hcmsgYXMgc3VjY2Vzc2Z1bGx5IGFwcGxpZWRcbiAgICBzZXRBcHBseVN1Y2Nlc3ModHJ1ZSk7XG4gICAgc2V0Q3VycmVudFN0ZXAoXCJhcHBsaWVkXCIpO1xuICB9LCBbdG9rZW5dKTtcblxuICBjb25zdCBoYW5kbGVSZXNldCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRDdXJyZW50U3RlcChcInVwbG9hZFwiKTtcbiAgICBzZXRQcm9jZXNzb3JSZXN1bHQobnVsbCk7XG4gICAgc2V0TW9kaWZpZWRSZWNvcmRzKFtdKTtcbiAgICBzZXRBcHBseVN1Y2Nlc3MoZmFsc2UpO1xuICAgIHNldElzRGlhbG9nT3BlbihmYWxzZSk7XG4gICAgc2V0TGFzdEFwcGx5V2FzU2NoZWR1bGVkKGZhbHNlKTtcbiAgICBzZXRTY2hlZHVsZWREYXRlKG51bGwpO1xuICB9LCBbXSk7XG5cbiAgLy8gSGFuZGxlIGluZGl2aWR1YWwgcmVjb3JkIGNoYW5nZSBmcm9tIGlubGluZSBlZGl0aW5nXG4gIGNvbnN0IGhhbmRsZVJlY29yZENoYW5nZSA9IHVzZUNhbGxiYWNrKChpbmRleDogbnVtYmVyLCB1cGRhdGVkUmVjb3JkOiBQcmljZVVwZGF0ZVJlY29yZCkgPT4ge1xuICAgIHNldE1vZGlmaWVkUmVjb3JkcyhwcmV2ID0+IHtcbiAgICAgIGNvbnN0IG5ld1JlY29yZHMgPSBbLi4ucHJldl07XG4gICAgICBuZXdSZWNvcmRzW2luZGV4XSA9IHVwZGF0ZWRSZWNvcmQ7XG4gICAgICByZXR1cm4gbmV3UmVjb3JkcztcbiAgICB9KTtcbiAgfSwgW10pO1xuXG4gIC8vIENoZWNrIGlmIHJlY29yZHMgaGF2ZSBiZWVuIG1vZGlmaWVkIGZyb20gb3JpZ2luYWxcbiAgY29uc3QgaGFzTW9kaWZpY2F0aW9ucyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmICghcHJvY2Vzc29yUmVzdWx0IHx8IG1vZGlmaWVkUmVjb3Jkcy5sZW5ndGggPT09IDApIHJldHVybiBmYWxzZTtcbiAgICBjb25zdCBvcmlnaW5hbFJlY29yZHMgPSBwcm9jZXNzb3JSZXN1bHQucmVjb3JkcztcbiAgICBpZiAob3JpZ2luYWxSZWNvcmRzLmxlbmd0aCAhPT0gbW9kaWZpZWRSZWNvcmRzLmxlbmd0aCkgcmV0dXJuIHRydWU7XG5cbiAgICByZXR1cm4gbW9kaWZpZWRSZWNvcmRzLnNvbWUoKHJlY29yZCwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IG9yaWdpbmFsID0gb3JpZ2luYWxSZWNvcmRzW2luZGV4XTtcbiAgICAgIHJldHVybiBvcmlnaW5hbCAmJiByZWNvcmQubmV3UHJpY2UgIT09IG9yaWdpbmFsLm5ld1ByaWNlO1xuICAgIH0pO1xuICB9LCBbcHJvY2Vzc29yUmVzdWx0LCBtb2RpZmllZFJlY29yZHNdKTtcblxuICBjb25zdCBoYXNFcnJvcnMgPSBwcm9jZXNzb3JSZXN1bHQgJiYgcHJvY2Vzc29yUmVzdWx0LnZhbGlkYXRpb24uZXJyb3JzLmxlbmd0aCA+IDA7XG4gIGNvbnN0IGhhc1dhcm5pbmdzID0gcHJvY2Vzc29yUmVzdWx0ICYmIHByb2Nlc3NvclJlc3VsdC52YWxpZGF0aW9uLndhcm5pbmdzLmxlbmd0aCA+IDA7XG4gIGNvbnN0IHZhbGlkUmVjb3JkcyA9IHByb2Nlc3NvclJlc3VsdD8ucmVjb3JkcyB8fCBbXTtcbiAgY29uc3QgZXJyb3JTa3VzID0gbmV3IFNldChwcm9jZXNzb3JSZXN1bHQ/LnZhbGlkYXRpb24uZXJyb3JzLm1hcChlID0+IGUuc2t1KSB8fCBbXSk7XG4gIGNvbnN0IHdhcm5pbmdTa3VzID0gbmV3IFNldChwcm9jZXNzb3JSZXN1bHQ/LnZhbGlkYXRpb24ud2FybmluZ3MubWFwKHcgPT4gdy5za3UpIHx8IFtdKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS04XCI+XG4gICAgICB7LyogSGVhZGVyICovfVxuICAgICAgPFNlY3Rpb25IZWFkZXJcbiAgICAgICAgdGl0bGU9XCJQcmljaW5nIFVwZGF0ZVwiXG4gICAgICAgIGRlc2NyaXB0aW9uPVwiVXBsb2FkIENTViBmaWxlcyB0byBidWxrIHVwZGF0ZSBwcm9kdWN0IHByaWNlcyBhY3Jvc3MgeW91ciBTaG9waWZ5IGNhdGFsb2cuXCJcbiAgICAgICAgYmFkZ2U9e1xuICAgICAgICAgIGN1cnJlbnRTdGVwID09PSBcImFwcGxpZWRcIlxuICAgICAgICAgICAgPyBcIkFwcGxpZWRcIlxuICAgICAgICAgICAgOiBjdXJyZW50U3RlcCA9PT0gXCJwcmV2aWV3XCJcbiAgICAgICAgICAgICAgPyBcIlBoYXNlIDIgLSBDYWxjdWxhdGlvbiBUb29sc1wiXG4gICAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICAgIH1cbiAgICAgIC8+XG5cbiAgICAgIHsvKiBMb2FkaW5nIHN0YXRlIGZvciBTaG9waWZ5IGRhdGEgKi99XG4gICAgICB7aXNMb2FkaW5nUHJvZHVjdHMgJiYgKFxuICAgICAgICA8Q2FyZCBwYWRkaW5nPVwibGdcIiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgZ2FwLTRcIj5cbiAgICAgICAgICAgIDxSZWZyZXNoQ3cgY2xhc3NOYW1lPVwiaC04IHctOCBhbmltYXRlLXNwaW4gdGV4dC1wcmltYXJ5XCIgLz5cbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC1mb3JlZ3JvdW5kXCI+TG9hZGluZyBQcm9kdWN0IERhdGE8L2gzPlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiPlxuICAgICAgICAgICAgICAgIEZldGNoaW5nIHByb2R1Y3QgaW5mb3JtYXRpb24gZnJvbSBTaG9waWZ5Li4uXG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L0NhcmQ+XG4gICAgICApfVxuXG4gICAgICB7LyogRXJyb3IgbG9hZGluZyBwcm9kdWN0cyAqL31cbiAgICAgIHtsb2FkaW5nRXJyb3IgJiYgKFxuICAgICAgICA8SW5saW5lQWxlcnRcbiAgICAgICAgICB2YXJpYW50PVwid2FybmluZ1wiXG4gICAgICAgICAgdGl0bGU9XCJFcnJvciBMb2FkaW5nIFByb2R1Y3RzXCJcbiAgICAgICAgICBtZXNzYWdlPXtsb2FkaW5nRXJyb3J9XG4gICAgICAgID5cbiAgICAgICAgICA8QnV0dG9uIHZhcmlhbnQ9XCJvdXRsaW5lXCIgb25DbGljaz17ZmV0Y2hTaG9waWZ5UHJvZHVjdHN9IHNpemU9XCJzbVwiIGNsYXNzTmFtZT1cIm10LTJcIj5cbiAgICAgICAgICAgIDxSZWZyZXNoQ3cgY2xhc3NOYW1lPVwiaC00IHctNFwiIC8+XG4gICAgICAgICAgICBSZXRyeVxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICA8L0lubGluZUFsZXJ0PlxuICAgICAgKX1cblxuICAgICAgey8qIE1haW4gd29ya2Zsb3cgKG9ubHkgc2hvdyB3aGVuIHByb2R1Y3RzIGxvYWRlZCkgKi99XG4gICAgICB7IWlzTG9hZGluZ1Byb2R1Y3RzICYmICFsb2FkaW5nRXJyb3IgJiYgKFxuICAgICAgICA8PlxuICAgICAgICAgIHsvKiBTdGVwIDE6IFVwbG9hZCAqL31cbiAgICAgICAgICB7Y3VycmVudFN0ZXAgPT09IFwidXBsb2FkXCIgJiYgKFxuICAgICAgICAgICAgPENhcmQgcGFkZGluZz1cImxnXCI+XG4gICAgICAgICAgICAgIDxQcmljaW5nRmlsZVVwbG9hZGVyXG4gICAgICAgICAgICAgICAgc2hvcGlmeURhdGE9e3Nob3BpZnlEYXRhfVxuICAgICAgICAgICAgICAgIG9uRmlsZVByb2Nlc3NlZD17aGFuZGxlRmlsZVByb2Nlc3NlZH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvQ2FyZD5cbiAgICAgICAgICApfVxuXG4gICAgICAgICAgey8qIFN0ZXAgMjogUHJldmlldyAmIFZhbGlkYXRpb24gKi99XG4gICAgICAgICAge2N1cnJlbnRTdGVwID09PSBcInByZXZpZXdcIiAmJiBwcm9jZXNzb3JSZXN1bHQgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTZcIj5cbiAgICAgICAgICAgICAgey8qIFZhbGlkYXRpb24gUmVzdWx0cyAqL31cbiAgICAgICAgICAgICAgPENhcmQgcGFkZGluZz1cImxnXCI+XG4gICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LWZvcmVncm91bmQgbWItNFwiPlxuICAgICAgICAgICAgICAgICAgVmFsaWRhdGlvbiBSZXN1bHRzXG4gICAgICAgICAgICAgICAgPC9oMz5cbiAgICAgICAgICAgICAgICA8VmFsaWRhdGlvbkVycm9yc1BhbmVsXG4gICAgICAgICAgICAgICAgICBlcnJvcnM9e3Byb2Nlc3NvclJlc3VsdC52YWxpZGF0aW9uLmVycm9yc31cbiAgICAgICAgICAgICAgICAgIHdhcm5pbmdzPXtwcm9jZXNzb3JSZXN1bHQudmFsaWRhdGlvbi53YXJuaW5nc31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L0NhcmQ+XG5cbiAgICAgICAgICAgICAgey8qIENhbGN1bGF0aW9uIFRvb2xzIC0gUHJpY2UgQ2FsY3VsYXRvciAmIEZvcm11bGEgQnVpbGRlciBzaWRlLWJ5LXNpZGUgKi99XG4gICAgICAgICAgICAgIHttb2RpZmllZFJlY29yZHMubGVuZ3RoID4gMCAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIGxnOmdyaWQtY29scy0yIGdhcC02XCI+XG4gICAgICAgICAgICAgICAgICA8UHJpY2VDYWxjdWxhdG9yXG4gICAgICAgICAgICAgICAgICAgIHJlY29yZHM9e21vZGlmaWVkUmVjb3Jkc31cbiAgICAgICAgICAgICAgICAgICAgb25SZWNvcmRzQ2hhbmdlPXtzZXRNb2RpZmllZFJlY29yZHN9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPEZvcm11bGFCdWlsZGVyXG4gICAgICAgICAgICAgICAgICAgIHJlY29yZHM9e21vZGlmaWVkUmVjb3Jkc31cbiAgICAgICAgICAgICAgICAgICAgb25SZWNvcmRzQ2hhbmdlPXtzZXRNb2RpZmllZFJlY29yZHN9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgIHsvKiBQcmV2aWV3IFRhYmxlICovfVxuICAgICAgICAgICAgICB7bW9kaWZpZWRSZWNvcmRzLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICAgICAgICAgIDxDYXJkIHBhZGRpbmc9XCJsZ1wiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW5cIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtZm9yZWdyb3VuZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBQcmljZSBDaGFuZ2VzIFByZXZpZXdcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvaDM+XG4gICAgICAgICAgICAgICAgICAgICAgICB7LyogQ2hhbmdlcyBwZW5kaW5nIGluZGljYXRvciAqL31cbiAgICAgICAgICAgICAgICAgICAgICAgIHtoYXNNb2RpZmljYXRpb25zICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEJhZGdlIHZhcmlhbnQ9XCJ3YXJuaW5nXCIgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWxlcnRDaXJjbGUgY2xhc3NOYW1lPVwiaC0zIHctM1wiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hhbmdlcyBQZW5kaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvQmFkZ2U+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBnYXAtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB2YXJpYW50PVwib3V0bGluZVwiIG9uQ2xpY2s9e2hhbmRsZVJlc2V0fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgU3RhcnQgT3ZlclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0SXNEaWFsb2dPcGVuKHRydWUpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17aGFzRXJyb3JzIHx8IG1vZGlmaWVkUmVjb3Jkcy5sZW5ndGggPT09IDB9XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIEFwcGx5IFByaWNpbmcgVXBkYXRlc1xuICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgIDxQcmljaW5nUHJldmlld1RhYmxlXG4gICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkcz17bW9kaWZpZWRSZWNvcmRzfVxuICAgICAgICAgICAgICAgICAgICAgIGVycm9yU2t1cz17ZXJyb3JTa3VzfVxuICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdTa3VzPXt3YXJuaW5nU2t1c31cbiAgICAgICAgICAgICAgICAgICAgICBlZGl0YWJsZT17dHJ1ZX1cbiAgICAgICAgICAgICAgICAgICAgICBvblJlY29yZENoYW5nZT17aGFuZGxlUmVjb3JkQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9DYXJkPlxuICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgIHsvKiBObyB2YWxpZCByZWNvcmRzICovfVxuICAgICAgICAgICAgICB7dmFsaWRSZWNvcmRzLmxlbmd0aCA9PT0gMCAmJiAoXG4gICAgICAgICAgICAgICAgPElubGluZUFsZXJ0XG4gICAgICAgICAgICAgICAgICB2YXJpYW50PVwid2FybmluZ1wiXG4gICAgICAgICAgICAgICAgICB0aXRsZT1cIk5vIFZhbGlkIFJlY29yZHNcIlxuICAgICAgICAgICAgICAgICAgbWVzc2FnZT1cIkFsbCByZWNvcmRzIGluIHRoZSB1cGxvYWRlZCBmaWxlIGhhdmUgZXJyb3JzLiBQbGVhc2UgZml4IHRoZSBlcnJvcnMgYW5kIHVwbG9hZCBhZ2Fpbi5cIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxCdXR0b24gdmFyaWFudD1cIm91dGxpbmVcIiBvbkNsaWNrPXtoYW5kbGVSZXNldH0gc2l6ZT1cInNtXCIgY2xhc3NOYW1lPVwibXQtMlwiPlxuICAgICAgICAgICAgICAgICAgICBVcGxvYWQgTmV3IEZpbGVcbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvSW5saW5lQWxlcnQ+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuXG4gICAgICAgICAgey8qIFN0ZXAgMzogQXBwbGllZCBTdWNjZXNzZnVsbHkgKi99XG4gICAgICAgICAge2N1cnJlbnRTdGVwID09PSBcImFwcGxpZWRcIiAmJiBhcHBseVN1Y2Nlc3MgJiYgKFxuICAgICAgICAgICAgPENhcmQgcGFkZGluZz1cImxnXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgc3BhY2UteS00XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtMTYgdy0xNiByb3VuZGVkLWZ1bGwgYmctc3VjY2Vzcy8xMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICA8Q2hlY2tDaXJjbGUgY2xhc3NOYW1lPVwiaC04IHctOCB0ZXh0LXN1Y2Nlc3NcIiAvPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtc2VtaWJvbGQgdGV4dC1mb3JlZ3JvdW5kIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgUHJpY2luZyBVcGRhdGVzIEFwcGxpZWQgU3VjY2Vzc2Z1bGx5XG4gICAgICAgICAgICAgICAgICA8L2gzPlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LW11dGVkLWZvcmVncm91bmQgbWF4LXctbWQgbXgtYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICBBbGwgcHJpY2UgY2hhbmdlcyBoYXZlIGJlZW4gYXBwbGllZCB0byB5b3VyIFNob3BpZnkgc3RvcmUuIENoYW5nZXMgc2hvdWxkIGJlIHZpc2libGUgb24geW91ciBzdG9yZWZyb250IHNob3J0bHkuXG4gICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgICAgICAgICA8QnV0dG9uIHZhcmlhbnQ9XCJwcmltYXJ5XCIgb25DbGljaz17aGFuZGxlUmVzZXR9PlxuICAgICAgICAgICAgICAgICAgICBVcGxvYWQgQW5vdGhlciBGaWxlXG4gICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L0NhcmQ+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC8+XG4gICAgICApfVxuXG4gICAgICB7LyogQXBwbHkgRGlhbG9nICovfVxuICAgICAgPEFwcGx5UHJpY2luZ0RpYWxvZ1xuICAgICAgICBvcGVuPXtpc0RpYWxvZ09wZW59XG4gICAgICAgIG9uT3BlbkNoYW5nZT17c2V0SXNEaWFsb2dPcGVufVxuICAgICAgICByZWNvcmRzPXttb2RpZmllZFJlY29yZHN9XG4gICAgICAgIG9uQXBwbHk9e2hhbmRsZUFwcGx5UHJpY2luZ31cbiAgICAgICAgaGFzRXJyb3JzPXshIWhhc0Vycm9yc31cbiAgICAgIC8+XG4gICAgPC9kaXY+XG4gICk7XG59XG4iXSwiZmlsZSI6IkM6L1Byb2plY3RzL1NvdXJjZSA0IEluZHVzdHJpZXMvc3JjL3BhZ2VzL21hcmtldGluZy9wcmljaW5nLXVwZGF0ZS9wYWdlLnRzeCJ9