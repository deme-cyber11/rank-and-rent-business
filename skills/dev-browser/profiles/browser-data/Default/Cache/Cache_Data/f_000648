import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/components/ui/multi-select.tsx");import __vite__cjsImport0_react_jsxDevRuntime from "/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=9303f522"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
import * as RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
let prevRefreshReg;
let prevRefreshSig;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  prevRefreshReg = window.$RefreshReg$;
  prevRefreshSig = window.$RefreshSig$;
  window.$RefreshReg$ = RefreshRuntime.getRefreshReg("C:/Projects/Source 4 Industries/src/components/ui/multi-select.tsx");
  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;
}
"use client";
var _s = $RefreshSig$();
import __vite__cjsImport3_react from "/node_modules/.vite/deps/react.js?v=9303f522"; const useState = __vite__cjsImport3_react["useState"]; const useRef = __vite__cjsImport3_react["useRef"]; const useEffect = __vite__cjsImport3_react["useEffect"]; const useMemo = __vite__cjsImport3_react["useMemo"];
import { cn } from "/src/lib/utils.ts";
export function MultiSelect({
  options,
  selected,
  onChange,
  placeholder = "Select...",
  className,
  searchable = false
}) {
  _s();
  const [isOpen, setIsOpen] = useState(false);
  const [search, setSearch] = useState("");
  const containerRef = useRef(null);
  const searchInputRef = useRef(null);
  useEffect(() => {
    const handleClickOutside = (event) => {
      if (containerRef.current && !containerRef.current.contains(event.target)) {
        setIsOpen(false);
        setSearch("");
      }
    };
    document.addEventListener("mousedown", handleClickOutside);
    return () => document.removeEventListener("mousedown", handleClickOutside);
  }, []);
  useEffect(() => {
    if (isOpen && searchable && searchInputRef.current) {
      searchInputRef.current.focus();
    }
  }, [isOpen, searchable]);
  const filteredOptions = useMemo(() => {
    if (!search) return options;
    const lowerSearch = search.toLowerCase();
    return options.filter((option) => option.toLowerCase().includes(lowerSearch));
  }, [options, search]);
  const toggleOption = (option) => {
    if (selected.includes(option)) {
      onChange(selected.filter((item) => item !== option));
    } else {
      onChange([...selected, option]);
    }
  };
  const selectAll = () => {
    onChange([...filteredOptions]);
  };
  const clearAll = () => {
    onChange([]);
  };
  const displayValue = selected.length === 0 ? placeholder : selected.length === options.length ? "All" : selected.length === 1 ? selected[0] : `${selected.length} selected`;
  return /* @__PURE__ */ jsxDEV("div", { ref: containerRef, className: cn("relative", className), children: [
    /* @__PURE__ */ jsxDEV(
      "button",
      {
        type: "button",
        onClick: () => setIsOpen(!isOpen),
        className: "h-9 w-full rounded-md border border-border bg-card px-3 text-sm shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary flex items-center justify-between gap-2",
        children: [
          /* @__PURE__ */ jsxDEV("span", { className: "truncate", children: displayValue }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/components/ui/multi-select.tsx",
            lineNumber: 102,
            columnNumber: 9
          }, this),
          /* @__PURE__ */ jsxDEV(
            "svg",
            {
              className: cn("h-4 w-4 shrink-0 transition-transform", isOpen && "rotate-180"),
              fill: "none",
              stroke: "currentColor",
              viewBox: "0 0 24 24",
              children: /* @__PURE__ */ jsxDEV("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M19 9l-7 7-7-7" }, void 0, false, {
                fileName: "C:/Projects/Source 4 Industries/src/components/ui/multi-select.tsx",
                lineNumber: 109,
                columnNumber: 11
              }, this)
            },
            void 0,
            false,
            {
              fileName: "C:/Projects/Source 4 Industries/src/components/ui/multi-select.tsx",
              lineNumber: 103,
              columnNumber: 9
            },
            this
          )
        ]
      },
      void 0,
      true,
      {
        fileName: "C:/Projects/Source 4 Industries/src/components/ui/multi-select.tsx",
        lineNumber: 97,
        columnNumber: 7
      },
      this
    ),
    isOpen && /* @__PURE__ */ jsxDEV("div", { className: "absolute top-full right-0 z-50 mt-1 w-[240px] rounded-md border border-border bg-card shadow-lg", children: [
      searchable && /* @__PURE__ */ jsxDEV("div", { className: "border-b border-border px-2 py-2", children: /* @__PURE__ */ jsxDEV(
        "input",
        {
          ref: searchInputRef,
          type: "text",
          value: search,
          onChange: (e) => setSearch(e.target.value),
          placeholder: "Search...",
          className: "w-full h-8 rounded-md border border-border bg-background px-2 text-sm focus:outline-none focus:ring-1 focus:ring-primary"
        },
        void 0,
        false,
        {
          fileName: "C:/Projects/Source 4 Industries/src/components/ui/multi-select.tsx",
          lineNumber: 116,
          columnNumber: 15
        },
        this
      ) }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/ui/multi-select.tsx",
        lineNumber: 115,
        columnNumber: 9
      }, this),
      /* @__PURE__ */ jsxDEV("div", { className: "flex gap-2 border-b border-border px-3 py-2", children: [
        /* @__PURE__ */ jsxDEV(
          "button",
          {
            type: "button",
            onClick: selectAll,
            className: "text-xs text-primary hover:underline",
            children: "Select All"
          },
          void 0,
          false,
          {
            fileName: "C:/Projects/Source 4 Industries/src/components/ui/multi-select.tsx",
            lineNumber: 127,
            columnNumber: 13
          },
          this
        ),
        /* @__PURE__ */ jsxDEV(
          "button",
          {
            type: "button",
            onClick: clearAll,
            className: "text-xs text-muted-foreground hover:underline",
            children: "Clear"
          },
          void 0,
          false,
          {
            fileName: "C:/Projects/Source 4 Industries/src/components/ui/multi-select.tsx",
            lineNumber: 134,
            columnNumber: 13
          },
          this
        )
      ] }, void 0, true, {
        fileName: "C:/Projects/Source 4 Industries/src/components/ui/multi-select.tsx",
        lineNumber: 126,
        columnNumber: 11
      }, this),
      /* @__PURE__ */ jsxDEV("div", { className: "max-h-[250px] overflow-y-auto py-1", children: filteredOptions.length === 0 ? /* @__PURE__ */ jsxDEV("div", { className: "px-3 py-2 text-sm text-muted-foreground", children: "No results found" }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/ui/multi-select.tsx",
        lineNumber: 144,
        columnNumber: 11
      }, this) : filteredOptions.map(
        (option) => /* @__PURE__ */ jsxDEV(
          "label",
          {
            className: "flex cursor-pointer items-center gap-2 px-3 py-1.5 hover:bg-muted/50",
            title: option,
            children: [
              /* @__PURE__ */ jsxDEV(
                "input",
                {
                  type: "checkbox",
                  checked: selected.includes(option),
                  onChange: () => toggleOption(option),
                  className: "h-4 w-4 rounded border-border text-primary focus:ring-primary"
                },
                void 0,
                false,
                {
                  fileName: "C:/Projects/Source 4 Industries/src/components/ui/multi-select.tsx",
                  lineNumber: 152,
                  columnNumber: 19
                },
                this
              ),
              /* @__PURE__ */ jsxDEV("span", { className: "text-sm truncate", children: option }, void 0, false, {
                fileName: "C:/Projects/Source 4 Industries/src/components/ui/multi-select.tsx",
                lineNumber: 158,
                columnNumber: 19
              }, this)
            ]
          },
          option,
          true,
          {
            fileName: "C:/Projects/Source 4 Industries/src/components/ui/multi-select.tsx",
            lineNumber: 147,
            columnNumber: 11
          },
          this
        )
      ) }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/ui/multi-select.tsx",
        lineNumber: 142,
        columnNumber: 11
      }, this)
    ] }, void 0, true, {
      fileName: "C:/Projects/Source 4 Industries/src/components/ui/multi-select.tsx",
      lineNumber: 113,
      columnNumber: 7
    }, this)
  ] }, void 0, true, {
    fileName: "C:/Projects/Source 4 Industries/src/components/ui/multi-select.tsx",
    lineNumber: 96,
    columnNumber: 5
  }, this);
}
_s(MultiSelect, "Wo2A1kdMdEh89yHb4S5+CjT277k=");
_c = MultiSelect;
var _c;
$RefreshReg$(_c, "MultiSelect");
if (import.meta.hot && !inWebWorker) {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}
if (import.meta.hot && !inWebWorker) {
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("C:/Projects/Source 4 Industries/src/components/ui/multi-select.tsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("C:/Projects/Source 4 Industries/src/components/ui/multi-select.tsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}

//# sourceMappingURL=data:application/json;base64,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QUMsU0FBSSxXQUFVLDJDQUEwQyxnQ0FBekQ7QUFBQTtBQUFBO0FBQUE7QUFBQSxhQUF5RSxJQUV6RVgsZ0JBQWdCYztBQUFBQSxRQUFJLENBQUNWLFdBQ25CO0FBQUEsVUFBQztBQUFBO0FBQUEsWUFFQyxXQUFVO0FBQUEsWUFDVixPQUFPQTtBQUFBQSxZQUVQO0FBQUE7QUFBQSxnQkFBQztBQUFBO0FBQUEsa0JBQ0MsTUFBSztBQUFBLGtCQUNMLFNBQVN4QixTQUFTeUIsU0FBU0QsTUFBTTtBQUFBLGtCQUNqQyxVQUFVLE1BQU1FLGFBQWFGLE1BQU07QUFBQSxrQkFDbkMsV0FBVTtBQUFBO0FBQUEsZ0JBSlo7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLGNBSTJFO0FBQUEsY0FFM0UsdUJBQUMsVUFBSyxXQUFVLG9CQUFvQkEsb0JBQXBDO0FBQUE7QUFBQTtBQUFBO0FBQUEscUJBQTJDO0FBQUE7QUFBQTtBQUFBLFVBVnRDQTtBQUFBQSxVQURQO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsUUFZQTtBQUFBLE1BQ0QsS0FsQkw7QUFBQTtBQUFBO0FBQUE7QUFBQSxhQW9CQTtBQUFBLFNBakRGO0FBQUE7QUFBQTtBQUFBO0FBQUEsV0FrREE7QUFBQSxPQW5FSjtBQUFBO0FBQUE7QUFBQTtBQUFBLFNBcUVBO0FBRUo7QUFBQ2pDLEdBckllTyxhQUFXO0FBQUFxQyxLQUFYckM7QUFBVyxJQUFBcUM7QUFBQUMsYUFBQUQsSUFBQSIsIm5hbWVzIjpbIl9zIiwiJFJlZnJlc2hTaWckIiwidXNlU3RhdGUiLCJ1c2VSZWYiLCJ1c2VFZmZlY3QiLCJ1c2VNZW1vIiwiY24iLCJNdWx0aVNlbGVjdCIsIm9wdGlvbnMiLCJzZWxlY3RlZCIsIm9uQ2hhbmdlIiwicGxhY2Vob2xkZXIiLCJjbGFzc05hbWUiLCJzZWFyY2hhYmxlIiwiaXNPcGVuIiwic2V0SXNPcGVuIiwic2VhcmNoIiwic2V0U2VhcmNoIiwiY29udGFpbmVyUmVmIiwic2VhcmNoSW5wdXRSZWYiLCJoYW5kbGVDbGlja091dHNpZGUiLCJldmVudCIsImN1cnJlbnQiLCJjb250YWlucyIsInRhcmdldCIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJmb2N1cyIsImZpbHRlcmVkT3B0aW9ucyIsImxvd2VyU2VhcmNoIiwidG9Mb3dlckNhc2UiLCJmaWx0ZXIiLCJvcHRpb24iLCJpbmNsdWRlcyIsInRvZ2dsZU9wdGlvbiIsIml0ZW0iLCJzZWxlY3RBbGwiLCJjbGVhckFsbCIsImRpc3BsYXlWYWx1ZSIsImxlbmd0aCIsImUiLCJ2YWx1ZSIsIm1hcCIsIl9jIiwiJFJlZnJlc2hSZWckIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VzIjpbIm11bHRpLXNlbGVjdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XHJcblxyXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlUmVmLCB1c2VFZmZlY3QsIHVzZU1lbW8gfSBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHsgY24gfSBmcm9tIFwiQC9saWIvdXRpbHNcIjtcclxuXHJcbnR5cGUgTXVsdGlTZWxlY3RQcm9wcyA9IHtcclxuICBvcHRpb25zOiBzdHJpbmdbXTtcclxuICBzZWxlY3RlZDogc3RyaW5nW107XHJcbiAgb25DaGFuZ2U6IChzZWxlY3RlZDogc3RyaW5nW10pID0+IHZvaWQ7XHJcbiAgcGxhY2Vob2xkZXI/OiBzdHJpbmc7XHJcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xyXG4gIHNlYXJjaGFibGU/OiBib29sZWFuO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIE11bHRpU2VsZWN0KHtcclxuICBvcHRpb25zLFxyXG4gIHNlbGVjdGVkLFxyXG4gIG9uQ2hhbmdlLFxyXG4gIHBsYWNlaG9sZGVyID0gXCJTZWxlY3QuLi5cIixcclxuICBjbGFzc05hbWUsXHJcbiAgc2VhcmNoYWJsZSA9IGZhbHNlLFxyXG59OiBNdWx0aVNlbGVjdFByb3BzKSB7XHJcbiAgY29uc3QgW2lzT3Blbiwgc2V0SXNPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBbc2VhcmNoLCBzZXRTZWFyY2hdID0gdXNlU3RhdGUoXCJcIik7XHJcbiAgY29uc3QgY29udGFpbmVyUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcclxuICBjb25zdCBzZWFyY2hJbnB1dFJlZiA9IHVzZVJlZjxIVE1MSW5wdXRFbGVtZW50PihudWxsKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IGhhbmRsZUNsaWNrT3V0c2lkZSA9IChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICBpZiAoY29udGFpbmVyUmVmLmN1cnJlbnQgJiYgIWNvbnRhaW5lclJlZi5jdXJyZW50LmNvbnRhaW5zKGV2ZW50LnRhcmdldCBhcyBOb2RlKSkge1xyXG4gICAgICAgIHNldElzT3BlbihmYWxzZSk7XHJcbiAgICAgICAgc2V0U2VhcmNoKFwiXCIpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgaGFuZGxlQ2xpY2tPdXRzaWRlKTtcclxuICAgIHJldHVybiAoKSA9PiBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGhhbmRsZUNsaWNrT3V0c2lkZSk7XHJcbiAgfSwgW10pO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKGlzT3BlbiAmJiBzZWFyY2hhYmxlICYmIHNlYXJjaElucHV0UmVmLmN1cnJlbnQpIHtcclxuICAgICAgc2VhcmNoSW5wdXRSZWYuY3VycmVudC5mb2N1cygpO1xyXG4gICAgfVxyXG4gIH0sIFtpc09wZW4sIHNlYXJjaGFibGVdKTtcclxuXHJcbiAgY29uc3QgZmlsdGVyZWRPcHRpb25zID0gdXNlTWVtbygoKSA9PiB7XHJcbiAgICBpZiAoIXNlYXJjaCkgcmV0dXJuIG9wdGlvbnM7XHJcbiAgICBjb25zdCBsb3dlclNlYXJjaCA9IHNlYXJjaC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgcmV0dXJuIG9wdGlvbnMuZmlsdGVyKChvcHRpb24pID0+IG9wdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyU2VhcmNoKSk7XHJcbiAgfSwgW29wdGlvbnMsIHNlYXJjaF0pO1xyXG5cclxuICBjb25zdCB0b2dnbGVPcHRpb24gPSAob3B0aW9uOiBzdHJpbmcpID0+IHtcclxuICAgIGlmIChzZWxlY3RlZC5pbmNsdWRlcyhvcHRpb24pKSB7XHJcbiAgICAgIG9uQ2hhbmdlKHNlbGVjdGVkLmZpbHRlcigoaXRlbSkgPT4gaXRlbSAhPT0gb3B0aW9uKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBvbkNoYW5nZShbLi4uc2VsZWN0ZWQsIG9wdGlvbl0pO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHNlbGVjdEFsbCA9ICgpID0+IHtcclxuICAgIG9uQ2hhbmdlKFsuLi5maWx0ZXJlZE9wdGlvbnNdKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBjbGVhckFsbCA9ICgpID0+IHtcclxuICAgIG9uQ2hhbmdlKFtdKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBkaXNwbGF5VmFsdWUgPSBzZWxlY3RlZC5sZW5ndGggPT09IDBcclxuICAgID8gcGxhY2Vob2xkZXJcclxuICAgIDogc2VsZWN0ZWQubGVuZ3RoID09PSBvcHRpb25zLmxlbmd0aFxyXG4gICAgPyBcIkFsbFwiXHJcbiAgICA6IHNlbGVjdGVkLmxlbmd0aCA9PT0gMVxyXG4gICAgPyBzZWxlY3RlZFswXVxyXG4gICAgOiBgJHtzZWxlY3RlZC5sZW5ndGh9IHNlbGVjdGVkYDtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgcmVmPXtjb250YWluZXJSZWZ9IGNsYXNzTmFtZT17Y24oXCJyZWxhdGl2ZVwiLCBjbGFzc05hbWUpfT5cclxuICAgICAgPGJ1dHRvblxyXG4gICAgICAgIHR5cGU9XCJidXR0b25cIlxyXG4gICAgICAgIG9uQ2xpY2s9eygpID0+IHNldElzT3BlbighaXNPcGVuKX1cclxuICAgICAgICBjbGFzc05hbWU9XCJoLTkgdy1mdWxsIHJvdW5kZWQtbWQgYm9yZGVyIGJvcmRlci1ib3JkZXIgYmctY2FyZCBweC0zIHRleHQtc20gc2hhZG93LXNtIGZvY3VzLXZpc2libGU6b3V0bGluZS1ub25lIGZvY3VzLXZpc2libGU6cmluZy0yIGZvY3VzLXZpc2libGU6cmluZy1wcmltYXJ5IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBnYXAtMlwiXHJcbiAgICAgID5cclxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0cnVuY2F0ZVwiPntkaXNwbGF5VmFsdWV9PC9zcGFuPlxyXG4gICAgICAgIDxzdmdcclxuICAgICAgICAgIGNsYXNzTmFtZT17Y24oXCJoLTQgdy00IHNocmluay0wIHRyYW5zaXRpb24tdHJhbnNmb3JtXCIsIGlzT3BlbiAmJiBcInJvdGF0ZS0xODBcIil9XHJcbiAgICAgICAgICBmaWxsPVwibm9uZVwiXHJcbiAgICAgICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIlxyXG4gICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiXHJcbiAgICAgICAgPlxyXG4gICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPVwiTTE5IDlsLTcgNy03LTdcIiAvPlxyXG4gICAgICAgIDwvc3ZnPlxyXG4gICAgICA8L2J1dHRvbj5cclxuICAgICAge2lzT3BlbiAmJiAoXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtZnVsbCByaWdodC0wIHotNTAgbXQtMSB3LVsyNDBweF0gcm91bmRlZC1tZCBib3JkZXIgYm9yZGVyLWJvcmRlciBiZy1jYXJkIHNoYWRvdy1sZ1wiPlxyXG4gICAgICAgICAge3NlYXJjaGFibGUgJiYgKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJvcmRlci1iIGJvcmRlci1ib3JkZXIgcHgtMiBweS0yXCI+XHJcbiAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICByZWY9e3NlYXJjaElucHV0UmVmfVxyXG4gICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgICAgdmFsdWU9e3NlYXJjaH1cclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0U2VhcmNoKGUudGFyZ2V0LnZhbHVlKX1cclxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiU2VhcmNoLi4uXCJcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLTggcm91bmRlZC1tZCBib3JkZXIgYm9yZGVyLWJvcmRlciBiZy1iYWNrZ3JvdW5kIHB4LTIgdGV4dC1zbSBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0xIGZvY3VzOnJpbmctcHJpbWFyeVwiXHJcbiAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICApfVxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGdhcC0yIGJvcmRlci1iIGJvcmRlci1ib3JkZXIgcHgtMyBweS0yXCI+XHJcbiAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcclxuICAgICAgICAgICAgICBvbkNsaWNrPXtzZWxlY3RBbGx9XHJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXByaW1hcnkgaG92ZXI6dW5kZXJsaW5lXCJcclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgIFNlbGVjdCBBbGxcclxuICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcclxuICAgICAgICAgICAgICBvbkNsaWNrPXtjbGVhckFsbH1cclxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtbXV0ZWQtZm9yZWdyb3VuZCBob3Zlcjp1bmRlcmxpbmVcIlxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgQ2xlYXJcclxuICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LWgtWzI1MHB4XSBvdmVyZmxvdy15LWF1dG8gcHktMVwiPlxyXG4gICAgICAgICAgICB7ZmlsdGVyZWRPcHRpb25zLmxlbmd0aCA9PT0gMCA/IChcclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB4LTMgcHktMiB0ZXh0LXNtIHRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiPk5vIHJlc3VsdHMgZm91bmQ8L2Rpdj5cclxuICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICBmaWx0ZXJlZE9wdGlvbnMubWFwKChvcHRpb24pID0+IChcclxuICAgICAgICAgICAgICAgIDxsYWJlbFxyXG4gICAgICAgICAgICAgICAgICBrZXk9e29wdGlvbn1cclxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleCBjdXJzb3ItcG9pbnRlciBpdGVtcy1jZW50ZXIgZ2FwLTIgcHgtMyBweS0xLjUgaG92ZXI6YmctbXV0ZWQvNTBcIlxyXG4gICAgICAgICAgICAgICAgICB0aXRsZT17b3B0aW9ufVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIlxyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3NlbGVjdGVkLmluY2x1ZGVzKG9wdGlvbil9XHJcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eygpID0+IHRvZ2dsZU9wdGlvbihvcHRpb24pfVxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImgtNCB3LTQgcm91bmRlZCBib3JkZXItYm9yZGVyIHRleHQtcHJpbWFyeSBmb2N1czpyaW5nLXByaW1hcnlcIlxyXG4gICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRydW5jYXRlXCI+e29wdGlvbn08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICkpXHJcbiAgICAgICAgICAgICl9XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgKX1cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn1cclxuIl0sImZpbGUiOiJDOi9Qcm9qZWN0cy9Tb3VyY2UgNCBJbmR1c3RyaWVzL3NyYy9jb21wb25lbnRzL3VpL211bHRpLXNlbGVjdC50c3gifQ==