import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/components/pricing/price-calculator.tsx");import __vite__cjsImport0_react_jsxDevRuntime from "/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=9303f522"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
import * as RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
let prevRefreshReg;
let prevRefreshSig;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  prevRefreshReg = window.$RefreshReg$;
  prevRefreshSig = window.$RefreshSig$;
  window.$RefreshReg$ = RefreshRuntime.getRefreshReg("C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx");
  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;
}
"use client";
var _s = $RefreshSig$();
import __vite__cjsImport3_react from "/node_modules/.vite/deps/react.js?v=9303f522"; const useState = __vite__cjsImport3_react["useState"]; const useMemo = __vite__cjsImport3_react["useMemo"];
import { TrendingUp, TrendingDown, RotateCcw, Calculator } from "/node_modules/.vite/deps/lucide-react.js?v=9303f522";
import { Card, CardHeader, CardTitle, CardDescription } from "/src/components/ui/card.tsx";
import { Button } from "/src/components/ui/button.tsx";
import { Input } from "/src/components/ui/input.tsx";
import { Badge } from "/src/components/ui/badge.tsx";
import { Tabs, TabsList, TabsTrigger, TabsContent } from "/src/components/ui/tabs.tsx";
import { cn } from "/src/lib/utils.ts";
export function PriceCalculator({
  records,
  onRecordsChange,
  disabled = false
}) {
  _s();
  const [mode, setMode] = useState("markup");
  const [percentValue, setPercentValue] = useState("");
  const [originalRecords, setOriginalRecords] = useState(null);
  const preview = useMemo(() => {
    const percent = parseFloat(percentValue);
    if (isNaN(percent) || percent <= 0 || records.length === 0) {
      return null;
    }
    const multiplier = mode === "markup" ? 1 + percent / 100 : 1 - percent / 100;
    let totalCurrentValue = 0;
    let totalNewValue = 0;
    records.forEach((record) => {
      const calculatedPrice = Math.round(record.currentPrice * multiplier * 100) / 100;
      totalCurrentValue += record.currentPrice;
      totalNewValue += calculatedPrice;
    });
    const totalChange = totalNewValue - totalCurrentValue;
    return {
      affectedCount: records.length,
      multiplier,
      totalCurrentValue,
      totalNewValue,
      totalChange,
      avgChangePercent: percent
    };
  }, [records, percentValue, mode]);
  const hasChanges = originalRecords !== null;
  const handlePercentChange = (e) => {
    const value = e.target.value;
    if (value === "" || /^\d*\.?\d*$/.test(value)) {
      setPercentValue(value);
    }
  };
  const handleApply = () => {
    const percent = parseFloat(percentValue);
    if (isNaN(percent) || percent <= 0 || records.length === 0) {
      return;
    }
    if (!originalRecords) {
      setOriginalRecords([...records]);
    }
    const multiplier = mode === "markup" ? 1 + percent / 100 : 1 - percent / 100;
    const updatedRecords = records.map((record) => {
      const newPrice = Math.round(record.currentPrice * multiplier * 100) / 100;
      const priceChange = newPrice - record.currentPrice;
      const priceChangePercent = record.currentPrice > 0 ? priceChange / record.currentPrice : 0;
      return {
        ...record,
        newPrice,
        priceChange,
        priceChangePercent
      };
    });
    onRecordsChange(updatedRecords);
  };
  const handleReset = () => {
    if (originalRecords) {
      onRecordsChange(originalRecords);
      setOriginalRecords(null);
      setPercentValue("");
    }
  };
  const formatCurrency = (value) => {
    return new Intl.NumberFormat("en-US", {
      style: "currency",
      currency: "USD",
      minimumFractionDigits: 2,
      maximumFractionDigits: 2
    }).format(value);
  };
  const isApplyDisabled = disabled || !preview || records.length === 0;
  return /* @__PURE__ */ jsxDEV(Card, { padding: "md", children: [
    /* @__PURE__ */ jsxDEV(CardHeader, { className: "mb-0", children: [
      /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsxDEV(Calculator, { className: "h-5 w-5 text-primary" }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
          lineNumber: 149,
          columnNumber: 11
        }, this),
        /* @__PURE__ */ jsxDEV(CardTitle, { children: "Price Calculator" }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
          lineNumber: 150,
          columnNumber: 11
        }, this)
      ] }, void 0, true, {
        fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
        lineNumber: 148,
        columnNumber: 9
      }, this),
      /* @__PURE__ */ jsxDEV(CardDescription, { children: "Apply markup or discount to all products" }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
        lineNumber: 152,
        columnNumber: 9
      }, this)
    ] }, void 0, true, {
      fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
      lineNumber: 147,
      columnNumber: 7
    }, this),
    /* @__PURE__ */ jsxDEV("div", { className: "space-y-4 mt-4", children: [
      /* @__PURE__ */ jsxDEV(Tabs, { value: mode, onValueChange: (v) => setMode(v), children: [
        /* @__PURE__ */ jsxDEV(TabsList, { className: "w-full grid grid-cols-2", children: [
          /* @__PURE__ */ jsxDEV(TabsTrigger, { value: "markup", disabled, children: [
            /* @__PURE__ */ jsxDEV(TrendingUp, { className: "h-4 w-4 mr-1.5" }, void 0, false, {
              fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
              lineNumber: 162,
              columnNumber: 15
            }, this),
            "Markup"
          ] }, void 0, true, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
            lineNumber: 161,
            columnNumber: 13
          }, this),
          /* @__PURE__ */ jsxDEV(TabsTrigger, { value: "discount", disabled, children: [
            /* @__PURE__ */ jsxDEV(TrendingDown, { className: "h-4 w-4 mr-1.5" }, void 0, false, {
              fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
              lineNumber: 166,
              columnNumber: 15
            }, this),
            "Discount"
          ] }, void 0, true, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
            lineNumber: 165,
            columnNumber: 13
          }, this)
        ] }, void 0, true, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
          lineNumber: 160,
          columnNumber: 11
        }, this),
        /* @__PURE__ */ jsxDEV(TabsContent, { value: "markup", className: "mt-4", children: /* @__PURE__ */ jsxDEV("div", { className: "space-y-3", children: [
          /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-2", children: /* @__PURE__ */ jsxDEV("div", { className: "relative flex-1", children: [
            /* @__PURE__ */ jsxDEV(
              Input,
              {
                type: "text",
                inputMode: "decimal",
                placeholder: "Enter markup percentage",
                value: percentValue,
                onChange: handlePercentChange,
                disabled,
                className: "pr-8"
              },
              void 0,
              false,
              {
                fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
                lineNumber: 175,
                columnNumber: 19
              },
              this
            ),
            /* @__PURE__ */ jsxDEV("span", { className: "absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground text-sm", children: "%" }, void 0, false, {
              fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
              lineNumber: 184,
              columnNumber: 19
            }, this)
          ] }, void 0, true, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
            lineNumber: 174,
            columnNumber: 17
          }, this) }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
            lineNumber: 173,
            columnNumber: 15
          }, this),
          /* @__PURE__ */ jsxDEV("p", { className: "text-xs text-muted-foreground", children: "Increases prices by the specified percentage (e.g., 10% markup: $100 becomes $110)" }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
            lineNumber: 189,
            columnNumber: 15
          }, this)
        ] }, void 0, true, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
          lineNumber: 172,
          columnNumber: 13
        }, this) }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
          lineNumber: 171,
          columnNumber: 11
        }, this),
        /* @__PURE__ */ jsxDEV(TabsContent, { value: "discount", className: "mt-4", children: /* @__PURE__ */ jsxDEV("div", { className: "space-y-3", children: [
          /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-2", children: /* @__PURE__ */ jsxDEV("div", { className: "relative flex-1", children: [
            /* @__PURE__ */ jsxDEV(
              Input,
              {
                type: "text",
                inputMode: "decimal",
                placeholder: "Enter discount percentage",
                value: percentValue,
                onChange: handlePercentChange,
                disabled,
                className: "pr-8"
              },
              void 0,
              false,
              {
                fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
                lineNumber: 199,
                columnNumber: 19
              },
              this
            ),
            /* @__PURE__ */ jsxDEV("span", { className: "absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground text-sm", children: "%" }, void 0, false, {
              fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
              lineNumber: 208,
              columnNumber: 19
            }, this)
          ] }, void 0, true, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
            lineNumber: 198,
            columnNumber: 17
          }, this) }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
            lineNumber: 197,
            columnNumber: 15
          }, this),
          /* @__PURE__ */ jsxDEV("p", { className: "text-xs text-muted-foreground", children: "Decreases prices by the specified percentage (e.g., 15% discount: $100 becomes $85)" }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
            lineNumber: 213,
            columnNumber: 15
          }, this)
        ] }, void 0, true, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
          lineNumber: 196,
          columnNumber: 13
        }, this) }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
          lineNumber: 195,
          columnNumber: 11
        }, this)
      ] }, void 0, true, {
        fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
        lineNumber: 159,
        columnNumber: 9
      }, this),
      preview && /* @__PURE__ */ jsxDEV("div", { className: "rounded-lg bg-muted/50 p-4 space-y-3", children: [
        /* @__PURE__ */ jsxDEV("div", { className: "flex items-center justify-between", children: [
          /* @__PURE__ */ jsxDEV("span", { className: "text-sm font-medium", children: "Preview" }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
            lineNumber: 224,
            columnNumber: 15
          }, this),
          /* @__PURE__ */ jsxDEV(Badge, { variant: mode === "markup" ? "success" : "warning", children: [
            mode === "markup" ? "+" : "-",
            preview.avgChangePercent,
            "%"
          ] }, void 0, true, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
            lineNumber: 225,
            columnNumber: 15
          }, this)
        ] }, void 0, true, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
          lineNumber: 223,
          columnNumber: 13
        }, this),
        /* @__PURE__ */ jsxDEV("div", { className: "grid grid-cols-2 gap-4 text-sm", children: [
          /* @__PURE__ */ jsxDEV("div", { children: [
            /* @__PURE__ */ jsxDEV("div", { className: "text-muted-foreground text-xs uppercase tracking-wide mb-1", children: "Products Affected" }, void 0, false, {
              fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
              lineNumber: 232,
              columnNumber: 17
            }, this),
            /* @__PURE__ */ jsxDEV("div", { className: "font-semibold", children: preview.affectedCount }, void 0, false, {
              fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
              lineNumber: 235,
              columnNumber: 17
            }, this)
          ] }, void 0, true, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
            lineNumber: 231,
            columnNumber: 15
          }, this),
          /* @__PURE__ */ jsxDEV("div", { children: [
            /* @__PURE__ */ jsxDEV("div", { className: "text-muted-foreground text-xs uppercase tracking-wide mb-1", children: "Total Change" }, void 0, false, {
              fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
              lineNumber: 238,
              columnNumber: 17
            }, this),
            /* @__PURE__ */ jsxDEV("div", { className: cn(
              "font-semibold",
              preview.totalChange > 0 ? "text-success" : "text-danger"
            ), children: [
              preview.totalChange > 0 ? "+" : "",
              formatCurrency(preview.totalChange)
            ] }, void 0, true, {
              fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
              lineNumber: 241,
              columnNumber: 17
            }, this)
          ] }, void 0, true, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
            lineNumber: 237,
            columnNumber: 15
          }, this)
        ] }, void 0, true, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
          lineNumber: 230,
          columnNumber: 13
        }, this),
        /* @__PURE__ */ jsxDEV("div", { className: "pt-2 border-t border-border", children: /* @__PURE__ */ jsxDEV("p", { className: "text-sm text-muted-foreground", children: [
          "Apply ",
          /* @__PURE__ */ jsxDEV("span", { className: "font-medium text-foreground", children: [
            preview.avgChangePercent,
            "% ",
            mode
          ] }, void 0, true, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
            lineNumber: 252,
            columnNumber: 23
          }, this),
          " to",
          " ",
          /* @__PURE__ */ jsxDEV("span", { className: "font-medium text-foreground", children: [
            preview.affectedCount,
            " products"
          ] }, void 0, true, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
            lineNumber: 253,
            columnNumber: 17
          }, this)
        ] }, void 0, true, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
          lineNumber: 251,
          columnNumber: 15
        }, this) }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
          lineNumber: 250,
          columnNumber: 13
        }, this)
      ] }, void 0, true, {
        fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
        lineNumber: 222,
        columnNumber: 9
      }, this),
      /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-3 pt-2", children: [
        /* @__PURE__ */ jsxDEV(
          Button,
          {
            variant: "primary",
            onClick: handleApply,
            disabled: isApplyDisabled,
            className: "flex-1",
            children: [
              /* @__PURE__ */ jsxDEV(Calculator, { className: "h-4 w-4" }, void 0, false, {
                fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
                lineNumber: 267,
                columnNumber: 13
              }, this),
              "Apply to All"
            ]
          },
          void 0,
          true,
          {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
            lineNumber: 261,
            columnNumber: 11
          },
          this
        ),
        hasChanges && /* @__PURE__ */ jsxDEV(
          Button,
          {
            variant: "outline",
            onClick: handleReset,
            disabled,
            children: [
              /* @__PURE__ */ jsxDEV(RotateCcw, { className: "h-4 w-4" }, void 0, false, {
                fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
                lineNumber: 277,
                columnNumber: 15
              }, this),
              "Reset"
            ]
          },
          void 0,
          true,
          {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
            lineNumber: 272,
            columnNumber: 11
          },
          this
        )
      ] }, void 0, true, {
        fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
        lineNumber: 260,
        columnNumber: 9
      }, this),
      hasChanges && /* @__PURE__ */ jsxDEV("div", { className: "flex items-center justify-center", children: /* @__PURE__ */ jsxDEV(Badge, { variant: "secondary", children: "Calculated prices applied - click Reset to revert" }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
        lineNumber: 286,
        columnNumber: 13
      }, this) }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
        lineNumber: 285,
        columnNumber: 9
      }, this),
      records.length === 0 && /* @__PURE__ */ jsxDEV("p", { className: "text-sm text-muted-foreground text-center py-4", children: "Upload pricing data to use the calculator" }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
        lineNumber: 294,
        columnNumber: 9
      }, this)
    ] }, void 0, true, {
      fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
      lineNumber: 157,
      columnNumber: 7
    }, this)
  ] }, void 0, true, {
    fileName: "C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx",
    lineNumber: 146,
    columnNumber: 5
  }, this);
}
_s(PriceCalculator, "zs2+0U5BAO1oWCHMI+ykQC2w/G8=");
_c = PriceCalculator;
var _c;
$RefreshReg$(_c, "PriceCalculator");
if (import.meta.hot && !inWebWorker) {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}
if (import.meta.hot && !inWebWorker) {
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("C:/Projects/Source 4 Industries/src/components/pricing/price-calculator.tsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}

//# sourceMappingURL=data:application/json;base64,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QVE7QUFBQSxZQUNSLFNBQVNRO0FBQUFBLFlBQ1QsVUFBVWU7QUFBQUEsWUFDVixXQUFVO0FBQUEsWUFFVjtBQUFBLHFDQUFDLGNBQVcsV0FBVSxhQUF0QjtBQUFBO0FBQUE7QUFBQTtBQUFBLHFCQUErQjtBQUFBO0FBQUE7QUFBQTtBQUFBLFVBTmpDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxRQVFBO0FBQUEsUUFFQ3JCLGNBQ0M7QUFBQSxVQUFDO0FBQUE7QUFBQSxZQUNDLFNBQVE7QUFBQSxZQUNSLFNBQVNZO0FBQUFBLFlBQ1Q7QUFBQSxZQUVBO0FBQUEscUNBQUMsYUFBVSxXQUFVLGFBQXJCO0FBQUE7QUFBQTtBQUFBO0FBQUEscUJBQThCO0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFMaEM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFFBT0E7QUFBQSxXQW5CSjtBQUFBO0FBQUE7QUFBQTtBQUFBLGFBcUJBO0FBQUEsTUFHQ1osY0FDQyx1QkFBQyxTQUFJLFdBQVUsb0NBQ2IsaUNBQUMsU0FBTSxTQUFRLGFBQVcsaUVBQTFCO0FBQUE7QUFBQTtBQUFBO0FBQUEsYUFFQSxLQUhGO0FBQUE7QUFBQTtBQUFBO0FBQUEsYUFJQTtBQUFBLE1BSUQxQixRQUFRYSxXQUFXLEtBQ2xCLHVCQUFDLE9BQUUsV0FBVSxrREFBZ0QseURBQTdEO0FBQUE7QUFBQTtBQUFBO0FBQUEsYUFFQTtBQUFBLFNBM0lKO0FBQUE7QUFBQTtBQUFBO0FBQUEsV0E2SUE7QUFBQSxPQXhKRjtBQUFBO0FBQUE7QUFBQTtBQUFBLFNBeUpBO0FBRUo7QUFBQ2xDLEdBclFlb0IsaUJBQWU7QUFBQWtELEtBQWZsRDtBQUFlLElBQUFrRDtBQUFBQyxhQUFBRCxJQUFBIiwibmFtZXMiOlsiX3MiLCIkUmVmcmVzaFNpZyQiLCJ1c2VTdGF0ZSIsInVzZU1lbW8iLCJUcmVuZGluZ1VwIiwiVHJlbmRpbmdEb3duIiwiUm90YXRlQ2N3IiwiQ2FsY3VsYXRvciIsIkNhcmQiLCJDYXJkSGVhZGVyIiwiQ2FyZFRpdGxlIiwiQ2FyZERlc2NyaXB0aW9uIiwiQnV0dG9uIiwiSW5wdXQiLCJCYWRnZSIsIlRhYnMiLCJUYWJzTGlzdCIsIlRhYnNUcmlnZ2VyIiwiVGFic0NvbnRlbnQiLCJjbiIsIlByaWNlQ2FsY3VsYXRvciIsInJlY29yZHMiLCJvblJlY29yZHNDaGFuZ2UiLCJkaXNhYmxlZCIsIm1vZGUiLCJzZXRNb2RlIiwicGVyY2VudFZhbHVlIiwic2V0UGVyY2VudFZhbHVlIiwib3JpZ2luYWxSZWNvcmRzIiwic2V0T3JpZ2luYWxSZWNvcmRzIiwicHJldmlldyIsInBlcmNlbnQiLCJwYXJzZUZsb2F0IiwiaXNOYU4iLCJsZW5ndGgiLCJtdWx0aXBsaWVyIiwidG90YWxDdXJyZW50VmFsdWUiLCJ0b3RhbE5ld1ZhbHVlIiwiZm9yRWFjaCIsInJlY29yZCIsImNhbGN1bGF0ZWRQcmljZSIsIk1hdGgiLCJyb3VuZCIsImN1cnJlbnRQcmljZSIsInRvdGFsQ2hhbmdlIiwiYWZmZWN0ZWRDb3VudCIsImF2Z0NoYW5nZVBlcmNlbnQiLCJoYXNDaGFuZ2VzIiwiaGFuZGxlUGVyY2VudENoYW5nZSIsImUiLCJ2YWx1ZSIsInRhcmdldCIsInRlc3QiLCJoYW5kbGVBcHBseSIsInVwZGF0ZWRSZWNvcmRzIiwibWFwIiwibmV3UHJpY2UiLCJwcmljZUNoYW5nZSIsInByaWNlQ2hhbmdlUGVyY2VudCIsImhhbmRsZVJlc2V0IiwiZm9ybWF0Q3VycmVuY3kiLCJJbnRsIiwiTnVtYmVyRm9ybWF0Iiwic3R5bGUiLCJjdXJyZW5jeSIsIm1pbmltdW1GcmFjdGlvbkRpZ2l0cyIsIm1heGltdW1GcmFjdGlvbkRpZ2l0cyIsImZvcm1hdCIsImlzQXBwbHlEaXNhYmxlZCIsInYiLCJfYyIsIiRSZWZyZXNoUmVnJCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJwcmljZS1jYWxjdWxhdG9yLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcblxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZU1lbW8gfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IFRyZW5kaW5nVXAsIFRyZW5kaW5nRG93biwgUm90YXRlQ2N3LCBDYWxjdWxhdG9yIH0gZnJvbSBcImx1Y2lkZS1yZWFjdFwiO1xuaW1wb3J0IHsgQ2FyZCwgQ2FyZEhlYWRlciwgQ2FyZFRpdGxlLCBDYXJkRGVzY3JpcHRpb24gfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2NhcmRcIjtcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvYnV0dG9uXCI7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvaW5wdXRcIjtcbmltcG9ydCB7IEJhZGdlIH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9iYWRnZVwiO1xuaW1wb3J0IHsgVGFicywgVGFic0xpc3QsIFRhYnNUcmlnZ2VyLCBUYWJzQ29udGVudCB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvdGFic1wiO1xuaW1wb3J0IHsgY24gfSBmcm9tIFwiQC9saWIvdXRpbHNcIjtcbmltcG9ydCB7IHR5cGUgUHJpY2VVcGRhdGVSZWNvcmQgfSBmcm9tIFwiQC9saWIvcHJpY2luZy1wcm9jZXNzb3JcIjtcblxudHlwZSBDYWxjdWxhdGlvbk1vZGUgPSBcIm1hcmt1cFwiIHwgXCJkaXNjb3VudFwiO1xuXG5pbnRlcmZhY2UgUHJpY2VDYWxjdWxhdG9yUHJvcHMge1xuICByZWNvcmRzOiBQcmljZVVwZGF0ZVJlY29yZFtdO1xuICBvblJlY29yZHNDaGFuZ2U6ICh1cGRhdGVkUmVjb3JkczogUHJpY2VVcGRhdGVSZWNvcmRbXSkgPT4gdm9pZDtcbiAgZGlzYWJsZWQ/OiBib29sZWFuO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gUHJpY2VDYWxjdWxhdG9yKHtcbiAgcmVjb3JkcyxcbiAgb25SZWNvcmRzQ2hhbmdlLFxuICBkaXNhYmxlZCA9IGZhbHNlLFxufTogUHJpY2VDYWxjdWxhdG9yUHJvcHMpIHtcbiAgY29uc3QgW21vZGUsIHNldE1vZGVdID0gdXNlU3RhdGU8Q2FsY3VsYXRpb25Nb2RlPihcIm1hcmt1cFwiKTtcbiAgY29uc3QgW3BlcmNlbnRWYWx1ZSwgc2V0UGVyY2VudFZhbHVlXSA9IHVzZVN0YXRlPHN0cmluZz4oXCJcIik7XG4gIGNvbnN0IFtvcmlnaW5hbFJlY29yZHMsIHNldE9yaWdpbmFsUmVjb3Jkc10gPSB1c2VTdGF0ZTxQcmljZVVwZGF0ZVJlY29yZFtdIHwgbnVsbD4obnVsbCk7XG5cbiAgLy8gQ2FsY3VsYXRlIHByZXZpZXcgb2YgY2hhbmdlc1xuICBjb25zdCBwcmV2aWV3ID0gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgcGVyY2VudCA9IHBhcnNlRmxvYXQocGVyY2VudFZhbHVlKTtcbiAgICBpZiAoaXNOYU4ocGVyY2VudCkgfHwgcGVyY2VudCA8PSAwIHx8IHJlY29yZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBtdWx0aXBsaWVyID0gbW9kZSA9PT0gXCJtYXJrdXBcIlxuICAgICAgPyAxICsgcGVyY2VudCAvIDEwMFxuICAgICAgOiAxIC0gcGVyY2VudCAvIDEwMDtcblxuICAgIC8vIENhbGN1bGF0ZSB3aGF0IHRoZSBjaGFuZ2VzIHdvdWxkIGxvb2sgbGlrZVxuICAgIGxldCB0b3RhbEN1cnJlbnRWYWx1ZSA9IDA7XG4gICAgbGV0IHRvdGFsTmV3VmFsdWUgPSAwO1xuXG4gICAgcmVjb3Jkcy5mb3JFYWNoKChyZWNvcmQpID0+IHtcbiAgICAgIGNvbnN0IGNhbGN1bGF0ZWRQcmljZSA9IE1hdGgucm91bmQocmVjb3JkLmN1cnJlbnRQcmljZSAqIG11bHRpcGxpZXIgKiAxMDApIC8gMTAwO1xuICAgICAgdG90YWxDdXJyZW50VmFsdWUgKz0gcmVjb3JkLmN1cnJlbnRQcmljZTtcbiAgICAgIHRvdGFsTmV3VmFsdWUgKz0gY2FsY3VsYXRlZFByaWNlO1xuICAgIH0pO1xuXG4gICAgY29uc3QgdG90YWxDaGFuZ2UgPSB0b3RhbE5ld1ZhbHVlIC0gdG90YWxDdXJyZW50VmFsdWU7XG5cbiAgICByZXR1cm4ge1xuICAgICAgYWZmZWN0ZWRDb3VudDogcmVjb3Jkcy5sZW5ndGgsXG4gICAgICBtdWx0aXBsaWVyLFxuICAgICAgdG90YWxDdXJyZW50VmFsdWUsXG4gICAgICB0b3RhbE5ld1ZhbHVlLFxuICAgICAgdG90YWxDaGFuZ2UsXG4gICAgICBhdmdDaGFuZ2VQZXJjZW50OiBwZXJjZW50LFxuICAgIH07XG4gIH0sIFtyZWNvcmRzLCBwZXJjZW50VmFsdWUsIG1vZGVdKTtcblxuICAvLyBDaGVjayBpZiB3ZSBoYXZlIHVuc2F2ZWQgY2hhbmdlcyAob3JpZ2luYWwgcmVjb3JkcyBzdG9yZWQpXG4gIGNvbnN0IGhhc0NoYW5nZXMgPSBvcmlnaW5hbFJlY29yZHMgIT09IG51bGw7XG5cbiAgY29uc3QgaGFuZGxlUGVyY2VudENoYW5nZSA9IChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgIGNvbnN0IHZhbHVlID0gZS50YXJnZXQudmFsdWU7XG4gICAgLy8gQWxsb3cgZW1wdHksIG51bWJlcnMsIGFuZCBkZWNpbWFsc1xuICAgIGlmICh2YWx1ZSA9PT0gXCJcIiB8fCAvXlxcZCpcXC4/XFxkKiQvLnRlc3QodmFsdWUpKSB7XG4gICAgICBzZXRQZXJjZW50VmFsdWUodmFsdWUpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVBcHBseSA9ICgpID0+IHtcbiAgICBjb25zdCBwZXJjZW50ID0gcGFyc2VGbG9hdChwZXJjZW50VmFsdWUpO1xuICAgIGlmIChpc05hTihwZXJjZW50KSB8fCBwZXJjZW50IDw9IDAgfHwgcmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBTdG9yZSBvcmlnaW5hbCByZWNvcmRzIGlmIG5vdCBhbHJlYWR5IHN0b3JlZFxuICAgIGlmICghb3JpZ2luYWxSZWNvcmRzKSB7XG4gICAgICBzZXRPcmlnaW5hbFJlY29yZHMoWy4uLnJlY29yZHNdKTtcbiAgICB9XG5cbiAgICBjb25zdCBtdWx0aXBsaWVyID0gbW9kZSA9PT0gXCJtYXJrdXBcIlxuICAgICAgPyAxICsgcGVyY2VudCAvIDEwMFxuICAgICAgOiAxIC0gcGVyY2VudCAvIDEwMDtcblxuICAgIGNvbnN0IHVwZGF0ZWRSZWNvcmRzID0gcmVjb3Jkcy5tYXAoKHJlY29yZCkgPT4ge1xuICAgICAgY29uc3QgbmV3UHJpY2UgPSBNYXRoLnJvdW5kKHJlY29yZC5jdXJyZW50UHJpY2UgKiBtdWx0aXBsaWVyICogMTAwKSAvIDEwMDtcbiAgICAgIGNvbnN0IHByaWNlQ2hhbmdlID0gbmV3UHJpY2UgLSByZWNvcmQuY3VycmVudFByaWNlO1xuICAgICAgY29uc3QgcHJpY2VDaGFuZ2VQZXJjZW50ID0gcmVjb3JkLmN1cnJlbnRQcmljZSA+IDBcbiAgICAgICAgPyBwcmljZUNoYW5nZSAvIHJlY29yZC5jdXJyZW50UHJpY2VcbiAgICAgICAgOiAwO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5yZWNvcmQsXG4gICAgICAgIG5ld1ByaWNlLFxuICAgICAgICBwcmljZUNoYW5nZSxcbiAgICAgICAgcHJpY2VDaGFuZ2VQZXJjZW50LFxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIG9uUmVjb3Jkc0NoYW5nZSh1cGRhdGVkUmVjb3Jkcyk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlUmVzZXQgPSAoKSA9PiB7XG4gICAgaWYgKG9yaWdpbmFsUmVjb3Jkcykge1xuICAgICAgb25SZWNvcmRzQ2hhbmdlKG9yaWdpbmFsUmVjb3Jkcyk7XG4gICAgICBzZXRPcmlnaW5hbFJlY29yZHMobnVsbCk7XG4gICAgICBzZXRQZXJjZW50VmFsdWUoXCJcIik7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGZvcm1hdEN1cnJlbmN5ID0gKHZhbHVlOiBudW1iZXIpID0+IHtcbiAgICByZXR1cm4gbmV3IEludGwuTnVtYmVyRm9ybWF0KFwiZW4tVVNcIiwge1xuICAgICAgc3R5bGU6IFwiY3VycmVuY3lcIixcbiAgICAgIGN1cnJlbmN5OiBcIlVTRFwiLFxuICAgICAgbWluaW11bUZyYWN0aW9uRGlnaXRzOiAyLFxuICAgICAgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiAyLFxuICAgIH0pLmZvcm1hdCh2YWx1ZSk7XG4gIH07XG5cbiAgY29uc3QgaXNBcHBseURpc2FibGVkID0gZGlzYWJsZWQgfHwgIXByZXZpZXcgfHwgcmVjb3Jkcy5sZW5ndGggPT09IDA7XG5cbiAgcmV0dXJuIChcbiAgICA8Q2FyZCBwYWRkaW5nPVwibWRcIj5cbiAgICAgIDxDYXJkSGVhZGVyIGNsYXNzTmFtZT1cIm1iLTBcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgIDxDYWxjdWxhdG9yIGNsYXNzTmFtZT1cImgtNSB3LTUgdGV4dC1wcmltYXJ5XCIgLz5cbiAgICAgICAgICA8Q2FyZFRpdGxlPlByaWNlIENhbGN1bGF0b3I8L0NhcmRUaXRsZT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxDYXJkRGVzY3JpcHRpb24+XG4gICAgICAgICAgQXBwbHkgbWFya3VwIG9yIGRpc2NvdW50IHRvIGFsbCBwcm9kdWN0c1xuICAgICAgICA8L0NhcmREZXNjcmlwdGlvbj5cbiAgICAgIDwvQ2FyZEhlYWRlcj5cblxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTQgbXQtNFwiPlxuICAgICAgICB7LyogTW9kZSBUYWJzICovfVxuICAgICAgICA8VGFicyB2YWx1ZT17bW9kZX0gb25WYWx1ZUNoYW5nZT17KHYpID0+IHNldE1vZGUodiBhcyBDYWxjdWxhdGlvbk1vZGUpfT5cbiAgICAgICAgICA8VGFic0xpc3QgY2xhc3NOYW1lPVwidy1mdWxsIGdyaWQgZ3JpZC1jb2xzLTJcIj5cbiAgICAgICAgICAgIDxUYWJzVHJpZ2dlciB2YWx1ZT1cIm1hcmt1cFwiIGRpc2FibGVkPXtkaXNhYmxlZH0+XG4gICAgICAgICAgICAgIDxUcmVuZGluZ1VwIGNsYXNzTmFtZT1cImgtNCB3LTQgbXItMS41XCIgLz5cbiAgICAgICAgICAgICAgTWFya3VwXG4gICAgICAgICAgICA8L1RhYnNUcmlnZ2VyPlxuICAgICAgICAgICAgPFRhYnNUcmlnZ2VyIHZhbHVlPVwiZGlzY291bnRcIiBkaXNhYmxlZD17ZGlzYWJsZWR9PlxuICAgICAgICAgICAgICA8VHJlbmRpbmdEb3duIGNsYXNzTmFtZT1cImgtNCB3LTQgbXItMS41XCIgLz5cbiAgICAgICAgICAgICAgRGlzY291bnRcbiAgICAgICAgICAgIDwvVGFic1RyaWdnZXI+XG4gICAgICAgICAgPC9UYWJzTGlzdD5cblxuICAgICAgICAgIDxUYWJzQ29udGVudCB2YWx1ZT1cIm1hcmt1cFwiIGNsYXNzTmFtZT1cIm10LTRcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0zXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlIGZsZXgtMVwiPlxuICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRNb2RlPVwiZGVjaW1hbFwiXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiRW50ZXIgbWFya3VwIHBlcmNlbnRhZ2VcIlxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17cGVyY2VudFZhbHVlfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlUGVyY2VudENoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJwci04XCJcbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJhYnNvbHV0ZSByaWdodC0zIHRvcC0xLzIgLXRyYW5zbGF0ZS15LTEvMiB0ZXh0LW11dGVkLWZvcmVncm91bmQgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgICAlXG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiPlxuICAgICAgICAgICAgICAgIEluY3JlYXNlcyBwcmljZXMgYnkgdGhlIHNwZWNpZmllZCBwZXJjZW50YWdlIChlLmcuLCAxMCUgbWFya3VwOiAkMTAwIGJlY29tZXMgJDExMClcbiAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9UYWJzQ29udGVudD5cblxuICAgICAgICAgIDxUYWJzQ29udGVudCB2YWx1ZT1cImRpc2NvdW50XCIgY2xhc3NOYW1lPVwibXQtNFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTNcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmUgZmxleC0xXCI+XG4gICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICBpbnB1dE1vZGU9XCJkZWNpbWFsXCJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJFbnRlciBkaXNjb3VudCBwZXJjZW50YWdlXCJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3BlcmNlbnRWYWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZVBlcmNlbnRDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHItOFwiXG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYWJzb2x1dGUgcmlnaHQtMyB0b3AtMS8yIC10cmFuc2xhdGUteS0xLzIgdGV4dC1tdXRlZC1mb3JlZ3JvdW5kIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgICAgJVxuICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LW11dGVkLWZvcmVncm91bmRcIj5cbiAgICAgICAgICAgICAgICBEZWNyZWFzZXMgcHJpY2VzIGJ5IHRoZSBzcGVjaWZpZWQgcGVyY2VudGFnZSAoZS5nLiwgMTUlIGRpc2NvdW50OiAkMTAwIGJlY29tZXMgJDg1KVxuICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L1RhYnNDb250ZW50PlxuICAgICAgICA8L1RhYnM+XG5cbiAgICAgICAgey8qIFByZXZpZXcgU3VtbWFyeSAqL31cbiAgICAgICAge3ByZXZpZXcgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZC1sZyBiZy1tdXRlZC81MCBwLTQgc3BhY2UteS0zXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlblwiPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtXCI+UHJldmlldzwvc3Bhbj5cbiAgICAgICAgICAgICAgPEJhZGdlIHZhcmlhbnQ9e21vZGUgPT09IFwibWFya3VwXCIgPyBcInN1Y2Nlc3NcIiA6IFwid2FybmluZ1wifT5cbiAgICAgICAgICAgICAgICB7bW9kZSA9PT0gXCJtYXJrdXBcIiA/IFwiK1wiIDogXCItXCJ9e3ByZXZpZXcuYXZnQ2hhbmdlUGVyY2VudH0lXG4gICAgICAgICAgICAgIDwvQmFkZ2U+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0yIGdhcC00IHRleHQtc21cIj5cbiAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtbXV0ZWQtZm9yZWdyb3VuZCB0ZXh0LXhzIHVwcGVyY2FzZSB0cmFja2luZy13aWRlIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgIFByb2R1Y3RzIEFmZmVjdGVkXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkXCI+e3ByZXZpZXcuYWZmZWN0ZWRDb3VudH08L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LW11dGVkLWZvcmVncm91bmQgdGV4dC14cyB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZSBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICBUb3RhbCBDaGFuZ2VcbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y24oXG4gICAgICAgICAgICAgICAgICBcImZvbnQtc2VtaWJvbGRcIixcbiAgICAgICAgICAgICAgICAgIHByZXZpZXcudG90YWxDaGFuZ2UgPiAwID8gXCJ0ZXh0LXN1Y2Nlc3NcIiA6IFwidGV4dC1kYW5nZXJcIlxuICAgICAgICAgICAgICAgICl9PlxuICAgICAgICAgICAgICAgICAge3ByZXZpZXcudG90YWxDaGFuZ2UgPiAwID8gXCIrXCIgOiBcIlwifXtmb3JtYXRDdXJyZW5jeShwcmV2aWV3LnRvdGFsQ2hhbmdlKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwdC0yIGJvcmRlci10IGJvcmRlci1ib3JkZXJcIj5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LW11dGVkLWZvcmVncm91bmRcIj5cbiAgICAgICAgICAgICAgICBBcHBseSA8c3BhbiBjbGFzc05hbWU9XCJmb250LW1lZGl1bSB0ZXh0LWZvcmVncm91bmRcIj57cHJldmlldy5hdmdDaGFuZ2VQZXJjZW50fSUge21vZGV9PC9zcGFuPiB0b3tcIiBcIn1cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmb250LW1lZGl1bSB0ZXh0LWZvcmVncm91bmRcIj57cHJldmlldy5hZmZlY3RlZENvdW50fSBwcm9kdWN0czwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG5cbiAgICAgICAgey8qIEFjdGlvbiBCdXR0b25zICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0zIHB0LTJcIj5cbiAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICB2YXJpYW50PVwicHJpbWFyeVwiXG4gICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVBcHBseX1cbiAgICAgICAgICAgIGRpc2FibGVkPXtpc0FwcGx5RGlzYWJsZWR9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4LTFcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxDYWxjdWxhdG9yIGNsYXNzTmFtZT1cImgtNCB3LTRcIiAvPlxuICAgICAgICAgICAgQXBwbHkgdG8gQWxsXG4gICAgICAgICAgPC9CdXR0b24+XG5cbiAgICAgICAgICB7aGFzQ2hhbmdlcyAmJiAoXG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lXCJcbiAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlUmVzZXR9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPFJvdGF0ZUNjdyBjbGFzc05hbWU9XCJoLTQgdy00XCIgLz5cbiAgICAgICAgICAgICAgUmVzZXRcbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHsvKiBTdGF0dXMgaW5kaWNhdG9yICovfVxuICAgICAgICB7aGFzQ2hhbmdlcyAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICAgICAgPEJhZGdlIHZhcmlhbnQ9XCJzZWNvbmRhcnlcIj5cbiAgICAgICAgICAgICAgQ2FsY3VsYXRlZCBwcmljZXMgYXBwbGllZCAtIGNsaWNrIFJlc2V0IHRvIHJldmVydFxuICAgICAgICAgICAgPC9CYWRnZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cblxuICAgICAgICB7LyogRW1wdHkgc3RhdGUgKi99XG4gICAgICAgIHtyZWNvcmRzLmxlbmd0aCA9PT0gMCAmJiAoXG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LW11dGVkLWZvcmVncm91bmQgdGV4dC1jZW50ZXIgcHktNFwiPlxuICAgICAgICAgICAgVXBsb2FkIHByaWNpbmcgZGF0YSB0byB1c2UgdGhlIGNhbGN1bGF0b3JcbiAgICAgICAgICA8L3A+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICA8L0NhcmQ+XG4gICk7XG59XG4iXSwiZmlsZSI6IkM6L1Byb2plY3RzL1NvdXJjZSA0IEluZHVzdHJpZXMvc3JjL2NvbXBvbmVudHMvcHJpY2luZy9wcmljZS1jYWxjdWxhdG9yLnRzeCJ9