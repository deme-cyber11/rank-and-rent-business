import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/components/RadarToast.tsx");import __vite__cjsImport0_react_jsxDevRuntime from "/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=aadb9797"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
var _s = $RefreshSig$(), _s2 = $RefreshSig$(), _s3 = $RefreshSig$();
import __vite__cjsImport1_react from "/node_modules/.vite/deps/react.js?v=aadb9797"; const useState = __vite__cjsImport1_react["useState"]; const useEffect = __vite__cjsImport1_react["useEffect"]; const useCallback = __vite__cjsImport1_react["useCallback"];
import { useNavigate } from "/node_modules/.vite/deps/react-router-dom.js?v=aadb9797";
import {
  X,
  Activity,
  UserPlus,
  TrendingUp,
  Trophy,
  XCircle,
  Mail,
  Calendar,
  FileText,
  Star,
  Users,
  UserCheck
} from "/node_modules/.vite/deps/lucide-react.js?v=aadb9797";
const eventIcons = {
  new_lead: UserPlus,
  stage_change: TrendingUp,
  deal_closed: Trophy,
  deal_lost: XCircle,
  email_reply: Mail,
  appointment: Calendar,
  form_submission: FileText,
  new_contact: Users,
  review: Star,
  affiliate_signup: Users,
  affiliate_onboarded: UserCheck
};
const eventTypeColors = {
  new_lead: "text-blue-400 bg-blue-500/10",
  stage_change: "text-indigo-400 bg-indigo-500/10",
  deal_closed: "text-amber-400 bg-amber-500/10",
  deal_lost: "text-red-400 bg-red-500/10",
  email_reply: "text-purple-400 bg-purple-500/10",
  appointment: "text-teal-400 bg-teal-500/10",
  form_submission: "text-orange-400 bg-orange-500/10",
  new_contact: "text-cyan-400 bg-cyan-500/10",
  review: "text-yellow-400 bg-yellow-500/10",
  affiliate_signup: "text-green-400 bg-green-500/10",
  affiliate_onboarded: "text-emerald-400 bg-emerald-500/10"
};
const formatRelativeTime = (dateString) => {
  const date = new Date(dateString);
  const now = /* @__PURE__ */ new Date();
  const diffMs = now.getTime() - date.getTime();
  const diffMins = Math.floor(diffMs / 6e4);
  const diffHours = Math.floor(diffMs / 36e5);
  if (diffMins < 1) return "just now";
  if (diffMins < 60) return `${diffMins}m ago`;
  if (diffHours < 24) return `${diffHours}h ago`;
  return date.toLocaleDateString("en-US", { month: "short", day: "numeric" });
};
export const RadarToast = ({
  notification,
  onDismiss,
  isExiting = false
}) => {
  _s();
  const navigate = useNavigate();
  const EventIcon = eventIcons[notification.event_type] || Activity;
  const colorClass = eventTypeColors[notification.event_type] || "text-gray-400 bg-gray-500/10";
  const handleView = (e) => {
    e.stopPropagation();
    navigate("/radar");
    onDismiss(notification.id);
  };
  const handleDismiss = (e) => {
    e.stopPropagation();
    onDismiss(notification.id);
  };
  return /* @__PURE__ */ jsxDEV(
    "div",
    {
      className: `
        relative flex items-start gap-3 p-4
        bg-dark-card border border-dark-border rounded-lg shadow-xl
        min-w-[320px] max-w-[400px]
        transition-all duration-300 ease-out
        ${isExiting ? "opacity-0 translate-x-full" : "opacity-100 translate-x-0 animate-in slide-in-from-right"}
      `,
      children: [
        /* @__PURE__ */ jsxDEV(
          "button",
          {
            onClick: handleDismiss,
            className: "absolute top-2 right-2 p-1 text-gray-500 hover:text-gray-300 hover:bg-dark-hover rounded transition-colors",
            "aria-label": "Dismiss notification",
            children: /* @__PURE__ */ jsxDEV(X, { className: "w-4 h-4" }, void 0, false, {
              fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/RadarToast.tsx",
              lineNumber: 120,
              columnNumber: 9
            }, this)
          },
          void 0,
          false,
          {
            fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/RadarToast.tsx",
            lineNumber: 115,
            columnNumber: 7
          },
          this
        ),
        /* @__PURE__ */ jsxDEV("div", { className: `flex-shrink-0 p-2 rounded-lg ${colorClass}`, children: /* @__PURE__ */ jsxDEV(EventIcon, { className: "w-5 h-5" }, void 0, false, {
          fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/RadarToast.tsx",
          lineNumber: 125,
          columnNumber: 9
        }, this) }, void 0, false, {
          fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/RadarToast.tsx",
          lineNumber: 124,
          columnNumber: 7
        }, this),
        /* @__PURE__ */ jsxDEV("div", { className: "flex-1 min-w-0 pr-6", children: [
          /* @__PURE__ */ jsxDEV("h4", { className: "text-sm font-medium text-white truncate", title: notification.title, children: notification.title }, void 0, false, {
            fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/RadarToast.tsx",
            lineNumber: 131,
            columnNumber: 9
          }, this),
          /* @__PURE__ */ jsxDEV("p", { className: "text-xs text-gray-500 mt-0.5", children: formatRelativeTime(notification.created_at) }, void 0, false, {
            fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/RadarToast.tsx",
            lineNumber: 136,
            columnNumber: 9
          }, this),
          /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-2 mt-2", children: [
            /* @__PURE__ */ jsxDEV(
              "button",
              {
                onClick: handleView,
                className: "px-3 py-1 text-xs font-medium text-brand-400 bg-brand-500/10 hover:bg-brand-500/20 rounded transition-colors",
                children: "View"
              },
              void 0,
              false,
              {
                fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/RadarToast.tsx",
                lineNumber: 142,
                columnNumber: 11
              },
              this
            ),
            /* @__PURE__ */ jsxDEV(
              "button",
              {
                onClick: handleDismiss,
                className: "px-3 py-1 text-xs font-medium text-gray-400 hover:text-gray-300 hover:bg-dark-hover rounded transition-colors",
                children: "Dismiss"
              },
              void 0,
              false,
              {
                fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/RadarToast.tsx",
                lineNumber: 148,
                columnNumber: 11
              },
              this
            )
          ] }, void 0, true, {
            fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/RadarToast.tsx",
            lineNumber: 141,
            columnNumber: 9
          }, this)
        ] }, void 0, true, {
          fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/RadarToast.tsx",
          lineNumber: 129,
          columnNumber: 7
        }, this)
      ]
    },
    void 0,
    true,
    {
      fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/RadarToast.tsx",
      lineNumber: 102,
      columnNumber: 5
    },
    this
  );
};
_s(RadarToast, "CzcTeTziyjMsSrAVmHuCCb6+Bfg=", false, function() {
  return [useNavigate];
});
_c = RadarToast;
export const RadarToastContainer = ({
  notifications,
  onDismiss,
  maxVisible = 3
}) => {
  _s2();
  const [exitingIds, setExitingIds] = useState(/* @__PURE__ */ new Set());
  const handleDismiss = useCallback((id) => {
    setExitingIds((prev) => new Set(prev).add(id));
    setTimeout(() => {
      setExitingIds((prev) => {
        const next = new Set(prev);
        next.delete(id);
        return next;
      });
      onDismiss(id);
    }, 300);
  }, [onDismiss]);
  const visibleNotifications = notifications.slice(0, maxVisible);
  if (visibleNotifications.length === 0) {
    return null;
  }
  return /* @__PURE__ */ jsxDEV(
    "div",
    {
      className: "fixed bottom-4 right-4 z-50 flex flex-col gap-3 pointer-events-none",
      role: "region",
      "aria-label": "Notifications",
      children: visibleNotifications.map(
        (notification) => /* @__PURE__ */ jsxDEV("div", { className: "pointer-events-auto", children: /* @__PURE__ */ jsxDEV(
          RadarToast,
          {
            notification,
            onDismiss: handleDismiss,
            isExiting: exitingIds.has(notification.id)
          },
          void 0,
          false,
          {
            fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/RadarToast.tsx",
            lineNumber: 222,
            columnNumber: 11
          },
          this
        ) }, notification.id, false, {
          fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/RadarToast.tsx",
          lineNumber: 221,
          columnNumber: 7
        }, this)
      )
    },
    void 0,
    false,
    {
      fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/RadarToast.tsx",
      lineNumber: 215,
      columnNumber: 5
    },
    this
  );
};
_s2(RadarToastContainer, "J/QRzdGK4VonQoD51//m1EXeKX0=");
_c2 = RadarToastContainer;
export const useRadarToasts = (autoDismissMs = 8e3) => {
  _s3();
  const [toasts, setToasts] = useState([]);
  const addToast = useCallback((event) => {
    setToasts((prev) => {
      if (prev.some((t) => t.id === event.id)) {
        return prev;
      }
      return [event, ...prev];
    });
  }, []);
  const dismissToast = useCallback((id) => {
    setToasts((prev) => prev.filter((t) => t.id !== id));
  }, []);
  const clearAll = useCallback(() => {
    setToasts([]);
  }, []);
  useEffect(() => {
    if (toasts.length === 0 || autoDismissMs <= 0) return;
    const timers = [];
    toasts.forEach((toast) => {
      const timer = setTimeout(() => {
        dismissToast(toast.id);
      }, autoDismissMs);
      timers.push(timer);
    });
    return () => {
      timers.forEach((timer) => clearTimeout(timer));
    };
  }, [toasts, autoDismissMs, dismissToast]);
  return {
    toasts,
    addToast,
    dismissToast,
    clearAll
  };
};
_s3(useRadarToasts, "z0cWcU/NlVaNN5KGdZJXsGfxiw8=");
export default RadarToastContainer;
var _c, _c2;
$RefreshReg$(_c, "RadarToast");
$RefreshReg$(_c2, "RadarToastContainer");
import * as RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("C:/Projects/Huge Capital/huge-capital-mgmt/src/components/RadarToast.tsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("C:/Projects/Huge Capital/huge-capital-mgmt/src/components/RadarToast.tsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}
function $RefreshReg$(type, id) {
  return RefreshRuntime.register(type, "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/RadarToast.tsx " + id);
}
function $RefreshSig$() {
  return RefreshRuntime.createSignatureFunctionForTransform();
}

//# sourceMappingURL=data:application/json;base64,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QUFBb0IsSUFBQUQsSUFBQWtCO0FBQUFtQixhQUFBckMsSUFBQTtBQUFBcUMsYUFBQW5CLEtBQUEiLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZUNhbGxiYWNrIiwidXNlTmF2aWdhdGUiLCJYIiwiQWN0aXZpdHkiLCJVc2VyUGx1cyIsIlRyZW5kaW5nVXAiLCJUcm9waHkiLCJYQ2lyY2xlIiwiTWFpbCIsIkNhbGVuZGFyIiwiRmlsZVRleHQiLCJTdGFyIiwiVXNlcnMiLCJVc2VyQ2hlY2siLCJldmVudEljb25zIiwibmV3X2xlYWQiLCJzdGFnZV9jaGFuZ2UiLCJkZWFsX2Nsb3NlZCIsImRlYWxfbG9zdCIsImVtYWlsX3JlcGx5IiwiYXBwb2ludG1lbnQiLCJmb3JtX3N1Ym1pc3Npb24iLCJuZXdfY29udGFjdCIsInJldmlldyIsImFmZmlsaWF0ZV9zaWdudXAiLCJhZmZpbGlhdGVfb25ib2FyZGVkIiwiZXZlbnRUeXBlQ29sb3JzIiwiZm9ybWF0UmVsYXRpdmVUaW1lIiwiZGF0ZVN0cmluZyIsImRhdGUiLCJEYXRlIiwibm93IiwiZGlmZk1zIiwiZ2V0VGltZSIsImRpZmZNaW5zIiwiTWF0aCIsImZsb29yIiwiZGlmZkhvdXJzIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwibW9udGgiLCJkYXkiLCJSYWRhclRvYXN0Iiwibm90aWZpY2F0aW9uIiwib25EaXNtaXNzIiwiaXNFeGl0aW5nIiwiX3MiLCJuYXZpZ2F0ZSIsIkV2ZW50SWNvbiIsImV2ZW50X3R5cGUiLCJjb2xvckNsYXNzIiwiaGFuZGxlVmlldyIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJpZCIsImhhbmRsZURpc21pc3MiLCJ0aXRsZSIsImNyZWF0ZWRfYXQiLCJfYyIsIlJhZGFyVG9hc3RDb250YWluZXIiLCJub3RpZmljYXRpb25zIiwibWF4VmlzaWJsZSIsIl9zMiIsImV4aXRpbmdJZHMiLCJzZXRFeGl0aW5nSWRzIiwiU2V0IiwicHJldiIsImFkZCIsInNldFRpbWVvdXQiLCJuZXh0IiwiZGVsZXRlIiwidmlzaWJsZU5vdGlmaWNhdGlvbnMiLCJzbGljZSIsImxlbmd0aCIsIm1hcCIsImhhcyIsIl9jMiIsInVzZVJhZGFyVG9hc3RzIiwiYXV0b0Rpc21pc3NNcyIsIl9zMyIsInRvYXN0cyIsInNldFRvYXN0cyIsImFkZFRvYXN0IiwiZXZlbnQiLCJzb21lIiwidCIsImRpc21pc3NUb2FzdCIsImZpbHRlciIsImNsZWFyQWxsIiwidGltZXJzIiwiZm9yRWFjaCIsInRvYXN0IiwidGltZXIiLCJwdXNoIiwiY2xlYXJUaW1lb3V0IiwiJFJlZnJlc2hSZWckIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VzIjpbIlJhZGFyVG9hc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBSYWRhclRvYXN0IC0gRmxvYXRpbmcgdG9hc3Qgbm90aWZpY2F0aW9ucyBmb3IgSHVnZSBSYWRhciBldmVudHNcclxuICogRGlzcGxheXMgcmVhbC10aW1lIGV2ZW50IG5vdGlmaWNhdGlvbnMgaW4gdGhlIGJvdHRvbS1yaWdodCBjb3JuZXJcclxuICovXHJcblxyXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlTmF2aWdhdGUgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcclxuaW1wb3J0IHtcclxuICBYLFxyXG4gIEFjdGl2aXR5LFxyXG4gIFVzZXJQbHVzLFxyXG4gIFRyZW5kaW5nVXAsXHJcbiAgVHJvcGh5LFxyXG4gIFhDaXJjbGUsXHJcbiAgTWFpbCxcclxuICBDYWxlbmRhcixcclxuICBGaWxlVGV4dCxcclxuICBTdGFyLFxyXG4gIFVzZXJzLFxyXG4gIFVzZXJDaGVjayxcclxuICB0eXBlIEx1Y2lkZUljb24sXHJcbn0gZnJvbSAnbHVjaWRlLXJlYWN0JztcclxuaW1wb3J0IHR5cGUgeyBSYWRhckV2ZW50IH0gZnJvbSAnLi4vdHlwZXMvcmFkYXInO1xyXG5cclxuLy8gRXZlbnQgdHlwZSB0byBpY29uIG1hcHBpbmcgKG1hdGNoZXMgSHVnZVJhZGFyLnRzeClcclxuY29uc3QgZXZlbnRJY29uczogUmVjb3JkPHN0cmluZywgTHVjaWRlSWNvbj4gPSB7XHJcbiAgbmV3X2xlYWQ6IFVzZXJQbHVzLFxyXG4gIHN0YWdlX2NoYW5nZTogVHJlbmRpbmdVcCxcclxuICBkZWFsX2Nsb3NlZDogVHJvcGh5LFxyXG4gIGRlYWxfbG9zdDogWENpcmNsZSxcclxuICBlbWFpbF9yZXBseTogTWFpbCxcclxuICBhcHBvaW50bWVudDogQ2FsZW5kYXIsXHJcbiAgZm9ybV9zdWJtaXNzaW9uOiBGaWxlVGV4dCxcclxuICBuZXdfY29udGFjdDogVXNlcnMsXHJcbiAgcmV2aWV3OiBTdGFyLFxyXG4gIGFmZmlsaWF0ZV9zaWdudXA6IFVzZXJzLFxyXG4gIGFmZmlsaWF0ZV9vbmJvYXJkZWQ6IFVzZXJDaGVjayxcclxufTtcclxuXHJcbi8vIEV2ZW50IHR5cGUgY29sb3JzIChtYXRjaGVzIEh1Z2VSYWRhci50c3gpXHJcbmNvbnN0IGV2ZW50VHlwZUNvbG9yczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcclxuICBuZXdfbGVhZDogJ3RleHQtYmx1ZS00MDAgYmctYmx1ZS01MDAvMTAnLFxyXG4gIHN0YWdlX2NoYW5nZTogJ3RleHQtaW5kaWdvLTQwMCBiZy1pbmRpZ28tNTAwLzEwJyxcclxuICBkZWFsX2Nsb3NlZDogJ3RleHQtYW1iZXItNDAwIGJnLWFtYmVyLTUwMC8xMCcsXHJcbiAgZGVhbF9sb3N0OiAndGV4dC1yZWQtNDAwIGJnLXJlZC01MDAvMTAnLFxyXG4gIGVtYWlsX3JlcGx5OiAndGV4dC1wdXJwbGUtNDAwIGJnLXB1cnBsZS01MDAvMTAnLFxyXG4gIGFwcG9pbnRtZW50OiAndGV4dC10ZWFsLTQwMCBiZy10ZWFsLTUwMC8xMCcsXHJcbiAgZm9ybV9zdWJtaXNzaW9uOiAndGV4dC1vcmFuZ2UtNDAwIGJnLW9yYW5nZS01MDAvMTAnLFxyXG4gIG5ld19jb250YWN0OiAndGV4dC1jeWFuLTQwMCBiZy1jeWFuLTUwMC8xMCcsXHJcbiAgcmV2aWV3OiAndGV4dC15ZWxsb3ctNDAwIGJnLXllbGxvdy01MDAvMTAnLFxyXG4gIGFmZmlsaWF0ZV9zaWdudXA6ICd0ZXh0LWdyZWVuLTQwMCBiZy1ncmVlbi01MDAvMTAnLFxyXG4gIGFmZmlsaWF0ZV9vbmJvYXJkZWQ6ICd0ZXh0LWVtZXJhbGQtNDAwIGJnLWVtZXJhbGQtNTAwLzEwJyxcclxufTtcclxuXHJcbi8vIEZvcm1hdCByZWxhdGl2ZSB0aW1lIGZvciB0b2FzdCBkaXNwbGF5XHJcbmNvbnN0IGZvcm1hdFJlbGF0aXZlVGltZSA9IChkYXRlU3RyaW5nOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xyXG4gIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShkYXRlU3RyaW5nKTtcclxuICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gIGNvbnN0IGRpZmZNcyA9IG5vdy5nZXRUaW1lKCkgLSBkYXRlLmdldFRpbWUoKTtcclxuICBjb25zdCBkaWZmTWlucyA9IE1hdGguZmxvb3IoZGlmZk1zIC8gNjAwMDApO1xyXG4gIGNvbnN0IGRpZmZIb3VycyA9IE1hdGguZmxvb3IoZGlmZk1zIC8gMzYwMDAwMCk7XHJcblxyXG4gIGlmIChkaWZmTWlucyA8IDEpIHJldHVybiAnanVzdCBub3cnO1xyXG4gIGlmIChkaWZmTWlucyA8IDYwKSByZXR1cm4gYCR7ZGlmZk1pbnN9bSBhZ29gO1xyXG4gIGlmIChkaWZmSG91cnMgPCAyNCkgcmV0dXJuIGAke2RpZmZIb3Vyc31oIGFnb2A7XHJcblxyXG4gIHJldHVybiBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tVVMnLCB7IG1vbnRoOiAnc2hvcnQnLCBkYXk6ICdudW1lcmljJyB9KTtcclxufTtcclxuXHJcbi8vIFNpbmdsZSBUb2FzdCBQcm9wc1xyXG5pbnRlcmZhY2UgUmFkYXJUb2FzdFByb3BzIHtcclxuICBub3RpZmljYXRpb246IFJhZGFyRXZlbnQ7XHJcbiAgb25EaXNtaXNzOiAoaWQ6IHN0cmluZykgPT4gdm9pZDtcclxuICBpc0V4aXRpbmc/OiBib29sZWFuO1xyXG59XHJcblxyXG4vKipcclxuICogU2luZ2xlIFJhZGFyVG9hc3QgQ29tcG9uZW50XHJcbiAqIERpc3BsYXlzIGEgc2luZ2xlIHRvYXN0IG5vdGlmaWNhdGlvbiB3aXRoIGFuaW1hdGlvblxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFJhZGFyVG9hc3Q6IFJlYWN0LkZDPFJhZGFyVG9hc3RQcm9wcz4gPSAoe1xyXG4gIG5vdGlmaWNhdGlvbixcclxuICBvbkRpc21pc3MsXHJcbiAgaXNFeGl0aW5nID0gZmFsc2UsXHJcbn0pID0+IHtcclxuICBjb25zdCBuYXZpZ2F0ZSA9IHVzZU5hdmlnYXRlKCk7XHJcbiAgY29uc3QgRXZlbnRJY29uID0gZXZlbnRJY29uc1tub3RpZmljYXRpb24uZXZlbnRfdHlwZV0gfHwgQWN0aXZpdHk7XHJcbiAgY29uc3QgY29sb3JDbGFzcyA9IGV2ZW50VHlwZUNvbG9yc1tub3RpZmljYXRpb24uZXZlbnRfdHlwZV0gfHwgJ3RleHQtZ3JheS00MDAgYmctZ3JheS01MDAvMTAnO1xyXG5cclxuICBjb25zdCBoYW5kbGVWaWV3ID0gKGU6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHtcclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICBuYXZpZ2F0ZSgnL3JhZGFyJyk7XHJcbiAgICBvbkRpc21pc3Mobm90aWZpY2F0aW9uLmlkKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVEaXNtaXNzID0gKGU6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHtcclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICBvbkRpc21pc3Mobm90aWZpY2F0aW9uLmlkKTtcclxuICB9O1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdlxyXG4gICAgICBjbGFzc05hbWU9e2BcclxuICAgICAgICByZWxhdGl2ZSBmbGV4IGl0ZW1zLXN0YXJ0IGdhcC0zIHAtNFxyXG4gICAgICAgIGJnLWRhcmstY2FyZCBib3JkZXIgYm9yZGVyLWRhcmstYm9yZGVyIHJvdW5kZWQtbGcgc2hhZG93LXhsXHJcbiAgICAgICAgbWluLXctWzMyMHB4XSBtYXgtdy1bNDAwcHhdXHJcbiAgICAgICAgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMzAwIGVhc2Utb3V0XHJcbiAgICAgICAgJHtpc0V4aXRpbmdcclxuICAgICAgICAgID8gJ29wYWNpdHktMCB0cmFuc2xhdGUteC1mdWxsJ1xyXG4gICAgICAgICAgOiAnb3BhY2l0eS0xMDAgdHJhbnNsYXRlLXgtMCBhbmltYXRlLWluIHNsaWRlLWluLWZyb20tcmlnaHQnXHJcbiAgICAgICAgfVxyXG4gICAgICBgfVxyXG4gICAgPlxyXG4gICAgICB7LyogQ2xvc2UgYnV0dG9uICovfVxyXG4gICAgICA8YnV0dG9uXHJcbiAgICAgICAgb25DbGljaz17aGFuZGxlRGlzbWlzc31cclxuICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtMiByaWdodC0yIHAtMSB0ZXh0LWdyYXktNTAwIGhvdmVyOnRleHQtZ3JheS0zMDAgaG92ZXI6YmctZGFyay1ob3ZlciByb3VuZGVkIHRyYW5zaXRpb24tY29sb3JzXCJcclxuICAgICAgICBhcmlhLWxhYmVsPVwiRGlzbWlzcyBub3RpZmljYXRpb25cIlxyXG4gICAgICA+XHJcbiAgICAgICAgPFggY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+XHJcbiAgICAgIDwvYnV0dG9uPlxyXG5cclxuICAgICAgey8qIEV2ZW50IEljb24gKi99XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtgZmxleC1zaHJpbmstMCBwLTIgcm91bmRlZC1sZyAke2NvbG9yQ2xhc3N9YH0+XHJcbiAgICAgICAgPEV2ZW50SWNvbiBjbGFzc05hbWU9XCJ3LTUgaC01XCIgLz5cclxuICAgICAgPC9kaXY+XHJcblxyXG4gICAgICB7LyogQ29udGVudCAqL31cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgbWluLXctMCBwci02XCI+XHJcbiAgICAgICAgey8qIFRpdGxlICovfVxyXG4gICAgICAgIDxoNCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtd2hpdGUgdHJ1bmNhdGVcIiB0aXRsZT17bm90aWZpY2F0aW9uLnRpdGxlfT5cclxuICAgICAgICAgIHtub3RpZmljYXRpb24udGl0bGV9XHJcbiAgICAgICAgPC9oND5cclxuXHJcbiAgICAgICAgey8qIFRpbWVzdGFtcCAqL31cclxuICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDAgbXQtMC41XCI+XHJcbiAgICAgICAgICB7Zm9ybWF0UmVsYXRpdmVUaW1lKG5vdGlmaWNhdGlvbi5jcmVhdGVkX2F0KX1cclxuICAgICAgICA8L3A+XHJcblxyXG4gICAgICAgIHsvKiBBY3Rpb25zICovfVxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgbXQtMlwiPlxyXG4gICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVWaWV3fVxyXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJweC0zIHB5LTEgdGV4dC14cyBmb250LW1lZGl1bSB0ZXh0LWJyYW5kLTQwMCBiZy1icmFuZC01MDAvMTAgaG92ZXI6YmctYnJhbmQtNTAwLzIwIHJvdW5kZWQgdHJhbnNpdGlvbi1jb2xvcnNcIlxyXG4gICAgICAgICAgPlxyXG4gICAgICAgICAgICBWaWV3XHJcbiAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgb25DbGljaz17aGFuZGxlRGlzbWlzc31cclxuICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtMyBweS0xIHRleHQteHMgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTQwMCBob3Zlcjp0ZXh0LWdyYXktMzAwIGhvdmVyOmJnLWRhcmstaG92ZXIgcm91bmRlZCB0cmFuc2l0aW9uLWNvbG9yc1wiXHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIERpc21pc3NcclxuICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn07XHJcblxyXG4vLyBDb250YWluZXIgUHJvcHNcclxuaW50ZXJmYWNlIFJhZGFyVG9hc3RDb250YWluZXJQcm9wcyB7XHJcbiAgbm90aWZpY2F0aW9uczogUmFkYXJFdmVudFtdO1xyXG4gIG9uRGlzbWlzczogKGlkOiBzdHJpbmcpID0+IHZvaWQ7XHJcbiAgbWF4VmlzaWJsZT86IG51bWJlcjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJhZGFyVG9hc3RDb250YWluZXIgQ29tcG9uZW50XHJcbiAqIE1hbmFnZXMgYW5kIHJlbmRlcnMgdXAgdG8gbWF4VmlzaWJsZSB0b2FzdHMgc3RhY2tlZCB2ZXJ0aWNhbGx5XHJcbiAqXHJcbiAqIFVzYWdlOlxyXG4gKiBgYGB0c3hcclxuICogY29uc3QgW25vdGlmaWNhdGlvbnMsIHNldE5vdGlmaWNhdGlvbnNdID0gdXNlU3RhdGU8UmFkYXJFdmVudFtdPihbXSk7XHJcbiAqIGNvbnN0IGhhbmRsZURpc21pc3MgPSAoaWQ6IHN0cmluZykgPT4ge1xyXG4gKiAgIHNldE5vdGlmaWNhdGlvbnMocHJldiA9PiBwcmV2LmZpbHRlcihuID0+IG4uaWQgIT09IGlkKSk7XHJcbiAqIH07XHJcbiAqXHJcbiAqIDxSYWRhclRvYXN0Q29udGFpbmVyXHJcbiAqICAgbm90aWZpY2F0aW9ucz17bm90aWZpY2F0aW9uc31cclxuICogICBvbkRpc21pc3M9e2hhbmRsZURpc21pc3N9XHJcbiAqIC8+XHJcbiAqIGBgYFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFJhZGFyVG9hc3RDb250YWluZXI6IFJlYWN0LkZDPFJhZGFyVG9hc3RDb250YWluZXJQcm9wcz4gPSAoe1xyXG4gIG5vdGlmaWNhdGlvbnMsXHJcbiAgb25EaXNtaXNzLFxyXG4gIG1heFZpc2libGUgPSAzLFxyXG59KSA9PiB7XHJcbiAgLy8gVHJhY2sgZXhpdGluZyB0b2FzdHMgZm9yIGFuaW1hdGlvblxyXG4gIGNvbnN0IFtleGl0aW5nSWRzLCBzZXRFeGl0aW5nSWRzXSA9IHVzZVN0YXRlPFNldDxzdHJpbmc+PihuZXcgU2V0KCkpO1xyXG5cclxuICAvLyBIYW5kbGUgZGlzbWlzcyB3aXRoIGV4aXQgYW5pbWF0aW9uXHJcbiAgY29uc3QgaGFuZGxlRGlzbWlzcyA9IHVzZUNhbGxiYWNrKChpZDogc3RyaW5nKSA9PiB7XHJcbiAgICBzZXRFeGl0aW5nSWRzKHByZXYgPT4gbmV3IFNldChwcmV2KS5hZGQoaWQpKTtcclxuXHJcbiAgICAvLyBSZW1vdmUgYWZ0ZXIgYW5pbWF0aW9uIGNvbXBsZXRlc1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHNldEV4aXRpbmdJZHMocHJldiA9PiB7XHJcbiAgICAgICAgY29uc3QgbmV4dCA9IG5ldyBTZXQocHJldik7XHJcbiAgICAgICAgbmV4dC5kZWxldGUoaWQpO1xyXG4gICAgICAgIHJldHVybiBuZXh0O1xyXG4gICAgICB9KTtcclxuICAgICAgb25EaXNtaXNzKGlkKTtcclxuICAgIH0sIDMwMCk7XHJcbiAgfSwgW29uRGlzbWlzc10pO1xyXG5cclxuICAvLyBPbmx5IHNob3cgdXAgdG8gbWF4VmlzaWJsZSB0b2FzdHNcclxuICBjb25zdCB2aXNpYmxlTm90aWZpY2F0aW9ucyA9IG5vdGlmaWNhdGlvbnMuc2xpY2UoMCwgbWF4VmlzaWJsZSk7XHJcblxyXG4gIGlmICh2aXNpYmxlTm90aWZpY2F0aW9ucy5sZW5ndGggPT09IDApIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXZcclxuICAgICAgY2xhc3NOYW1lPVwiZml4ZWQgYm90dG9tLTQgcmlnaHQtNCB6LTUwIGZsZXggZmxleC1jb2wgZ2FwLTMgcG9pbnRlci1ldmVudHMtbm9uZVwiXHJcbiAgICAgIHJvbGU9XCJyZWdpb25cIlxyXG4gICAgICBhcmlhLWxhYmVsPVwiTm90aWZpY2F0aW9uc1wiXHJcbiAgICA+XHJcbiAgICAgIHt2aXNpYmxlTm90aWZpY2F0aW9ucy5tYXAoKG5vdGlmaWNhdGlvbikgPT4gKFxyXG4gICAgICAgIDxkaXYga2V5PXtub3RpZmljYXRpb24uaWR9IGNsYXNzTmFtZT1cInBvaW50ZXItZXZlbnRzLWF1dG9cIj5cclxuICAgICAgICAgIDxSYWRhclRvYXN0XHJcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvbj17bm90aWZpY2F0aW9ufVxyXG4gICAgICAgICAgICBvbkRpc21pc3M9e2hhbmRsZURpc21pc3N9XHJcbiAgICAgICAgICAgIGlzRXhpdGluZz17ZXhpdGluZ0lkcy5oYXMobm90aWZpY2F0aW9uLmlkKX1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICkpfVxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiB1c2VSYWRhclRvYXN0cyBIb29rXHJcbiAqIEhlbHBlciBob29rIHRvIG1hbmFnZSB0b2FzdCBzdGF0ZSB3aXRoIGF1dG8tZGlzbWlzcyBmdW5jdGlvbmFsaXR5XHJcbiAqXHJcbiAqIFVzYWdlOlxyXG4gKiBgYGB0c3hcclxuICogY29uc3QgeyB0b2FzdHMsIGFkZFRvYXN0LCBkaXNtaXNzVG9hc3QsIGNsZWFyQWxsIH0gPSB1c2VSYWRhclRvYXN0cygpO1xyXG4gKlxyXG4gKiAvLyBBZGQgYSBuZXcgdG9hc3Qgd2hlbiBhIHJhZGFyIGV2ZW50IGNvbWVzIGluXHJcbiAqIGFkZFRvYXN0KHJhZGFyRXZlbnQpO1xyXG4gKlxyXG4gKiAvLyBSZW5kZXIgdGhlIGNvbnRhaW5lclxyXG4gKiA8UmFkYXJUb2FzdENvbnRhaW5lciBub3RpZmljYXRpb25zPXt0b2FzdHN9IG9uRGlzbWlzcz17ZGlzbWlzc1RvYXN0fSAvPlxyXG4gKiBgYGBcclxuICovXHJcbmV4cG9ydCBjb25zdCB1c2VSYWRhclRvYXN0cyA9IChhdXRvRGlzbWlzc01zOiBudW1iZXIgPSA4MDAwKSA9PiB7XHJcbiAgY29uc3QgW3RvYXN0cywgc2V0VG9hc3RzXSA9IHVzZVN0YXRlPFJhZGFyRXZlbnRbXT4oW10pO1xyXG5cclxuICAvLyBBZGQgYSBuZXcgdG9hc3RcclxuICBjb25zdCBhZGRUb2FzdCA9IHVzZUNhbGxiYWNrKChldmVudDogUmFkYXJFdmVudCkgPT4ge1xyXG4gICAgc2V0VG9hc3RzKHByZXYgPT4ge1xyXG4gICAgICAvLyBBdm9pZCBkdXBsaWNhdGVzXHJcbiAgICAgIGlmIChwcmV2LnNvbWUodCA9PiB0LmlkID09PSBldmVudC5pZCkpIHtcclxuICAgICAgICByZXR1cm4gcHJldjtcclxuICAgICAgfVxyXG4gICAgICAvLyBBZGQgdG8gYmVnaW5uaW5nIChuZXdlc3QgZmlyc3QpXHJcbiAgICAgIHJldHVybiBbZXZlbnQsIC4uLnByZXZdO1xyXG4gICAgfSk7XHJcbiAgfSwgW10pO1xyXG5cclxuICAvLyBEaXNtaXNzIGEgc3BlY2lmaWMgdG9hc3RcclxuICBjb25zdCBkaXNtaXNzVG9hc3QgPSB1c2VDYWxsYmFjaygoaWQ6IHN0cmluZykgPT4ge1xyXG4gICAgc2V0VG9hc3RzKHByZXYgPT4gcHJldi5maWx0ZXIodCA9PiB0LmlkICE9PSBpZCkpO1xyXG4gIH0sIFtdKTtcclxuXHJcbiAgLy8gQ2xlYXIgYWxsIHRvYXN0c1xyXG4gIGNvbnN0IGNsZWFyQWxsID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgc2V0VG9hc3RzKFtdKTtcclxuICB9LCBbXSk7XHJcblxyXG4gIC8vIEF1dG8tZGlzbWlzcyB0b2FzdHMgYWZ0ZXIgdGltZW91dFxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAodG9hc3RzLmxlbmd0aCA9PT0gMCB8fCBhdXRvRGlzbWlzc01zIDw9IDApIHJldHVybjtcclxuXHJcbiAgICBjb25zdCB0aW1lcnM6IE5vZGVKUy5UaW1lb3V0W10gPSBbXTtcclxuXHJcbiAgICB0b2FzdHMuZm9yRWFjaCh0b2FzdCA9PiB7XHJcbiAgICAgIGNvbnN0IHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgZGlzbWlzc1RvYXN0KHRvYXN0LmlkKTtcclxuICAgICAgfSwgYXV0b0Rpc21pc3NNcyk7XHJcbiAgICAgIHRpbWVycy5wdXNoKHRpbWVyKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIHRpbWVycy5mb3JFYWNoKHRpbWVyID0+IGNsZWFyVGltZW91dCh0aW1lcikpO1xyXG4gICAgfTtcclxuICB9LCBbdG9hc3RzLCBhdXRvRGlzbWlzc01zLCBkaXNtaXNzVG9hc3RdKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHRvYXN0cyxcclxuICAgIGFkZFRvYXN0LFxyXG4gICAgZGlzbWlzc1RvYXN0LFxyXG4gICAgY2xlYXJBbGwsXHJcbiAgfTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFJhZGFyVG9hc3RDb250YWluZXI7XHJcbiJdLCJmaWxlIjoiQzovUHJvamVjdHMvSHVnZSBDYXBpdGFsL2h1Z2UtY2FwaXRhbC1tZ210L3NyYy9jb21wb25lbnRzL1JhZGFyVG9hc3QudHN4In0=