import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/components/pricing/formula-builder.tsx");import __vite__cjsImport0_react_jsxDevRuntime from "/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=9303f522"; const Fragment = __vite__cjsImport0_react_jsxDevRuntime["Fragment"]; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
import * as RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
let prevRefreshReg;
let prevRefreshSig;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  prevRefreshReg = window.$RefreshReg$;
  prevRefreshSig = window.$RefreshSig$;
  window.$RefreshReg$ = RefreshRuntime.getRefreshReg("C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx");
  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;
}
"use client";
var _s = $RefreshSig$();
import __vite__cjsImport3_react from "/node_modules/.vite/deps/react.js?v=9303f522"; const useState = __vite__cjsImport3_react["useState"]; const useMemo = __vite__cjsImport3_react["useMemo"]; const useCallback = __vite__cjsImport3_react["useCallback"];
import { Calculator, HelpCircle, Play, Check, AlertCircle } from "/node_modules/.vite/deps/lucide-react.js?v=9303f522";
import { Button } from "/src/components/ui/button.tsx";
import { Input } from "/src/components/ui/input.tsx";
import { Card } from "/src/components/ui/card.tsx";
import { Badge } from "/src/components/ui/badge.tsx";
import { cn } from "/src/lib/utils.ts";
const FORMULA_PRESETS = [
  { label: "+10%", formula: "current * 1.10", description: "Increase by 10%" },
  { label: "+15%", formula: "current * 1.15", description: "Increase by 15%" },
  { label: "+20%", formula: "current * 1.20", description: "Increase by 20%" },
  { label: "-10%", formula: "current * 0.90", description: "Decrease by 10%" },
  { label: "-15%", formula: "current * 0.85", description: "Decrease by 15%" },
  { label: "Round to .99", formula: "Math.floor(current) + 0.99", description: "Round down and add .99" }
];
function tokenize(formula) {
  const tokens = [];
  let i = 0;
  const len = formula.length;
  while (i < len) {
    const char = formula[i];
    if (/\s/.test(char)) {
      i++;
      continue;
    }
    if (/\d/.test(char) || char === "." && i + 1 < len && /\d/.test(formula[i + 1])) {
      let numStr = "";
      while (i < len && (/\d/.test(formula[i]) || formula[i] === ".")) {
        numStr += formula[i];
        i++;
      }
      const num = parseFloat(numStr);
      if (isNaN(num)) return null;
      tokens.push({ type: "number", value: num });
      continue;
    }
    if (["+", "-", "*", "/"].includes(char)) {
      tokens.push({ type: "operator", value: char });
      i++;
      continue;
    }
    if (["(", ")"].includes(char)) {
      tokens.push({ type: "paren", value: char });
      i++;
      continue;
    }
    if (/[a-zA-Z]/.test(char)) {
      let word = "";
      while (i < len && /[a-zA-Z.]/.test(formula[i])) {
        word += formula[i];
        i++;
      }
      if (word === "Math.floor") {
        if (formula[i] !== "(") return null;
        tokens.push({ type: "variable", value: "Math.floor" });
        continue;
      }
      if (word === "current" || word === "compare") {
        tokens.push({ type: "variable", value: word });
        continue;
      }
      return null;
    }
    return null;
  }
  return tokens;
}
function evaluateTokens(tokens, current, compare) {
  let pos = 0;
  function getValue(token) {
    if (token.type === "number") {
      return token.value;
    }
    if (token.type === "variable") {
      if (token.value === "current") return current;
      if (token.value === "compare") return compare;
    }
    return null;
  }
  function parseExpression() {
    let result2 = parseTerm();
    if (!result2.success) return result2;
    while (pos < tokens.length) {
      const token = tokens[pos];
      if (token.type === "operator" && (token.value === "+" || token.value === "-")) {
        pos++;
        const right = parseTerm();
        if (!right.success) return right;
        if (result2.value === null || right.value === null) {
          return { success: false, value: null, error: "Invalid operation with null value" };
        }
        result2.value = token.value === "+" ? result2.value + right.value : result2.value - right.value;
      } else {
        break;
      }
    }
    return result2;
  }
  function parseTerm() {
    let result2 = parseFactor();
    if (!result2.success) return result2;
    while (pos < tokens.length) {
      const token = tokens[pos];
      if (token.type === "operator" && (token.value === "*" || token.value === "/")) {
        pos++;
        const right = parseFactor();
        if (!right.success) return right;
        if (result2.value === null || right.value === null) {
          return { success: false, value: null, error: "Invalid operation with null value" };
        }
        if (token.value === "/" && right.value === 0) {
          return { success: false, value: null, error: "Division by zero" };
        }
        result2.value = token.value === "*" ? result2.value * right.value : result2.value / right.value;
      } else {
        break;
      }
    }
    return result2;
  }
  function parseFactor() {
    if (pos >= tokens.length) {
      return { success: false, value: null, error: "Unexpected end of expression" };
    }
    const token = tokens[pos];
    if (token.type === "variable" && token.value === "Math.floor") {
      pos++;
      if (pos >= tokens.length || tokens[pos].type !== "paren" || tokens[pos].value !== "(") {
        return { success: false, value: null, error: "Expected '(' after Math.floor" };
      }
      pos++;
      const inner = parseExpression();
      if (!inner.success) return inner;
      if (pos >= tokens.length || tokens[pos].type !== "paren" || tokens[pos].value !== ")") {
        return { success: false, value: null, error: "Expected ')' after Math.floor expression" };
      }
      pos++;
      return { success: true, value: inner.value !== null ? Math.floor(inner.value) : null };
    }
    if (token.type === "operator" && token.value === "-") {
      pos++;
      const factor = parseFactor();
      if (!factor.success) return factor;
      return { success: true, value: factor.value !== null ? -factor.value : null };
    }
    if (token.type === "paren" && token.value === "(") {
      pos++;
      const result2 = parseExpression();
      if (!result2.success) return result2;
      if (pos >= tokens.length || tokens[pos].type !== "paren" || tokens[pos].value !== ")") {
        return { success: false, value: null, error: "Missing closing parenthesis" };
      }
      pos++;
      return result2;
    }
    if (token.type === "number" || token.type === "variable") {
      const val = getValue(token);
      pos++;
      if (val === null && token.type === "variable" && token.value === "compare") {
        return { success: false, value: null, error: "Compare-at price is not available for this product" };
      }
      return { success: true, value: val };
    }
    return { success: false, value: null, error: `Unexpected token: ${token.value}` };
  }
  const result = parseExpression();
  if (result.success && pos < tokens.length) {
    return { success: false, value: null, error: "Invalid expression syntax" };
  }
  return result;
}
export function evaluateFormula(formula, current, compare) {
  if (!formula.trim()) return null;
  const tokens = tokenize(formula);
  if (!tokens || tokens.length === 0) return null;
  const result = evaluateTokens(tokens, current, compare);
  if (!result.success || result.value === null) return null;
  return Math.round(result.value * 100) / 100;
}
function validateFormula(formula) {
  if (!formula.trim()) {
    return "Please enter a formula";
  }
  const tokens = tokenize(formula);
  if (!tokens) {
    return "Invalid formula syntax. Only use numbers, +, -, *, /, parentheses, and variables (current, compare)";
  }
  if (tokens.length === 0) {
    return "Empty formula";
  }
  const result = evaluateTokens(tokens, 100, 150);
  if (!result.success) {
    return result.error || "Invalid formula";
  }
  return null;
}
export function FormulaBuilder({
  records,
  onRecordsChange,
  disabled = false
}) {
  _s();
  const [formula, setFormula] = useState("");
  const [error, setError] = useState(null);
  const [showPreview, setShowPreview] = useState(false);
  const [isApplying, setIsApplying] = useState(false);
  const [showHelp, setShowHelp] = useState(false);
  const previewResults = useMemo(() => {
    if (!formula.trim() || !showPreview) return [];
    const sampleRecords = records.slice(0, 5);
    return sampleRecords.map((record) => {
      const newPrice = evaluateFormula(formula, record.currentPrice, record.compareAtPrice);
      return {
        sku: record.sku,
        productTitle: record.productTitle,
        currentPrice: record.currentPrice,
        newPrice,
        change: newPrice !== null ? newPrice - record.currentPrice : null
      };
    });
  }, [formula, records, showPreview]);
  const handleFormulaChange = useCallback((e) => {
    setFormula(e.target.value);
    setError(null);
    setShowPreview(false);
  }, []);
  const handlePresetClick = useCallback((preset) => {
    setFormula(preset.formula);
    setError(null);
    setShowPreview(false);
  }, []);
  const handlePreview = useCallback(() => {
    const validationError = validateFormula(formula);
    if (validationError) {
      setError(validationError);
      setShowPreview(false);
      return;
    }
    setError(null);
    setShowPreview(true);
  }, [formula]);
  const handleApply = useCallback(() => {
    const validationError = validateFormula(formula);
    if (validationError) {
      setError(validationError);
      return;
    }
    setIsApplying(true);
    setError(null);
    try {
      const updatedRecords = records.map((record) => {
        const newPrice = evaluateFormula(formula, record.currentPrice, record.compareAtPrice);
        if (newPrice === null || newPrice <= 0) {
          return record;
        }
        const priceChange = newPrice - record.currentPrice;
        const priceChangePercent = record.currentPrice > 0 ? priceChange / record.currentPrice : 0;
        return {
          ...record,
          newPrice,
          priceChange,
          priceChangePercent
        };
      });
      onRecordsChange(updatedRecords);
      setShowPreview(false);
    } catch (err) {
      setError(err instanceof Error ? err.message : "Failed to apply formula");
    } finally {
      setIsApplying(false);
    }
  }, [formula, records, onRecordsChange]);
  const formatPrice = (value) => {
    return `$${value.toFixed(2)}`;
  };
  return /* @__PURE__ */ jsxDEV(Card, { className: "space-y-4", children: [
    /* @__PURE__ */ jsxDEV("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsxDEV(Calculator, { className: "h-5 w-5 text-primary" }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
          lineNumber: 455,
          columnNumber: 11
        }, this),
        /* @__PURE__ */ jsxDEV("h3", { className: "text-base font-semibold text-foreground", children: "Formula Builder" }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
          lineNumber: 456,
          columnNumber: 11
        }, this)
      ] }, void 0, true, {
        fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
        lineNumber: 454,
        columnNumber: 9
      }, this),
      /* @__PURE__ */ jsxDEV(
        Button,
        {
          variant: "ghost",
          size: "sm",
          onClick: () => setShowHelp(!showHelp),
          className: "gap-1.5",
          children: [
            /* @__PURE__ */ jsxDEV(HelpCircle, { className: "h-4 w-4" }, void 0, false, {
              fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
              lineNumber: 464,
              columnNumber: 11
            }, this),
            "Help"
          ]
        },
        void 0,
        true,
        {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
          lineNumber: 458,
          columnNumber: 9
        },
        this
      )
    ] }, void 0, true, {
      fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
      lineNumber: 453,
      columnNumber: 7
    }, this),
    showHelp && /* @__PURE__ */ jsxDEV("div", { className: "rounded-lg border border-border bg-muted/30 p-4 space-y-3", children: [
      /* @__PURE__ */ jsxDEV("h4", { className: "text-sm font-semibold text-foreground", children: "Available Variables" }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
        lineNumber: 472,
        columnNumber: 11
      }, this),
      /* @__PURE__ */ jsxDEV("ul", { className: "text-sm text-muted-foreground space-y-1", children: [
        /* @__PURE__ */ jsxDEV("li", { children: [
          /* @__PURE__ */ jsxDEV("code", { className: "bg-muted px-1.5 py-0.5 rounded text-xs", children: "current" }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
            lineNumber: 475,
            columnNumber: 15
          }, this),
          " - The current price of the product"
        ] }, void 0, true, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
          lineNumber: 474,
          columnNumber: 13
        }, this),
        /* @__PURE__ */ jsxDEV("li", { children: [
          /* @__PURE__ */ jsxDEV("code", { className: "bg-muted px-1.5 py-0.5 rounded text-xs", children: "compare" }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
            lineNumber: 478,
            columnNumber: 15
          }, this),
          " - The compare-at price (if available)"
        ] }, void 0, true, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
          lineNumber: 477,
          columnNumber: 13
        }, this)
      ] }, void 0, true, {
        fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
        lineNumber: 473,
        columnNumber: 11
      }, this),
      /* @__PURE__ */ jsxDEV("h4", { className: "text-sm font-semibold text-foreground mt-4", children: "Supported Operations" }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
        lineNumber: 482,
        columnNumber: 11
      }, this),
      /* @__PURE__ */ jsxDEV("ul", { className: "text-sm text-muted-foreground space-y-1", children: [
        /* @__PURE__ */ jsxDEV("li", { children: [
          "Addition: ",
          /* @__PURE__ */ jsxDEV("code", { className: "bg-muted px-1.5 py-0.5 rounded text-xs", children: "current + 5" }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
            lineNumber: 484,
            columnNumber: 27
          }, this)
        ] }, void 0, true, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
          lineNumber: 484,
          columnNumber: 13
        }, this),
        /* @__PURE__ */ jsxDEV("li", { children: [
          "Subtraction: ",
          /* @__PURE__ */ jsxDEV("code", { className: "bg-muted px-1.5 py-0.5 rounded text-xs", children: "current - 10" }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
            lineNumber: 485,
            columnNumber: 30
          }, this)
        ] }, void 0, true, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
          lineNumber: 485,
          columnNumber: 13
        }, this),
        /* @__PURE__ */ jsxDEV("li", { children: [
          "Multiplication: ",
          /* @__PURE__ */ jsxDEV("code", { className: "bg-muted px-1.5 py-0.5 rounded text-xs", children: "current * 1.15" }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
            lineNumber: 486,
            columnNumber: 33
          }, this)
        ] }, void 0, true, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
          lineNumber: 486,
          columnNumber: 13
        }, this),
        /* @__PURE__ */ jsxDEV("li", { children: [
          "Division: ",
          /* @__PURE__ */ jsxDEV("code", { className: "bg-muted px-1.5 py-0.5 rounded text-xs", children: "current / 2" }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
            lineNumber: 487,
            columnNumber: 27
          }, this)
        ] }, void 0, true, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
          lineNumber: 487,
          columnNumber: 13
        }, this),
        /* @__PURE__ */ jsxDEV("li", { children: [
          "Combinations: ",
          /* @__PURE__ */ jsxDEV("code", { className: "bg-muted px-1.5 py-0.5 rounded text-xs", children: "(current * 1.10) + 5" }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
            lineNumber: 488,
            columnNumber: 31
          }, this)
        ] }, void 0, true, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
          lineNumber: 488,
          columnNumber: 13
        }, this),
        /* @__PURE__ */ jsxDEV("li", { children: [
          "Rounding: ",
          /* @__PURE__ */ jsxDEV("code", { className: "bg-muted px-1.5 py-0.5 rounded text-xs", children: "Math.floor(current) + 0.99" }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
            lineNumber: 489,
            columnNumber: 27
          }, this)
        ] }, void 0, true, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
          lineNumber: 489,
          columnNumber: 13
        }, this)
      ] }, void 0, true, {
        fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
        lineNumber: 483,
        columnNumber: 11
      }, this),
      /* @__PURE__ */ jsxDEV("h4", { className: "text-sm font-semibold text-foreground mt-4", children: "Examples" }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
        lineNumber: 492,
        columnNumber: 11
      }, this),
      /* @__PURE__ */ jsxDEV("ul", { className: "text-sm text-muted-foreground space-y-1", children: [
        /* @__PURE__ */ jsxDEV("li", { children: [
          "10% increase: ",
          /* @__PURE__ */ jsxDEV("code", { className: "bg-muted px-1.5 py-0.5 rounded text-xs", children: "current * 1.10" }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
            lineNumber: 494,
            columnNumber: 31
          }, this)
        ] }, void 0, true, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
          lineNumber: 494,
          columnNumber: 13
        }, this),
        /* @__PURE__ */ jsxDEV("li", { children: [
          "15% decrease: ",
          /* @__PURE__ */ jsxDEV("code", { className: "bg-muted px-1.5 py-0.5 rounded text-xs", children: "current * 0.85" }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
            lineNumber: 495,
            columnNumber: 31
          }, this)
        ] }, void 0, true, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
          lineNumber: 495,
          columnNumber: 13
        }, this),
        /* @__PURE__ */ jsxDEV("li", { children: [
          "Add $5 markup: ",
          /* @__PURE__ */ jsxDEV("code", { className: "bg-muted px-1.5 py-0.5 rounded text-xs", children: "current + 5" }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
            lineNumber: 496,
            columnNumber: 32
          }, this)
        ] }, void 0, true, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
          lineNumber: 496,
          columnNumber: 13
        }, this),
        /* @__PURE__ */ jsxDEV("li", { children: [
          "Round to .99: ",
          /* @__PURE__ */ jsxDEV("code", { className: "bg-muted px-1.5 py-0.5 rounded text-xs", children: "Math.floor(current) + 0.99" }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
            lineNumber: 497,
            columnNumber: 31
          }, this)
        ] }, void 0, true, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
          lineNumber: 497,
          columnNumber: 13
        }, this)
      ] }, void 0, true, {
        fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
        lineNumber: 493,
        columnNumber: 11
      }, this)
    ] }, void 0, true, {
      fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
      lineNumber: 471,
      columnNumber: 7
    }, this),
    /* @__PURE__ */ jsxDEV("div", { className: "space-y-2", children: [
      /* @__PURE__ */ jsxDEV("p", { className: "text-sm text-muted-foreground", children: "Quick presets:" }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
        lineNumber: 504,
        columnNumber: 9
      }, this),
      /* @__PURE__ */ jsxDEV("div", { className: "flex flex-wrap gap-2", children: FORMULA_PRESETS.map(
        (preset) => /* @__PURE__ */ jsxDEV(
          Button,
          {
            variant: "outline",
            size: "sm",
            onClick: () => handlePresetClick(preset),
            disabled,
            title: preset.description,
            children: preset.label
          },
          preset.label,
          false,
          {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
            lineNumber: 507,
            columnNumber: 11
          },
          this
        )
      ) }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
        lineNumber: 505,
        columnNumber: 9
      }, this)
    ] }, void 0, true, {
      fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
      lineNumber: 503,
      columnNumber: 7
    }, this),
    /* @__PURE__ */ jsxDEV("div", { className: "space-y-2", children: [
      /* @__PURE__ */ jsxDEV("label", { className: "text-sm font-medium text-foreground", htmlFor: "formula-input", children: "Custom Formula" }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
        lineNumber: 523,
        columnNumber: 9
      }, this),
      /* @__PURE__ */ jsxDEV(
        Input,
        {
          id: "formula-input",
          type: "text",
          value: formula,
          onChange: handleFormulaChange,
          placeholder: "e.g., current * 1.15 or (current + 5) * 1.10",
          disabled,
          className: cn(error && "border-danger focus-visible:ring-danger")
        },
        void 0,
        false,
        {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
          lineNumber: 526,
          columnNumber: 9
        },
        this
      ),
      error && /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-2 text-sm text-danger", children: [
        /* @__PURE__ */ jsxDEV(AlertCircle, { className: "h-4 w-4" }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
          lineNumber: 537,
          columnNumber: 13
        }, this),
        error
      ] }, void 0, true, {
        fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
        lineNumber: 536,
        columnNumber: 9
      }, this)
    ] }, void 0, true, {
      fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
      lineNumber: 522,
      columnNumber: 7
    }, this),
    /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-2", children: [
      /* @__PURE__ */ jsxDEV(
        Button,
        {
          variant: "outline",
          size: "sm",
          onClick: handlePreview,
          disabled: disabled || !formula.trim() || records.length === 0,
          className: "gap-1.5",
          children: [
            /* @__PURE__ */ jsxDEV(Play, { className: "h-4 w-4" }, void 0, false, {
              fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
              lineNumber: 552,
              columnNumber: 11
            }, this),
            "Preview"
          ]
        },
        void 0,
        true,
        {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
          lineNumber: 545,
          columnNumber: 9
        },
        this
      ),
      /* @__PURE__ */ jsxDEV(
        Button,
        {
          variant: "primary",
          size: "sm",
          onClick: handleApply,
          disabled: disabled || !formula.trim() || records.length === 0 || isApplying,
          className: "gap-1.5",
          children: isApplying ? /* @__PURE__ */ jsxDEV(Fragment, { children: [
            /* @__PURE__ */ jsxDEV("div", { className: "h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent" }, void 0, false, {
              fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
              lineNumber: 564,
              columnNumber: 15
            }, this),
            "Applying..."
          ] }, void 0, true, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
            lineNumber: 563,
            columnNumber: 11
          }, this) : /* @__PURE__ */ jsxDEV(Fragment, { children: [
            /* @__PURE__ */ jsxDEV(Check, { className: "h-4 w-4" }, void 0, false, {
              fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
              lineNumber: 569,
              columnNumber: 15
            }, this),
            "Apply to All"
          ] }, void 0, true, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
            lineNumber: 568,
            columnNumber: 11
          }, this)
        },
        void 0,
        false,
        {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
          lineNumber: 555,
          columnNumber: 9
        },
        this
      ),
      records.length > 0 && /* @__PURE__ */ jsxDEV("span", { className: "text-sm text-muted-foreground ml-2", children: [
        records.length,
        " product",
        records.length !== 1 ? "s" : "",
        " will be updated"
      ] }, void 0, true, {
        fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
        lineNumber: 575,
        columnNumber: 9
      }, this)
    ] }, void 0, true, {
      fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
      lineNumber: 544,
      columnNumber: 7
    }, this),
    showPreview && previewResults.length > 0 && /* @__PURE__ */ jsxDEV("div", { className: "space-y-3", children: [
      /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsxDEV("h4", { className: "text-sm font-semibold text-foreground", children: "Preview" }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
          lineNumber: 585,
          columnNumber: 13
        }, this),
        /* @__PURE__ */ jsxDEV(Badge, { variant: "secondary", children: [
          "Showing ",
          previewResults.length,
          " of ",
          records.length
        ] }, void 0, true, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
          lineNumber: 586,
          columnNumber: 13
        }, this)
      ] }, void 0, true, {
        fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
        lineNumber: 584,
        columnNumber: 11
      }, this),
      /* @__PURE__ */ jsxDEV("div", { className: "rounded-lg border border-border overflow-hidden", children: /* @__PURE__ */ jsxDEV("table", { className: "w-full text-sm", children: [
        /* @__PURE__ */ jsxDEV("thead", { className: "bg-muted/50", children: /* @__PURE__ */ jsxDEV("tr", { children: [
          /* @__PURE__ */ jsxDEV("th", { className: "text-left px-4 py-2 font-medium text-muted-foreground", children: "Product" }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
            lineNumber: 594,
            columnNumber: 19
          }, this),
          /* @__PURE__ */ jsxDEV("th", { className: "text-right px-4 py-2 font-medium text-muted-foreground", children: "Current" }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
            lineNumber: 595,
            columnNumber: 19
          }, this),
          /* @__PURE__ */ jsxDEV("th", { className: "text-right px-4 py-2 font-medium text-muted-foreground", children: "New" }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
            lineNumber: 596,
            columnNumber: 19
          }, this),
          /* @__PURE__ */ jsxDEV("th", { className: "text-right px-4 py-2 font-medium text-muted-foreground", children: "Change" }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
            lineNumber: 597,
            columnNumber: 19
          }, this)
        ] }, void 0, true, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
          lineNumber: 593,
          columnNumber: 17
        }, this) }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
          lineNumber: 592,
          columnNumber: 15
        }, this),
        /* @__PURE__ */ jsxDEV("tbody", { className: "divide-y divide-border", children: previewResults.map(
          (result, idx) => /* @__PURE__ */ jsxDEV("tr", { className: "hover:bg-muted/30", children: [
            /* @__PURE__ */ jsxDEV("td", { className: "px-4 py-2", children: [
              /* @__PURE__ */ jsxDEV("div", { className: "truncate max-w-[200px]", title: result.productTitle, children: result.productTitle }, void 0, false, {
                fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
                lineNumber: 604,
                columnNumber: 23
              }, this),
              /* @__PURE__ */ jsxDEV("div", { className: "text-xs text-muted-foreground", children: result.sku }, void 0, false, {
                fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
                lineNumber: 607,
                columnNumber: 23
              }, this)
            ] }, void 0, true, {
              fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
              lineNumber: 603,
              columnNumber: 21
            }, this),
            /* @__PURE__ */ jsxDEV("td", { className: "text-right px-4 py-2 font-mono text-muted-foreground", children: formatPrice(result.currentPrice) }, void 0, false, {
              fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
              lineNumber: 609,
              columnNumber: 21
            }, this),
            /* @__PURE__ */ jsxDEV("td", { className: "text-right px-4 py-2 font-mono", children: result.newPrice !== null ? formatPrice(result.newPrice) : /* @__PURE__ */ jsxDEV("span", { className: "text-danger", children: "Error" }, void 0, false, {
              fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
              lineNumber: 616,
              columnNumber: 19
            }, this) }, void 0, false, {
              fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
              lineNumber: 612,
              columnNumber: 21
            }, this),
            /* @__PURE__ */ jsxDEV("td", { className: "text-right px-4 py-2", children: result.change !== null ? /* @__PURE__ */ jsxDEV(
              "span",
              {
                className: cn(
                  "font-mono",
                  result.change > 0 && "text-success",
                  result.change < 0 && "text-danger",
                  result.change === 0 && "text-muted-foreground"
                ),
                children: [
                  result.change > 0 ? "+" : "",
                  formatPrice(result.change)
                ]
              },
              void 0,
              true,
              {
                fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
                lineNumber: 621,
                columnNumber: 19
              },
              this
            ) : /* @__PURE__ */ jsxDEV("span", { className: "text-muted-foreground", children: "-" }, void 0, false, {
              fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
              lineNumber: 633,
              columnNumber: 19
            }, this) }, void 0, false, {
              fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
              lineNumber: 619,
              columnNumber: 21
            }, this)
          ] }, idx, true, {
            fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
            lineNumber: 602,
            columnNumber: 15
          }, this)
        ) }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
          lineNumber: 600,
          columnNumber: 15
        }, this)
      ] }, void 0, true, {
        fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
        lineNumber: 591,
        columnNumber: 13
      }, this) }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
        lineNumber: 590,
        columnNumber: 11
      }, this),
      records.length > 5 && /* @__PURE__ */ jsxDEV("p", { className: "text-xs text-muted-foreground text-center", children: [
        "... and ",
        records.length - 5,
        " more products"
      ] }, void 0, true, {
        fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
        lineNumber: 642,
        columnNumber: 9
      }, this)
    ] }, void 0, true, {
      fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
      lineNumber: 583,
      columnNumber: 7
    }, this),
    records.length === 0 && /* @__PURE__ */ jsxDEV("div", { className: "text-center py-4 text-sm text-muted-foreground", children: "No products loaded. Upload a pricing file first." }, void 0, false, {
      fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
      lineNumber: 651,
      columnNumber: 7
    }, this)
  ] }, void 0, true, {
    fileName: "C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx",
    lineNumber: 451,
    columnNumber: 5
  }, this);
}
_s(FormulaBuilder, "0zQJnU+TYPpYfmy4h5KlRH4agYc=");
_c = FormulaBuilder;
var _c;
$RefreshReg$(_c, "FormulaBuilder");
if (import.meta.hot && !inWebWorker) {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}
if (import.meta.hot && !inWebWorker) {
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("C:/Projects/Source 4 Industries/src/components/pricing/formula-builder.tsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}

//# sourceMappingURL=data:application/json;base64,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dUJBQUMsVUFBSyxXQUFVLHlCQUF3QixpQkFBeEM7QUFBQTtBQUFBO0FBQUE7QUFBQSxtQkFBeUMsS0FkN0M7QUFBQTtBQUFBO0FBQUE7QUFBQSxtQkFnQkE7QUFBQSxlQWpDT2lCLEtBQVQ7QUFBQTtBQUFBO0FBQUE7QUFBQSxpQkFrQ0E7QUFBQSxRQUNELEtBckNIO0FBQUE7QUFBQTtBQUFBO0FBQUEsZUFzQ0E7QUFBQSxXQS9DRjtBQUFBO0FBQUE7QUFBQTtBQUFBLGFBZ0RBLEtBakRGO0FBQUE7QUFBQTtBQUFBO0FBQUEsYUFrREE7QUFBQSxNQUNDdEMsUUFBUW5DLFNBQVMsS0FDaEIsdUJBQUMsT0FBRSxXQUFVLDZDQUEyQztBQUFBO0FBQUEsUUFDN0NtQyxRQUFRbkMsU0FBUztBQUFBLFFBQUU7QUFBQSxXQUQ5QjtBQUFBO0FBQUE7QUFBQTtBQUFBLGFBRUE7QUFBQSxTQTdESjtBQUFBO0FBQUE7QUFBQTtBQUFBLFdBK0RBO0FBQUEsSUFJRG1DLFFBQVFuQyxXQUFXLEtBQ2xCLHVCQUFDLFNBQUksV0FBVSxrREFBZ0QsZ0VBQS9EO0FBQUE7QUFBQTtBQUFBO0FBQUEsV0FFQTtBQUFBLE9BMU1KO0FBQUE7QUFBQTtBQUFBO0FBQUEsU0E0TUE7QUFFSjtBQUFDdkIsR0FsVGV5RCxnQkFBYztBQUFBd0MsS0FBZHhDO0FBQWMsSUFBQXdDO0FBQUFDLGFBQUFELElBQUEiLCJuYW1lcyI6WyJfcyIsIiRSZWZyZXNoU2lnJCIsInVzZVN0YXRlIiwidXNlTWVtbyIsInVzZUNhbGxiYWNrIiwiQ2FsY3VsYXRvciIsIkhlbHBDaXJjbGUiLCJQbGF5IiwiQ2hlY2siLCJBbGVydENpcmNsZSIsIkJ1dHRvbiIsIklucHV0IiwiQ2FyZCIsIkJhZGdlIiwiY24iLCJGT1JNVUxBX1BSRVNFVFMiLCJsYWJlbCIsImZvcm11bGEiLCJkZXNjcmlwdGlvbiIsInRva2VuaXplIiwidG9rZW5zIiwiaSIsImxlbiIsImxlbmd0aCIsImNoYXIiLCJ0ZXN0IiwibnVtU3RyIiwibnVtIiwicGFyc2VGbG9hdCIsImlzTmFOIiwicHVzaCIsInR5cGUiLCJ2YWx1ZSIsImluY2x1ZGVzIiwid29yZCIsImV2YWx1YXRlVG9rZW5zIiwiY3VycmVudCIsImNvbXBhcmUiLCJwb3MiLCJnZXRWYWx1ZSIsInRva2VuIiwicGFyc2VFeHByZXNzaW9uIiwicmVzdWx0IiwicGFyc2VUZXJtIiwic3VjY2VzcyIsInJpZ2h0IiwiZXJyb3IiLCJwYXJzZUZhY3RvciIsImlubmVyIiwiTWF0aCIsImZsb29yIiwiZmFjdG9yIiwidmFsIiwiZXZhbHVhdGVGb3JtdWxhIiwidHJpbSIsInJvdW5kIiwidmFsaWRhdGVGb3JtdWxhIiwiRm9ybXVsYUJ1aWxkZXIiLCJyZWNvcmRzIiwib25SZWNvcmRzQ2hhbmdlIiwiZGlzYWJsZWQiLCJzZXRGb3JtdWxhIiwic2V0RXJyb3IiLCJzaG93UHJldmlldyIsInNldFNob3dQcmV2aWV3IiwiaXNBcHBseWluZyIsInNldElzQXBwbHlpbmciLCJzaG93SGVscCIsInNldFNob3dIZWxwIiwicHJldmlld1Jlc3VsdHMiLCJzYW1wbGVSZWNvcmRzIiwic2xpY2UiLCJtYXAiLCJyZWNvcmQiLCJuZXdQcmljZSIsImN1cnJlbnRQcmljZSIsImNvbXBhcmVBdFByaWNlIiwic2t1IiwicHJvZHVjdFRpdGxlIiwiY2hhbmdlIiwiaGFuZGxlRm9ybXVsYUNoYW5nZSIsImUiLCJ0YXJnZXQiLCJoYW5kbGVQcmVzZXRDbGljayIsInByZXNldCIsImhhbmRsZVByZXZpZXciLCJ2YWxpZGF0aW9uRXJyb3IiLCJoYW5kbGVBcHBseSIsInVwZGF0ZWRSZWNvcmRzIiwicHJpY2VDaGFuZ2UiLCJwcmljZUNoYW5nZVBlcmNlbnQiLCJlcnIiLCJFcnJvciIsIm1lc3NhZ2UiLCJmb3JtYXRQcmljZSIsInRvRml4ZWQiLCJpZHgiLCJfYyIsIiRSZWZyZXNoUmVnJCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJmb3JtdWxhLWJ1aWxkZXIudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlTWVtbywgdXNlQ2FsbGJhY2sgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IENhbGN1bGF0b3IsIEhlbHBDaXJjbGUsIFBsYXksIENoZWNrLCBBbGVydENpcmNsZSB9IGZyb20gXCJsdWNpZGUtcmVhY3RcIjtcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvYnV0dG9uXCI7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvaW5wdXRcIjtcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2NhcmRcIjtcbmltcG9ydCB7IEJhZGdlIH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9iYWRnZVwiO1xuaW1wb3J0IHsgY24gfSBmcm9tIFwiQC9saWIvdXRpbHNcIjtcbmltcG9ydCB0eXBlIHsgUHJpY2VVcGRhdGVSZWNvcmQgfSBmcm9tIFwiQC9saWIvcHJpY2luZy1wcm9jZXNzb3JcIjtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVFlQRVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuaW50ZXJmYWNlIEZvcm11bGFCdWlsZGVyUHJvcHMge1xuICByZWNvcmRzOiBQcmljZVVwZGF0ZVJlY29yZFtdO1xuICBvblJlY29yZHNDaGFuZ2U6ICh1cGRhdGVkUmVjb3JkczogUHJpY2VVcGRhdGVSZWNvcmRbXSkgPT4gdm9pZDtcbiAgZGlzYWJsZWQ/OiBib29sZWFuO1xufVxuXG5pbnRlcmZhY2UgRm9ybXVsYVByZXNldCB7XG4gIGxhYmVsOiBzdHJpbmc7XG4gIGZvcm11bGE6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIFBhcnNlZFRva2VuIHtcbiAgdHlwZTogXCJudW1iZXJcIiB8IFwib3BlcmF0b3JcIiB8IFwidmFyaWFibGVcIiB8IFwicGFyZW5cIjtcbiAgdmFsdWU6IHN0cmluZyB8IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIEV2YWx1YXRpb25SZXN1bHQge1xuICBzdWNjZXNzOiBib29sZWFuO1xuICB2YWx1ZTogbnVtYmVyIHwgbnVsbDtcbiAgZXJyb3I/OiBzdHJpbmc7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEZPUk1VTEEgUFJFU0VUU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5jb25zdCBGT1JNVUxBX1BSRVNFVFM6IEZvcm11bGFQcmVzZXRbXSA9IFtcbiAgeyBsYWJlbDogXCIrMTAlXCIsIGZvcm11bGE6IFwiY3VycmVudCAqIDEuMTBcIiwgZGVzY3JpcHRpb246IFwiSW5jcmVhc2UgYnkgMTAlXCIgfSxcbiAgeyBsYWJlbDogXCIrMTUlXCIsIGZvcm11bGE6IFwiY3VycmVudCAqIDEuMTVcIiwgZGVzY3JpcHRpb246IFwiSW5jcmVhc2UgYnkgMTUlXCIgfSxcbiAgeyBsYWJlbDogXCIrMjAlXCIsIGZvcm11bGE6IFwiY3VycmVudCAqIDEuMjBcIiwgZGVzY3JpcHRpb246IFwiSW5jcmVhc2UgYnkgMjAlXCIgfSxcbiAgeyBsYWJlbDogXCItMTAlXCIsIGZvcm11bGE6IFwiY3VycmVudCAqIDAuOTBcIiwgZGVzY3JpcHRpb246IFwiRGVjcmVhc2UgYnkgMTAlXCIgfSxcbiAgeyBsYWJlbDogXCItMTUlXCIsIGZvcm11bGE6IFwiY3VycmVudCAqIDAuODVcIiwgZGVzY3JpcHRpb246IFwiRGVjcmVhc2UgYnkgMTUlXCIgfSxcbiAgeyBsYWJlbDogXCJSb3VuZCB0byAuOTlcIiwgZm9ybXVsYTogXCJNYXRoLmZsb29yKGN1cnJlbnQpICsgMC45OVwiLCBkZXNjcmlwdGlvbjogXCJSb3VuZCBkb3duIGFuZCBhZGQgLjk5XCIgfSxcbl07XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFNBRkUgRk9STVVMQSBQQVJTRVIgJiBFVkFMVUFUT1Jcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBUb2tlbml6ZSBhIGZvcm11bGEgc3RyaW5nIGludG8gdG9rZW5zXG4gKiBPbmx5IGFsbG93czogbnVtYmVycywgb3BlcmF0b3JzICgrLCAtLCAqLCAvKSwgcGFyZW50aGVzZXMsIGFuZCB2YXJpYWJsZXMgKGN1cnJlbnQsIGNvbXBhcmUpXG4gKi9cbmZ1bmN0aW9uIHRva2VuaXplKGZvcm11bGE6IHN0cmluZyk6IFBhcnNlZFRva2VuW10gfCBudWxsIHtcbiAgY29uc3QgdG9rZW5zOiBQYXJzZWRUb2tlbltdID0gW107XG4gIGxldCBpID0gMDtcbiAgY29uc3QgbGVuID0gZm9ybXVsYS5sZW5ndGg7XG5cbiAgd2hpbGUgKGkgPCBsZW4pIHtcbiAgICBjb25zdCBjaGFyID0gZm9ybXVsYVtpXTtcblxuICAgIC8vIFNraXAgd2hpdGVzcGFjZVxuICAgIGlmICgvXFxzLy50ZXN0KGNoYXIpKSB7XG4gICAgICBpKys7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBOdW1iZXJzIChpbmNsdWRpbmcgZGVjaW1hbHMpXG4gICAgaWYgKC9cXGQvLnRlc3QoY2hhcikgfHwgKGNoYXIgPT09IFwiLlwiICYmIGkgKyAxIDwgbGVuICYmIC9cXGQvLnRlc3QoZm9ybXVsYVtpICsgMV0pKSkge1xuICAgICAgbGV0IG51bVN0ciA9IFwiXCI7XG4gICAgICB3aGlsZSAoaSA8IGxlbiAmJiAoL1xcZC8udGVzdChmb3JtdWxhW2ldKSB8fCBmb3JtdWxhW2ldID09PSBcIi5cIikpIHtcbiAgICAgICAgbnVtU3RyICs9IGZvcm11bGFbaV07XG4gICAgICAgIGkrKztcbiAgICAgIH1cbiAgICAgIGNvbnN0IG51bSA9IHBhcnNlRmxvYXQobnVtU3RyKTtcbiAgICAgIGlmIChpc05hTihudW0pKSByZXR1cm4gbnVsbDtcbiAgICAgIHRva2Vucy5wdXNoKHsgdHlwZTogXCJudW1iZXJcIiwgdmFsdWU6IG51bSB9KTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIE9wZXJhdG9yc1xuICAgIGlmIChbXCIrXCIsIFwiLVwiLCBcIipcIiwgXCIvXCJdLmluY2x1ZGVzKGNoYXIpKSB7XG4gICAgICB0b2tlbnMucHVzaCh7IHR5cGU6IFwib3BlcmF0b3JcIiwgdmFsdWU6IGNoYXIgfSk7XG4gICAgICBpKys7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBQYXJlbnRoZXNlc1xuICAgIGlmIChbXCIoXCIsIFwiKVwiXS5pbmNsdWRlcyhjaGFyKSkge1xuICAgICAgdG9rZW5zLnB1c2goeyB0eXBlOiBcInBhcmVuXCIsIHZhbHVlOiBjaGFyIH0pO1xuICAgICAgaSsrO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gVmFyaWFibGVzIGFuZCBNYXRoIGZ1bmN0aW9uc1xuICAgIGlmICgvW2EtekEtWl0vLnRlc3QoY2hhcikpIHtcbiAgICAgIGxldCB3b3JkID0gXCJcIjtcbiAgICAgIHdoaWxlIChpIDwgbGVuICYmIC9bYS16QS1aLl0vLnRlc3QoZm9ybXVsYVtpXSkpIHtcbiAgICAgICAgd29yZCArPSBmb3JtdWxhW2ldO1xuICAgICAgICBpKys7XG4gICAgICB9XG5cbiAgICAgIC8vIEhhbmRsZSBNYXRoLmZsb29yIHNwZWNpYWwgY2FzZVxuICAgICAgaWYgKHdvcmQgPT09IFwiTWF0aC5mbG9vclwiKSB7XG4gICAgICAgIC8vIFBhcnNlIHRoZSBwYXJlbnRoZXNpemVkIGV4cHJlc3Npb25cbiAgICAgICAgaWYgKGZvcm11bGFbaV0gIT09IFwiKFwiKSByZXR1cm4gbnVsbDtcbiAgICAgICAgdG9rZW5zLnB1c2goeyB0eXBlOiBcInZhcmlhYmxlXCIsIHZhbHVlOiBcIk1hdGguZmxvb3JcIiB9KTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIE9ubHkgYWxsb3cgJ2N1cnJlbnQnIGFuZCAnY29tcGFyZScgYXMgdmFyaWFibGVzXG4gICAgICBpZiAod29yZCA9PT0gXCJjdXJyZW50XCIgfHwgd29yZCA9PT0gXCJjb21wYXJlXCIpIHtcbiAgICAgICAgdG9rZW5zLnB1c2goeyB0eXBlOiBcInZhcmlhYmxlXCIsIHZhbHVlOiB3b3JkIH0pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gVW5rbm93biB3b3JkXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBVbmtub3duIGNoYXJhY3RlclxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmV0dXJuIHRva2Vucztcbn1cblxuLyoqXG4gKiBFdmFsdWF0ZSBhIHRva2VuaXplZCBleHByZXNzaW9uIHVzaW5nIGEgc2ltcGxlIHJlY3Vyc2l2ZSBkZXNjZW50IHBhcnNlclxuICogU3VwcG9ydHM6ICssIC0sICosIC8sIHBhcmVudGhlc2VzLCBhbmQgdmFyaWFibGVzXG4gKi9cbmZ1bmN0aW9uIGV2YWx1YXRlVG9rZW5zKFxuICB0b2tlbnM6IFBhcnNlZFRva2VuW10sXG4gIGN1cnJlbnQ6IG51bWJlcixcbiAgY29tcGFyZTogbnVtYmVyIHwgbnVsbFxuKTogRXZhbHVhdGlvblJlc3VsdCB7XG4gIGxldCBwb3MgPSAwO1xuXG4gIGZ1bmN0aW9uIGdldFZhbHVlKHRva2VuOiBQYXJzZWRUb2tlbik6IG51bWJlciB8IG51bGwge1xuICAgIGlmICh0b2tlbi50eXBlID09PSBcIm51bWJlclwiKSB7XG4gICAgICByZXR1cm4gdG9rZW4udmFsdWUgYXMgbnVtYmVyO1xuICAgIH1cbiAgICBpZiAodG9rZW4udHlwZSA9PT0gXCJ2YXJpYWJsZVwiKSB7XG4gICAgICBpZiAodG9rZW4udmFsdWUgPT09IFwiY3VycmVudFwiKSByZXR1cm4gY3VycmVudDtcbiAgICAgIGlmICh0b2tlbi52YWx1ZSA9PT0gXCJjb21wYXJlXCIpIHJldHVybiBjb21wYXJlO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIFBhcnNlIGV4cHJlc3Npb24gKGhhbmRsZXMgKyBhbmQgLSlcbiAgZnVuY3Rpb24gcGFyc2VFeHByZXNzaW9uKCk6IEV2YWx1YXRpb25SZXN1bHQge1xuICAgIGxldCByZXN1bHQgPSBwYXJzZVRlcm0oKTtcbiAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSByZXR1cm4gcmVzdWx0O1xuXG4gICAgd2hpbGUgKHBvcyA8IHRva2Vucy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHRva2VuID0gdG9rZW5zW3Bvc107XG4gICAgICBpZiAodG9rZW4udHlwZSA9PT0gXCJvcGVyYXRvclwiICYmICh0b2tlbi52YWx1ZSA9PT0gXCIrXCIgfHwgdG9rZW4udmFsdWUgPT09IFwiLVwiKSkge1xuICAgICAgICBwb3MrKztcbiAgICAgICAgY29uc3QgcmlnaHQgPSBwYXJzZVRlcm0oKTtcbiAgICAgICAgaWYgKCFyaWdodC5zdWNjZXNzKSByZXR1cm4gcmlnaHQ7XG5cbiAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSA9PT0gbnVsbCB8fCByaWdodC52YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCB2YWx1ZTogbnVsbCwgZXJyb3I6IFwiSW52YWxpZCBvcGVyYXRpb24gd2l0aCBudWxsIHZhbHVlXCIgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlc3VsdC52YWx1ZSA9IHRva2VuLnZhbHVlID09PSBcIitcIlxuICAgICAgICAgID8gcmVzdWx0LnZhbHVlICsgcmlnaHQudmFsdWVcbiAgICAgICAgICA6IHJlc3VsdC52YWx1ZSAtIHJpZ2h0LnZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8vIFBhcnNlIHRlcm0gKGhhbmRsZXMgKiBhbmQgLylcbiAgZnVuY3Rpb24gcGFyc2VUZXJtKCk6IEV2YWx1YXRpb25SZXN1bHQge1xuICAgIGxldCByZXN1bHQgPSBwYXJzZUZhY3RvcigpO1xuICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHJldHVybiByZXN1bHQ7XG5cbiAgICB3aGlsZSAocG9zIDwgdG9rZW5zLmxlbmd0aCkge1xuICAgICAgY29uc3QgdG9rZW4gPSB0b2tlbnNbcG9zXTtcbiAgICAgIGlmICh0b2tlbi50eXBlID09PSBcIm9wZXJhdG9yXCIgJiYgKHRva2VuLnZhbHVlID09PSBcIipcIiB8fCB0b2tlbi52YWx1ZSA9PT0gXCIvXCIpKSB7XG4gICAgICAgIHBvcysrO1xuICAgICAgICBjb25zdCByaWdodCA9IHBhcnNlRmFjdG9yKCk7XG4gICAgICAgIGlmICghcmlnaHQuc3VjY2VzcykgcmV0dXJuIHJpZ2h0O1xuXG4gICAgICAgIGlmIChyZXN1bHQudmFsdWUgPT09IG51bGwgfHwgcmlnaHQudmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgdmFsdWU6IG51bGwsIGVycm9yOiBcIkludmFsaWQgb3BlcmF0aW9uIHdpdGggbnVsbCB2YWx1ZVwiIH07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodG9rZW4udmFsdWUgPT09IFwiL1wiICYmIHJpZ2h0LnZhbHVlID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIHZhbHVlOiBudWxsLCBlcnJvcjogXCJEaXZpc2lvbiBieSB6ZXJvXCIgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlc3VsdC52YWx1ZSA9IHRva2VuLnZhbHVlID09PSBcIipcIlxuICAgICAgICAgID8gcmVzdWx0LnZhbHVlICogcmlnaHQudmFsdWVcbiAgICAgICAgICA6IHJlc3VsdC52YWx1ZSAvIHJpZ2h0LnZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8vIFBhcnNlIGZhY3RvciAoaGFuZGxlcyBudW1iZXJzLCB2YXJpYWJsZXMsIHBhcmVudGhlc2VzLCBNYXRoLmZsb29yKVxuICBmdW5jdGlvbiBwYXJzZUZhY3RvcigpOiBFdmFsdWF0aW9uUmVzdWx0IHtcbiAgICBpZiAocG9zID49IHRva2Vucy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCB2YWx1ZTogbnVsbCwgZXJyb3I6IFwiVW5leHBlY3RlZCBlbmQgb2YgZXhwcmVzc2lvblwiIH07XG4gICAgfVxuXG4gICAgY29uc3QgdG9rZW4gPSB0b2tlbnNbcG9zXTtcblxuICAgIC8vIEhhbmRsZSBNYXRoLmZsb29yXG4gICAgaWYgKHRva2VuLnR5cGUgPT09IFwidmFyaWFibGVcIiAmJiB0b2tlbi52YWx1ZSA9PT0gXCJNYXRoLmZsb29yXCIpIHtcbiAgICAgIHBvcysrO1xuICAgICAgaWYgKHBvcyA+PSB0b2tlbnMubGVuZ3RoIHx8IHRva2Vuc1twb3NdLnR5cGUgIT09IFwicGFyZW5cIiB8fCB0b2tlbnNbcG9zXS52YWx1ZSAhPT0gXCIoXCIpIHtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIHZhbHVlOiBudWxsLCBlcnJvcjogXCJFeHBlY3RlZCAnKCcgYWZ0ZXIgTWF0aC5mbG9vclwiIH07XG4gICAgICB9XG4gICAgICBwb3MrKzsgLy8gY29uc3VtZSAnKCdcbiAgICAgIGNvbnN0IGlubmVyID0gcGFyc2VFeHByZXNzaW9uKCk7XG4gICAgICBpZiAoIWlubmVyLnN1Y2Nlc3MpIHJldHVybiBpbm5lcjtcbiAgICAgIGlmIChwb3MgPj0gdG9rZW5zLmxlbmd0aCB8fCB0b2tlbnNbcG9zXS50eXBlICE9PSBcInBhcmVuXCIgfHwgdG9rZW5zW3Bvc10udmFsdWUgIT09IFwiKVwiKSB7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCB2YWx1ZTogbnVsbCwgZXJyb3I6IFwiRXhwZWN0ZWQgJyknIGFmdGVyIE1hdGguZmxvb3IgZXhwcmVzc2lvblwiIH07XG4gICAgICB9XG4gICAgICBwb3MrKzsgLy8gY29uc3VtZSAnKSdcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIHZhbHVlOiBpbm5lci52YWx1ZSAhPT0gbnVsbCA/IE1hdGguZmxvb3IoaW5uZXIudmFsdWUpIDogbnVsbCB9O1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSB1bmFyeSBtaW51c1xuICAgIGlmICh0b2tlbi50eXBlID09PSBcIm9wZXJhdG9yXCIgJiYgdG9rZW4udmFsdWUgPT09IFwiLVwiKSB7XG4gICAgICBwb3MrKztcbiAgICAgIGNvbnN0IGZhY3RvciA9IHBhcnNlRmFjdG9yKCk7XG4gICAgICBpZiAoIWZhY3Rvci5zdWNjZXNzKSByZXR1cm4gZmFjdG9yO1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgdmFsdWU6IGZhY3Rvci52YWx1ZSAhPT0gbnVsbCA/IC1mYWN0b3IudmFsdWUgOiBudWxsIH07XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIHBhcmVudGhlc2VzXG4gICAgaWYgKHRva2VuLnR5cGUgPT09IFwicGFyZW5cIiAmJiB0b2tlbi52YWx1ZSA9PT0gXCIoXCIpIHtcbiAgICAgIHBvcysrO1xuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VFeHByZXNzaW9uKCk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSByZXR1cm4gcmVzdWx0O1xuICAgICAgaWYgKHBvcyA+PSB0b2tlbnMubGVuZ3RoIHx8IHRva2Vuc1twb3NdLnR5cGUgIT09IFwicGFyZW5cIiB8fCB0b2tlbnNbcG9zXS52YWx1ZSAhPT0gXCIpXCIpIHtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIHZhbHVlOiBudWxsLCBlcnJvcjogXCJNaXNzaW5nIGNsb3NpbmcgcGFyZW50aGVzaXNcIiB9O1xuICAgICAgfVxuICAgICAgcG9zKys7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSBudW1iZXJzIGFuZCB2YXJpYWJsZXNcbiAgICBpZiAodG9rZW4udHlwZSA9PT0gXCJudW1iZXJcIiB8fCB0b2tlbi50eXBlID09PSBcInZhcmlhYmxlXCIpIHtcbiAgICAgIGNvbnN0IHZhbCA9IGdldFZhbHVlKHRva2VuKTtcbiAgICAgIHBvcysrO1xuICAgICAgaWYgKHZhbCA9PT0gbnVsbCAmJiB0b2tlbi50eXBlID09PSBcInZhcmlhYmxlXCIgJiYgdG9rZW4udmFsdWUgPT09IFwiY29tcGFyZVwiKSB7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCB2YWx1ZTogbnVsbCwgZXJyb3I6IFwiQ29tcGFyZS1hdCBwcmljZSBpcyBub3QgYXZhaWxhYmxlIGZvciB0aGlzIHByb2R1Y3RcIiB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgdmFsdWU6IHZhbCB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCB2YWx1ZTogbnVsbCwgZXJyb3I6IGBVbmV4cGVjdGVkIHRva2VuOiAke3Rva2VuLnZhbHVlfWAgfTtcbiAgfVxuXG4gIGNvbnN0IHJlc3VsdCA9IHBhcnNlRXhwcmVzc2lvbigpO1xuXG4gIC8vIENoZWNrIGlmIGFsbCB0b2tlbnMgd2VyZSBjb25zdW1lZFxuICBpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgcG9zIDwgdG9rZW5zLmxlbmd0aCkge1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCB2YWx1ZTogbnVsbCwgZXJyb3I6IFwiSW52YWxpZCBleHByZXNzaW9uIHN5bnRheFwiIH07XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIFNhZmVseSBldmFsdWF0ZSBhIHByaWNpbmcgZm9ybXVsYVxuICogUmV0dXJucyB0aGUgY2FsY3VsYXRlZCB2YWx1ZSByb3VuZGVkIHRvIDIgZGVjaW1hbCBwbGFjZXMsIG9yIG51bGwgaWYgaW52YWxpZFxuICovXG5leHBvcnQgZnVuY3Rpb24gZXZhbHVhdGVGb3JtdWxhKFxuICBmb3JtdWxhOiBzdHJpbmcsXG4gIGN1cnJlbnQ6IG51bWJlcixcbiAgY29tcGFyZTogbnVtYmVyIHwgbnVsbFxuKTogbnVtYmVyIHwgbnVsbCB7XG4gIGlmICghZm9ybXVsYS50cmltKCkpIHJldHVybiBudWxsO1xuXG4gIGNvbnN0IHRva2VucyA9IHRva2VuaXplKGZvcm11bGEpO1xuICBpZiAoIXRva2VucyB8fCB0b2tlbnMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcblxuICBjb25zdCByZXN1bHQgPSBldmFsdWF0ZVRva2Vucyh0b2tlbnMsIGN1cnJlbnQsIGNvbXBhcmUpO1xuICBpZiAoIXJlc3VsdC5zdWNjZXNzIHx8IHJlc3VsdC52YWx1ZSA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XG5cbiAgLy8gUm91bmQgdG8gMiBkZWNpbWFsIHBsYWNlc1xuICByZXR1cm4gTWF0aC5yb3VuZChyZXN1bHQudmFsdWUgKiAxMDApIC8gMTAwO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlIGEgZm9ybXVsYSBhbmQgcmV0dXJuIGFuIGVycm9yIG1lc3NhZ2UgaWYgaW52YWxpZFxuICovXG5mdW5jdGlvbiB2YWxpZGF0ZUZvcm11bGEoZm9ybXVsYTogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gIGlmICghZm9ybXVsYS50cmltKCkpIHtcbiAgICByZXR1cm4gXCJQbGVhc2UgZW50ZXIgYSBmb3JtdWxhXCI7XG4gIH1cblxuICBjb25zdCB0b2tlbnMgPSB0b2tlbml6ZShmb3JtdWxhKTtcbiAgaWYgKCF0b2tlbnMpIHtcbiAgICByZXR1cm4gXCJJbnZhbGlkIGZvcm11bGEgc3ludGF4LiBPbmx5IHVzZSBudW1iZXJzLCArLCAtLCAqLCAvLCBwYXJlbnRoZXNlcywgYW5kIHZhcmlhYmxlcyAoY3VycmVudCwgY29tcGFyZSlcIjtcbiAgfVxuXG4gIGlmICh0b2tlbnMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIFwiRW1wdHkgZm9ybXVsYVwiO1xuICB9XG5cbiAgLy8gVGVzdCBldmFsdWF0aW9uIHdpdGggc2FtcGxlIHZhbHVlc1xuICBjb25zdCByZXN1bHQgPSBldmFsdWF0ZVRva2Vucyh0b2tlbnMsIDEwMCwgMTUwKTtcbiAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgIHJldHVybiByZXN1bHQuZXJyb3IgfHwgXCJJbnZhbGlkIGZvcm11bGFcIjtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBDT01QT05FTlRcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGZ1bmN0aW9uIEZvcm11bGFCdWlsZGVyKHtcbiAgcmVjb3JkcyxcbiAgb25SZWNvcmRzQ2hhbmdlLFxuICBkaXNhYmxlZCA9IGZhbHNlLFxufTogRm9ybXVsYUJ1aWxkZXJQcm9wcykge1xuICBjb25zdCBbZm9ybXVsYSwgc2V0Rm9ybXVsYV0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW3Nob3dQcmV2aWV3LCBzZXRTaG93UHJldmlld10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpc0FwcGx5aW5nLCBzZXRJc0FwcGx5aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Nob3dIZWxwLCBzZXRTaG93SGVscF0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgLy8gQ2FsY3VsYXRlIHByZXZpZXcgZm9yIGZpcnN0IGZldyByZWNvcmRzXG4gIGNvbnN0IHByZXZpZXdSZXN1bHRzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKCFmb3JtdWxhLnRyaW0oKSB8fCAhc2hvd1ByZXZpZXcpIHJldHVybiBbXTtcblxuICAgIGNvbnN0IHNhbXBsZVJlY29yZHMgPSByZWNvcmRzLnNsaWNlKDAsIDUpO1xuICAgIHJldHVybiBzYW1wbGVSZWNvcmRzLm1hcCgocmVjb3JkKSA9PiB7XG4gICAgICBjb25zdCBuZXdQcmljZSA9IGV2YWx1YXRlRm9ybXVsYShmb3JtdWxhLCByZWNvcmQuY3VycmVudFByaWNlLCByZWNvcmQuY29tcGFyZUF0UHJpY2UpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc2t1OiByZWNvcmQuc2t1LFxuICAgICAgICBwcm9kdWN0VGl0bGU6IHJlY29yZC5wcm9kdWN0VGl0bGUsXG4gICAgICAgIGN1cnJlbnRQcmljZTogcmVjb3JkLmN1cnJlbnRQcmljZSxcbiAgICAgICAgbmV3UHJpY2UsXG4gICAgICAgIGNoYW5nZTogbmV3UHJpY2UgIT09IG51bGwgPyBuZXdQcmljZSAtIHJlY29yZC5jdXJyZW50UHJpY2UgOiBudWxsLFxuICAgICAgfTtcbiAgICB9KTtcbiAgfSwgW2Zvcm11bGEsIHJlY29yZHMsIHNob3dQcmV2aWV3XSk7XG5cbiAgLy8gSGFuZGxlIGZvcm11bGEgaW5wdXQgY2hhbmdlXG4gIGNvbnN0IGhhbmRsZUZvcm11bGFDaGFuZ2UgPSB1c2VDYWxsYmFjaygoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICBzZXRGb3JtdWxhKGUudGFyZ2V0LnZhbHVlKTtcbiAgICBzZXRFcnJvcihudWxsKTtcbiAgICBzZXRTaG93UHJldmlldyhmYWxzZSk7XG4gIH0sIFtdKTtcblxuICAvLyBIYW5kbGUgcHJlc2V0IGNsaWNrXG4gIGNvbnN0IGhhbmRsZVByZXNldENsaWNrID0gdXNlQ2FsbGJhY2soKHByZXNldDogRm9ybXVsYVByZXNldCkgPT4ge1xuICAgIHNldEZvcm11bGEocHJlc2V0LmZvcm11bGEpO1xuICAgIHNldEVycm9yKG51bGwpO1xuICAgIHNldFNob3dQcmV2aWV3KGZhbHNlKTtcbiAgfSwgW10pO1xuXG4gIC8vIEhhbmRsZSBwcmV2aWV3XG4gIGNvbnN0IGhhbmRsZVByZXZpZXcgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdGlvbkVycm9yID0gdmFsaWRhdGVGb3JtdWxhKGZvcm11bGEpO1xuICAgIGlmICh2YWxpZGF0aW9uRXJyb3IpIHtcbiAgICAgIHNldEVycm9yKHZhbGlkYXRpb25FcnJvcik7XG4gICAgICBzZXRTaG93UHJldmlldyhmYWxzZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHNldEVycm9yKG51bGwpO1xuICAgIHNldFNob3dQcmV2aWV3KHRydWUpO1xuICB9LCBbZm9ybXVsYV0pO1xuXG4gIC8vIEhhbmRsZSBhcHBseVxuICBjb25zdCBoYW5kbGVBcHBseSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBjb25zdCB2YWxpZGF0aW9uRXJyb3IgPSB2YWxpZGF0ZUZvcm11bGEoZm9ybXVsYSk7XG4gICAgaWYgKHZhbGlkYXRpb25FcnJvcikge1xuICAgICAgc2V0RXJyb3IodmFsaWRhdGlvbkVycm9yKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzZXRJc0FwcGx5aW5nKHRydWUpO1xuICAgIHNldEVycm9yKG51bGwpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVwZGF0ZWRSZWNvcmRzID0gcmVjb3Jkcy5tYXAoKHJlY29yZCkgPT4ge1xuICAgICAgICBjb25zdCBuZXdQcmljZSA9IGV2YWx1YXRlRm9ybXVsYShmb3JtdWxhLCByZWNvcmQuY3VycmVudFByaWNlLCByZWNvcmQuY29tcGFyZUF0UHJpY2UpO1xuICAgICAgICBpZiAobmV3UHJpY2UgPT09IG51bGwgfHwgbmV3UHJpY2UgPD0gMCkge1xuICAgICAgICAgIC8vIEtlZXAgb3JpZ2luYWwgaWYgZm9ybXVsYSBldmFsdWF0aW9uIGZhaWxzIG9yIHJlc3VsdHMgaW4gaW52YWxpZCBwcmljZVxuICAgICAgICAgIHJldHVybiByZWNvcmQ7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwcmljZUNoYW5nZSA9IG5ld1ByaWNlIC0gcmVjb3JkLmN1cnJlbnRQcmljZTtcbiAgICAgICAgY29uc3QgcHJpY2VDaGFuZ2VQZXJjZW50ID1cbiAgICAgICAgICByZWNvcmQuY3VycmVudFByaWNlID4gMCA/IHByaWNlQ2hhbmdlIC8gcmVjb3JkLmN1cnJlbnRQcmljZSA6IDA7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5yZWNvcmQsXG4gICAgICAgICAgbmV3UHJpY2UsXG4gICAgICAgICAgcHJpY2VDaGFuZ2UsXG4gICAgICAgICAgcHJpY2VDaGFuZ2VQZXJjZW50LFxuICAgICAgICB9O1xuICAgICAgfSk7XG5cbiAgICAgIG9uUmVjb3Jkc0NoYW5nZSh1cGRhdGVkUmVjb3Jkcyk7XG4gICAgICBzZXRTaG93UHJldmlldyhmYWxzZSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBzZXRFcnJvcihlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWQgdG8gYXBwbHkgZm9ybXVsYVwiKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNBcHBseWluZyhmYWxzZSk7XG4gICAgfVxuICB9LCBbZm9ybXVsYSwgcmVjb3Jkcywgb25SZWNvcmRzQ2hhbmdlXSk7XG5cbiAgLy8gRm9ybWF0IGN1cnJlbmN5XG4gIGNvbnN0IGZvcm1hdFByaWNlID0gKHZhbHVlOiBudW1iZXIpOiBzdHJpbmcgPT4ge1xuICAgIHJldHVybiBgJCR7dmFsdWUudG9GaXhlZCgyKX1gO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPENhcmQgY2xhc3NOYW1lPVwic3BhY2UteS00XCI+XG4gICAgICB7LyogSGVhZGVyICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW5cIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgIDxDYWxjdWxhdG9yIGNsYXNzTmFtZT1cImgtNSB3LTUgdGV4dC1wcmltYXJ5XCIgLz5cbiAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC1iYXNlIGZvbnQtc2VtaWJvbGQgdGV4dC1mb3JlZ3JvdW5kXCI+Rm9ybXVsYSBCdWlsZGVyPC9oMz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxCdXR0b25cbiAgICAgICAgICB2YXJpYW50PVwiZ2hvc3RcIlxuICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2hvd0hlbHAoIXNob3dIZWxwKX1cbiAgICAgICAgICBjbGFzc05hbWU9XCJnYXAtMS41XCJcbiAgICAgICAgPlxuICAgICAgICAgIDxIZWxwQ2lyY2xlIGNsYXNzTmFtZT1cImgtNCB3LTRcIiAvPlxuICAgICAgICAgIEhlbHBcbiAgICAgICAgPC9CdXR0b24+XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIEhlbHAgc2VjdGlvbiAqL31cbiAgICAgIHtzaG93SGVscCAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWJvcmRlciBiZy1tdXRlZC8zMCBwLTQgc3BhY2UteS0zXCI+XG4gICAgICAgICAgPGg0IGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1zZW1pYm9sZCB0ZXh0LWZvcmVncm91bmRcIj5BdmFpbGFibGUgVmFyaWFibGVzPC9oND5cbiAgICAgICAgICA8dWwgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LW11dGVkLWZvcmVncm91bmQgc3BhY2UteS0xXCI+XG4gICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgIDxjb2RlIGNsYXNzTmFtZT1cImJnLW11dGVkIHB4LTEuNSBweS0wLjUgcm91bmRlZCB0ZXh0LXhzXCI+Y3VycmVudDwvY29kZT4gLSBUaGUgY3VycmVudCBwcmljZSBvZiB0aGUgcHJvZHVjdFxuICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgPGNvZGUgY2xhc3NOYW1lPVwiYmctbXV0ZWQgcHgtMS41IHB5LTAuNSByb3VuZGVkIHRleHQteHNcIj5jb21wYXJlPC9jb2RlPiAtIFRoZSBjb21wYXJlLWF0IHByaWNlIChpZiBhdmFpbGFibGUpXG4gICAgICAgICAgICA8L2xpPlxuICAgICAgICAgIDwvdWw+XG5cbiAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LXNlbWlib2xkIHRleHQtZm9yZWdyb3VuZCBtdC00XCI+U3VwcG9ydGVkIE9wZXJhdGlvbnM8L2g0PlxuICAgICAgICAgIDx1bCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtbXV0ZWQtZm9yZWdyb3VuZCBzcGFjZS15LTFcIj5cbiAgICAgICAgICAgIDxsaT5BZGRpdGlvbjogPGNvZGUgY2xhc3NOYW1lPVwiYmctbXV0ZWQgcHgtMS41IHB5LTAuNSByb3VuZGVkIHRleHQteHNcIj5jdXJyZW50ICsgNTwvY29kZT48L2xpPlxuICAgICAgICAgICAgPGxpPlN1YnRyYWN0aW9uOiA8Y29kZSBjbGFzc05hbWU9XCJiZy1tdXRlZCBweC0xLjUgcHktMC41IHJvdW5kZWQgdGV4dC14c1wiPmN1cnJlbnQgLSAxMDwvY29kZT48L2xpPlxuICAgICAgICAgICAgPGxpPk11bHRpcGxpY2F0aW9uOiA8Y29kZSBjbGFzc05hbWU9XCJiZy1tdXRlZCBweC0xLjUgcHktMC41IHJvdW5kZWQgdGV4dC14c1wiPmN1cnJlbnQgKiAxLjE1PC9jb2RlPjwvbGk+XG4gICAgICAgICAgICA8bGk+RGl2aXNpb246IDxjb2RlIGNsYXNzTmFtZT1cImJnLW11dGVkIHB4LTEuNSBweS0wLjUgcm91bmRlZCB0ZXh0LXhzXCI+Y3VycmVudCAvIDI8L2NvZGU+PC9saT5cbiAgICAgICAgICAgIDxsaT5Db21iaW5hdGlvbnM6IDxjb2RlIGNsYXNzTmFtZT1cImJnLW11dGVkIHB4LTEuNSBweS0wLjUgcm91bmRlZCB0ZXh0LXhzXCI+KGN1cnJlbnQgKiAxLjEwKSArIDU8L2NvZGU+PC9saT5cbiAgICAgICAgICAgIDxsaT5Sb3VuZGluZzogPGNvZGUgY2xhc3NOYW1lPVwiYmctbXV0ZWQgcHgtMS41IHB5LTAuNSByb3VuZGVkIHRleHQteHNcIj5NYXRoLmZsb29yKGN1cnJlbnQpICsgMC45OTwvY29kZT48L2xpPlxuICAgICAgICAgIDwvdWw+XG5cbiAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LXNlbWlib2xkIHRleHQtZm9yZWdyb3VuZCBtdC00XCI+RXhhbXBsZXM8L2g0PlxuICAgICAgICAgIDx1bCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtbXV0ZWQtZm9yZWdyb3VuZCBzcGFjZS15LTFcIj5cbiAgICAgICAgICAgIDxsaT4xMCUgaW5jcmVhc2U6IDxjb2RlIGNsYXNzTmFtZT1cImJnLW11dGVkIHB4LTEuNSBweS0wLjUgcm91bmRlZCB0ZXh0LXhzXCI+Y3VycmVudCAqIDEuMTA8L2NvZGU+PC9saT5cbiAgICAgICAgICAgIDxsaT4xNSUgZGVjcmVhc2U6IDxjb2RlIGNsYXNzTmFtZT1cImJnLW11dGVkIHB4LTEuNSBweS0wLjUgcm91bmRlZCB0ZXh0LXhzXCI+Y3VycmVudCAqIDAuODU8L2NvZGU+PC9saT5cbiAgICAgICAgICAgIDxsaT5BZGQgJDUgbWFya3VwOiA8Y29kZSBjbGFzc05hbWU9XCJiZy1tdXRlZCBweC0xLjUgcHktMC41IHJvdW5kZWQgdGV4dC14c1wiPmN1cnJlbnQgKyA1PC9jb2RlPjwvbGk+XG4gICAgICAgICAgICA8bGk+Um91bmQgdG8gLjk5OiA8Y29kZSBjbGFzc05hbWU9XCJiZy1tdXRlZCBweC0xLjUgcHktMC41IHJvdW5kZWQgdGV4dC14c1wiPk1hdGguZmxvb3IoY3VycmVudCkgKyAwLjk5PC9jb2RlPjwvbGk+XG4gICAgICAgICAgPC91bD5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuXG4gICAgICB7LyogUHJlc2V0IGJ1dHRvbnMgKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMlwiPlxuICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiPlF1aWNrIHByZXNldHM6PC9wPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC13cmFwIGdhcC0yXCI+XG4gICAgICAgICAge0ZPUk1VTEFfUFJFU0VUUy5tYXAoKHByZXNldCkgPT4gKFxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICBrZXk9e3ByZXNldC5sYWJlbH1cbiAgICAgICAgICAgICAgdmFyaWFudD1cIm91dGxpbmVcIlxuICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVQcmVzZXRDbGljayhwcmVzZXQpfVxuICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICAgICAgICAgIHRpdGxlPXtwcmVzZXQuZGVzY3JpcHRpb259XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtwcmVzZXQubGFiZWx9XG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICApKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIEZvcm11bGEgaW5wdXQgKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMlwiPlxuICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWZvcmVncm91bmRcIiBodG1sRm9yPVwiZm9ybXVsYS1pbnB1dFwiPlxuICAgICAgICAgIEN1c3RvbSBGb3JtdWxhXG4gICAgICAgIDwvbGFiZWw+XG4gICAgICAgIDxJbnB1dFxuICAgICAgICAgIGlkPVwiZm9ybXVsYS1pbnB1dFwiXG4gICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgIHZhbHVlPXtmb3JtdWxhfVxuICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVGb3JtdWxhQ2hhbmdlfVxuICAgICAgICAgIHBsYWNlaG9sZGVyPVwiZS5nLiwgY3VycmVudCAqIDEuMTUgb3IgKGN1cnJlbnQgKyA1KSAqIDEuMTBcIlxuICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgICBjbGFzc05hbWU9e2NuKGVycm9yICYmIFwiYm9yZGVyLWRhbmdlciBmb2N1cy12aXNpYmxlOnJpbmctZGFuZ2VyXCIpfVxuICAgICAgICAvPlxuICAgICAgICB7ZXJyb3IgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgdGV4dC1zbSB0ZXh0LWRhbmdlclwiPlxuICAgICAgICAgICAgPEFsZXJ0Q2lyY2xlIGNsYXNzTmFtZT1cImgtNCB3LTRcIiAvPlxuICAgICAgICAgICAge2Vycm9yfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG5cbiAgICAgIHsvKiBBY3Rpb24gYnV0dG9ucyAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgPEJ1dHRvblxuICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lXCJcbiAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVByZXZpZXd9XG4gICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkIHx8ICFmb3JtdWxhLnRyaW0oKSB8fCByZWNvcmRzLmxlbmd0aCA9PT0gMH1cbiAgICAgICAgICBjbGFzc05hbWU9XCJnYXAtMS41XCJcbiAgICAgICAgPlxuICAgICAgICAgIDxQbGF5IGNsYXNzTmFtZT1cImgtNCB3LTRcIiAvPlxuICAgICAgICAgIFByZXZpZXdcbiAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIDxCdXR0b25cbiAgICAgICAgICB2YXJpYW50PVwicHJpbWFyeVwiXG4gICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVBcHBseX1cbiAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWQgfHwgIWZvcm11bGEudHJpbSgpIHx8IHJlY29yZHMubGVuZ3RoID09PSAwIHx8IGlzQXBwbHlpbmd9XG4gICAgICAgICAgY2xhc3NOYW1lPVwiZ2FwLTEuNVwiXG4gICAgICAgID5cbiAgICAgICAgICB7aXNBcHBseWluZyA/IChcbiAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC00IHctNCBhbmltYXRlLXNwaW4gcm91bmRlZC1mdWxsIGJvcmRlci0yIGJvcmRlci1jdXJyZW50IGJvcmRlci10LXRyYW5zcGFyZW50XCIgLz5cbiAgICAgICAgICAgICAgQXBwbHlpbmcuLi5cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICA8Q2hlY2sgY2xhc3NOYW1lPVwiaC00IHctNFwiIC8+XG4gICAgICAgICAgICAgIEFwcGx5IHRvIEFsbFxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIHtyZWNvcmRzLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1tdXRlZC1mb3JlZ3JvdW5kIG1sLTJcIj5cbiAgICAgICAgICAgIHtyZWNvcmRzLmxlbmd0aH0gcHJvZHVjdHtyZWNvcmRzLmxlbmd0aCAhPT0gMSA/IFwic1wiIDogXCJcIn0gd2lsbCBiZSB1cGRhdGVkXG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG5cbiAgICAgIHsvKiBQcmV2aWV3IHJlc3VsdHMgKi99XG4gICAgICB7c2hvd1ByZXZpZXcgJiYgcHJldmlld1Jlc3VsdHMubGVuZ3RoID4gMCAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0zXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1zZW1pYm9sZCB0ZXh0LWZvcmVncm91bmRcIj5QcmV2aWV3PC9oND5cbiAgICAgICAgICAgIDxCYWRnZSB2YXJpYW50PVwic2Vjb25kYXJ5XCI+XG4gICAgICAgICAgICAgIFNob3dpbmcge3ByZXZpZXdSZXN1bHRzLmxlbmd0aH0gb2Yge3JlY29yZHMubGVuZ3RofVxuICAgICAgICAgICAgPC9CYWRnZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci1ib3JkZXIgb3ZlcmZsb3ctaGlkZGVuXCI+XG4gICAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPVwidy1mdWxsIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgPHRoZWFkIGNsYXNzTmFtZT1cImJnLW11dGVkLzUwXCI+XG4gICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgPHRoIGNsYXNzTmFtZT1cInRleHQtbGVmdCBweC00IHB5LTIgZm9udC1tZWRpdW0gdGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCI+UHJvZHVjdDwvdGg+XG4gICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPVwidGV4dC1yaWdodCBweC00IHB5LTIgZm9udC1tZWRpdW0gdGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCI+Q3VycmVudDwvdGg+XG4gICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPVwidGV4dC1yaWdodCBweC00IHB5LTIgZm9udC1tZWRpdW0gdGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCI+TmV3PC90aD5cbiAgICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9XCJ0ZXh0LXJpZ2h0IHB4LTQgcHktMiBmb250LW1lZGl1bSB0ZXh0LW11dGVkLWZvcmVncm91bmRcIj5DaGFuZ2U8L3RoPlxuICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgIDwvdGhlYWQ+XG4gICAgICAgICAgICAgIDx0Ym9keSBjbGFzc05hbWU9XCJkaXZpZGUteSBkaXZpZGUtYm9yZGVyXCI+XG4gICAgICAgICAgICAgICAge3ByZXZpZXdSZXN1bHRzLm1hcCgocmVzdWx0LCBpZHgpID0+IChcbiAgICAgICAgICAgICAgICAgIDx0ciBrZXk9e2lkeH0gY2xhc3NOYW1lPVwiaG92ZXI6YmctbXV0ZWQvMzBcIj5cbiAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cInB4LTQgcHktMlwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidHJ1bmNhdGUgbWF4LXctWzIwMHB4XVwiIHRpdGxlPXtyZXN1bHQucHJvZHVjdFRpdGxlfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtyZXN1bHQucHJvZHVjdFRpdGxlfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LW11dGVkLWZvcmVncm91bmRcIj57cmVzdWx0LnNrdX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cInRleHQtcmlnaHQgcHgtNCBweS0yIGZvbnQtbW9ubyB0ZXh0LW11dGVkLWZvcmVncm91bmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7Zm9ybWF0UHJpY2UocmVzdWx0LmN1cnJlbnRQcmljZSl9XG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJ0ZXh0LXJpZ2h0IHB4LTQgcHktMiBmb250LW1vbm9cIj5cbiAgICAgICAgICAgICAgICAgICAgICB7cmVzdWx0Lm5ld1ByaWNlICE9PSBudWxsID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0UHJpY2UocmVzdWx0Lm5ld1ByaWNlKVxuICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWRhbmdlclwiPkVycm9yPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJ0ZXh0LXJpZ2h0IHB4LTQgcHktMlwiPlxuICAgICAgICAgICAgICAgICAgICAgIHtyZXN1bHQuY2hhbmdlICE9PSBudWxsID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImZvbnQtbW9ub1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5jaGFuZ2UgPiAwICYmIFwidGV4dC1zdWNjZXNzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmNoYW5nZSA8IDAgJiYgXCJ0ZXh0LWRhbmdlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5jaGFuZ2UgPT09IDAgJiYgXCJ0ZXh0LW11dGVkLWZvcmVncm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVzdWx0LmNoYW5nZSA+IDAgPyBcIitcIiA6IFwiXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtmb3JtYXRQcmljZShyZXN1bHQuY2hhbmdlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCI+LTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAge3JlY29yZHMubGVuZ3RoID4gNSAmJiAoXG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtbXV0ZWQtZm9yZWdyb3VuZCB0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgICAuLi4gYW5kIHtyZWNvcmRzLmxlbmd0aCAtIDV9IG1vcmUgcHJvZHVjdHNcbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIHsvKiBFbXB0eSBzdGF0ZSAqL31cbiAgICAgIHtyZWNvcmRzLmxlbmd0aCA9PT0gMCAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgcHktNCB0ZXh0LXNtIHRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiPlxuICAgICAgICAgIE5vIHByb2R1Y3RzIGxvYWRlZC4gVXBsb2FkIGEgcHJpY2luZyBmaWxlIGZpcnN0LlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9DYXJkPlxuICApO1xufVxuIl0sImZpbGUiOiJDOi9Qcm9qZWN0cy9Tb3VyY2UgNCBJbmR1c3RyaWVzL3NyYy9jb21wb25lbnRzL3ByaWNpbmcvZm9ybXVsYS1idWlsZGVyLnRzeCJ9