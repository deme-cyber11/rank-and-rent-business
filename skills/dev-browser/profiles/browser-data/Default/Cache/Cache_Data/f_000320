import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/components/Deals/DocumentUpload.tsx");import __vite__cjsImport0_react_jsxDevRuntime from "/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=aadb9797"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
var _s = $RefreshSig$();
import __vite__cjsImport1_react from "/node_modules/.vite/deps/react.js?v=aadb9797"; const useState = __vite__cjsImport1_react["useState"]; const useRef = __vite__cjsImport1_react["useRef"];
import { Upload, X, FileText, AlertCircle, CheckCircle, Loader } from "/node_modules/.vite/deps/lucide-react.js?v=aadb9797";
export default function DocumentUpload({
  files,
  onAddFiles,
  onRemoveFile,
  maxFiles = 10,
  acceptedTypes = [".pdf", ".csv", ".png", ".jpg", ".jpeg"],
  disabled = false,
  helperText = null,
  rightSlot
}) {
  _s();
  const [localError, setLocalError] = useState(null);
  const [isDraggingApp, setIsDraggingApp] = useState(false);
  const [isDraggingStmt, setIsDraggingStmt] = useState(false);
  const appInputRef = useRef(null);
  const stmtInputRef = useRef(null);
  const totalFiles = files.length;
  const resetError = () => {
    if (localError) {
      setLocalError(null);
    }
  };
  const validateFiles = (incoming) => {
    const allowed = new Set(acceptedTypes);
    const valid = [];
    for (const file of incoming) {
      const extension = `.${file.name.split(".").pop()?.toLowerCase()}`;
      if (!allowed.has(extension)) {
        setLocalError(`File type ${extension} not allowed. Accepted: ${acceptedTypes.join(", ")}`);
        continue;
      }
      if (file.size > 50 * 1024 * 1024) {
        setLocalError("File size exceeds 50MB limit (50MB).");
        continue;
      }
      valid.push(file);
    }
    if (valid.length > 0) {
      resetError();
    }
    return valid;
  };
  const handleAdd = (incoming, category) => {
    if (disabled || incoming.length === 0) return;
    const remainingSlots = maxFiles - totalFiles;
    if (remainingSlots <= 0) {
      setLocalError(`Maximum ${maxFiles} files total allowed.`);
      return;
    }
    const trimmed = incoming.slice(0, remainingSlots);
    const valid = validateFiles(trimmed);
    if (valid.length) {
      onAddFiles(valid, category);
    }
  };
  const getStatusIcon = (status) => {
    if (status === "success") {
      return /* @__PURE__ */ jsxDEV(CheckCircle, { className: "w-4 h-4 text-green-400" }, void 0, false, {
        fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx",
        lineNumber: 102,
        columnNumber: 14
      }, this);
    }
    if (status === "error") {
      return /* @__PURE__ */ jsxDEV(AlertCircle, { className: "w-4 h-4 text-red-400" }, void 0, false, {
        fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx",
        lineNumber: 105,
        columnNumber: 14
      }, this);
    }
    if (status === "uploading") {
      return /* @__PURE__ */ jsxDEV(Loader, { className: "w-4 h-4 text-indigo-400 animate-spin" }, void 0, false, {
        fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx",
        lineNumber: 108,
        columnNumber: 14
      }, this);
    }
    return /* @__PURE__ */ jsxDEV(FileText, { className: "w-4 h-4 text-gray-400" }, void 0, false, {
      fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx",
      lineNumber: 110,
      columnNumber: 12
    }, this);
  };
  const renderUploadZone = (category, title, description, isDragging, setIsDragging, inputRef) => /* @__PURE__ */ jsxDEV(
    "div",
    {
      onDragOver: (event) => {
        if (disabled) return;
        event.preventDefault();
        setIsDragging(true);
      },
      onDragLeave: () => {
        if (disabled) return;
        setIsDragging(false);
      },
      onDrop: (event) => {
        if (disabled) return;
        event.preventDefault();
        setIsDragging(false);
        handleAdd(Array.from(event.dataTransfer.files), category);
      },
      "aria-disabled": disabled,
      className: `border-2 border-dashed rounded-lg p-6 text-center transition-all ${disabled ? "opacity-60 cursor-not-allowed" : "cursor-pointer"} ${isDragging ? "border-indigo-500 bg-indigo-500/10" : "border-gray-700 bg-gray-800/30 hover:border-gray-600"}`,
      onClick: () => {
        if (disabled) return;
        inputRef.current?.click();
      },
      children: [
        /* @__PURE__ */ jsxDEV(Upload, { className: "w-10 h-10 text-gray-400 mx-auto mb-2" }, void 0, false, {
          fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx",
          lineNumber: 150,
          columnNumber: 7
        }, this),
        /* @__PURE__ */ jsxDEV("h4", { className: "text-base font-semibold text-white mb-1", children: title }, void 0, false, {
          fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx",
          lineNumber: 151,
          columnNumber: 7
        }, this),
        /* @__PURE__ */ jsxDEV("p", { className: "text-gray-400 text-xs mb-2", children: description }, void 0, false, {
          fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx",
          lineNumber: 152,
          columnNumber: 7
        }, this),
        /* @__PURE__ */ jsxDEV("p", { className: "text-xs text-gray-500", children: "PDF, CSV, PNG, JPG (Max 50MB each)" }, void 0, false, {
          fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx",
          lineNumber: 153,
          columnNumber: 7
        }, this),
        /* @__PURE__ */ jsxDEV(
          "input",
          {
            ref: inputRef,
            type: "file",
            multiple: true,
            accept: acceptedTypes.join(","),
            onChange: (event) => {
              if (disabled) return;
              const selected = event.target.files ? Array.from(event.target.files) : [];
              handleAdd(selected, category);
              event.target.value = "";
            },
            className: "hidden"
          },
          void 0,
          false,
          {
            fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx",
            lineNumber: 154,
            columnNumber: 7
          },
          this
        )
      ]
    },
    void 0,
    true,
    {
      fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx",
      lineNumber: 121,
      columnNumber: 3
    },
    this
  );
  const renderFileCard = (file) => /* @__PURE__ */ jsxDEV(
    "div",
    {
      className: "flex items-center gap-2 bg-gray-800/50 border border-gray-700/30 rounded-lg p-2.5",
      children: [
        getStatusIcon(file.status),
        /* @__PURE__ */ jsxDEV("div", { className: "flex-1 min-w-0", children: [
          /* @__PURE__ */ jsxDEV("p", { className: "text-xs text-white truncate", children: file.name }, void 0, false, {
            fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx",
            lineNumber: 178,
            columnNumber: 9
          }, this),
          /* @__PURE__ */ jsxDEV("p", { className: "text-xs text-gray-500", children: [
            (file.size / 1024 / 1024).toFixed(2),
            " MB"
          ] }, void 0, true, {
            fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx",
            lineNumber: 179,
            columnNumber: 9
          }, this),
          file.error && file.status === "error" && /* @__PURE__ */ jsxDEV("p", { className: "text-xs text-red-400 truncate", children: file.error }, void 0, false, {
            fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx",
            lineNumber: 181,
            columnNumber: 7
          }, this)
        ] }, void 0, true, {
          fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx",
          lineNumber: 177,
          columnNumber: 7
        }, this),
        file.status === "uploading" && /* @__PURE__ */ jsxDEV("div", { className: "w-24 h-1 bg-gray-700 rounded-full overflow-hidden", children: /* @__PURE__ */ jsxDEV(
          "div",
          {
            className: "h-full bg-indigo-500 transition-all",
            style: { width: `${Math.min(100, Math.max(0, file.progress))}%` }
          },
          void 0,
          false,
          {
            fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx",
            lineNumber: 186,
            columnNumber: 11
          },
          this
        ) }, void 0, false, {
          fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx",
          lineNumber: 185,
          columnNumber: 5
        }, this),
        /* @__PURE__ */ jsxDEV(
          "button",
          {
            onClick: (event) => {
              event.stopPropagation();
              if (disabled) return;
              onRemoveFile(file.id);
            },
            className: `text-gray-400 transition-colors ${disabled ? "cursor-not-allowed opacity-60" : "hover:text-gray-300"}`,
            children: /* @__PURE__ */ jsxDEV(X, { className: "w-4 h-4" }, void 0, false, {
              fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx",
              lineNumber: 202,
              columnNumber: 9
            }, this)
          },
          void 0,
          false,
          {
            fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx",
            lineNumber: 192,
            columnNumber: 7
          },
          this
        )
      ]
    },
    file.id,
    true,
    {
      fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx",
      lineNumber: 172,
      columnNumber: 3
    },
    this
  );
  const totalError = helperText ?? localError;
  const midpoint = Math.ceil(files.length / 2);
  const leftColumnFiles = files.slice(0, midpoint);
  const rightColumnFiles = files.slice(midpoint);
  return /* @__PURE__ */ jsxDEV("div", { className: "space-y-4", children: [
    totalError && /* @__PURE__ */ jsxDEV("div", { className: "bg-red-500/20 border border-red-500/30 rounded-lg p-3 flex items-start gap-2", children: [
      /* @__PURE__ */ jsxDEV(AlertCircle, { className: "w-5 h-5 text-red-400 flex-shrink-0 mt-0.5" }, void 0, false, {
        fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx",
        lineNumber: 218,
        columnNumber: 11
      }, this),
      /* @__PURE__ */ jsxDEV("p", { className: "text-red-300 text-sm", children: totalError }, void 0, false, {
        fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx",
        lineNumber: 219,
        columnNumber: 11
      }, this)
    ] }, void 0, true, {
      fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx",
      lineNumber: 217,
      columnNumber: 7
    }, this),
    /* @__PURE__ */ jsxDEV("div", { className: `grid grid-cols-1 gap-3 ${rightSlot ? "md:grid-cols-[auto_1fr_1fr]" : "md:grid-cols-2"}`, children: [
      rightSlot,
      renderUploadZone(
        "application",
        "Application",
        "Upload loan application docs",
        isDraggingApp,
        setIsDraggingApp,
        appInputRef
      ),
      renderUploadZone(
        "statements",
        "Bank Statements",
        "Upload 3+ months of statements",
        isDraggingStmt,
        setIsDraggingStmt,
        stmtInputRef
      )
    ] }, void 0, true, {
      fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx",
      lineNumber: 224,
      columnNumber: 7
    }, this),
    files.length > 0 && /* @__PURE__ */ jsxDEV("div", { className: "space-y-3", children: [
      /* @__PURE__ */ jsxDEV("h5", { className: "text-sm font-medium text-gray-300", children: [
        "Uploaded Files (",
        files.length,
        " / ",
        maxFiles,
        ")"
      ] }, void 0, true, {
        fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx",
        lineNumber: 249,
        columnNumber: 11
      }, this),
      /* @__PURE__ */ jsxDEV("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-3", children: [
        /* @__PURE__ */ jsxDEV("div", { className: "space-y-2", children: leftColumnFiles.map(renderFileCard) }, void 0, false, {
          fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx",
          lineNumber: 253,
          columnNumber: 13
        }, this),
        /* @__PURE__ */ jsxDEV("div", { className: "space-y-2", children: rightColumnFiles.map(renderFileCard) }, void 0, false, {
          fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx",
          lineNumber: 256,
          columnNumber: 13
        }, this)
      ] }, void 0, true, {
        fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx",
        lineNumber: 252,
        columnNumber: 11
      }, this)
    ] }, void 0, true, {
      fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx",
      lineNumber: 248,
      columnNumber: 7
    }, this)
  ] }, void 0, true, {
    fileName: "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx",
    lineNumber: 215,
    columnNumber: 5
  }, this);
}
_s(DocumentUpload, "0l15VwTYJw29ixzn9I1q9OcRO1M=");
_c = DocumentUpload;
var _c;
$RefreshReg$(_c, "DocumentUpload");
import * as RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}
function $RefreshReg$(type, id) {
  return RefreshRuntime.register(type, "C:/Projects/Huge Capital/huge-capital-mgmt/src/components/Deals/DocumentUpload.tsx " + id);
}
function $RefreshSig$() {
  return RefreshRuntime.createSignatureFunctionForTransform();
}

//# sourceMappingURL=data:application/json;base64,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Q2hlY2tDaXJjbGUiLCJMb2FkZXIiLCJEb2N1bWVudFVwbG9hZCIsImZpbGVzIiwib25BZGRGaWxlcyIsIm9uUmVtb3ZlRmlsZSIsIm1heEZpbGVzIiwiYWNjZXB0ZWRUeXBlcyIsImRpc2FibGVkIiwiaGVscGVyVGV4dCIsInJpZ2h0U2xvdCIsIl9zIiwibG9jYWxFcnJvciIsInNldExvY2FsRXJyb3IiLCJpc0RyYWdnaW5nQXBwIiwic2V0SXNEcmFnZ2luZ0FwcCIsImlzRHJhZ2dpbmdTdG10Iiwic2V0SXNEcmFnZ2luZ1N0bXQiLCJhcHBJbnB1dFJlZiIsInN0bXRJbnB1dFJlZiIsInRvdGFsRmlsZXMiLCJsZW5ndGgiLCJyZXNldEVycm9yIiwidmFsaWRhdGVGaWxlcyIsImluY29taW5nIiwiYWxsb3dlZCIsIlNldCIsInZhbGlkIiwiZmlsZSIsImV4dGVuc2lvbiIsIm5hbWUiLCJzcGxpdCIsInBvcCIsInRvTG93ZXJDYXNlIiwiaGFzIiwiam9pbiIsInNpemUiLCJwdXNoIiwiaGFuZGxlQWRkIiwiY2F0ZWdvcnkiLCJyZW1haW5pbmdTbG90cyIsInRyaW1tZWQiLCJzbGljZSIsImdldFN0YXR1c0ljb24iLCJzdGF0dXMiLCJyZW5kZXJVcGxvYWRab25lIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImlzRHJhZ2dpbmciLCJzZXRJc0RyYWdnaW5nIiwiaW5wdXRSZWYiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiQXJyYXkiLCJmcm9tIiwiZGF0YVRyYW5zZmVyIiwiY3VycmVudCIsImNsaWNrIiwic2VsZWN0ZWQiLCJ0YXJnZXQiLCJ2YWx1ZSIsInJlbmRlckZpbGVDYXJkIiwidG9GaXhlZCIsImVycm9yIiwid2lkdGgiLCJNYXRoIiwibWluIiwibWF4IiwicHJvZ3Jlc3MiLCJzdG9wUHJvcGFnYXRpb24iLCJpZCIsInRvdGFsRXJyb3IiLCJtaWRwb2ludCIsImNlaWwiLCJsZWZ0Q29sdW1uRmlsZXMiLCJyaWdodENvbHVtbkZpbGVzIiwibWFwIiwiX2MiLCIkUmVmcmVzaFJlZyQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZXMiOlsiRG9jdW1lbnRVcGxvYWQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBEb2N1bWVudCBVcGxvYWQgQ29tcG9uZW50XHJcbiAqIERpc3BsYXlzIGFsbCB1cGxvYWRlZCBmaWxlcyBpbiBhIDItY29sdW1uIGdyaWQgbGF5b3V0XHJcbiAqIFVwbG9hZCB6b25lcyBmb3IgQXBwbGljYXRpb24gJiBCYW5rIFN0YXRlbWVudCBmaWxlc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFVwbG9hZCwgWCwgRmlsZVRleHQsIEFsZXJ0Q2lyY2xlLCBDaGVja0NpcmNsZSwgTG9hZGVyIH0gZnJvbSAnbHVjaWRlLXJlYWN0JztcclxuXHJcbmV4cG9ydCB0eXBlIERlYWxVcGxvYWRTdGF0dXMgPSAncGVuZGluZycgfCAndXBsb2FkaW5nJyB8ICdzdWNjZXNzJyB8ICdlcnJvcic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIERlYWxVcGxvYWRGaWxlRGlzcGxheSB7XHJcbiAgaWQ6IHN0cmluZztcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgc2l6ZTogbnVtYmVyO1xyXG4gIHN0YXR1czogRGVhbFVwbG9hZFN0YXR1cztcclxuICBwcm9ncmVzczogbnVtYmVyO1xyXG4gIGNhdGVnb3J5OiAnYXBwbGljYXRpb24nIHwgJ3N0YXRlbWVudHMnO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgRG9jdW1lbnRVcGxvYWRQcm9wcyB7XHJcbiAgZmlsZXM6IERlYWxVcGxvYWRGaWxlRGlzcGxheVtdO1xyXG4gIG9uQWRkRmlsZXM6IChmaWxlczogRmlsZVtdLCBjYXRlZ29yeTogJ2FwcGxpY2F0aW9uJyB8ICdzdGF0ZW1lbnRzJykgPT4gdm9pZDtcclxuICBvblJlbW92ZUZpbGU6IChpZDogc3RyaW5nKSA9PiB2b2lkO1xyXG4gIG1heEZpbGVzPzogbnVtYmVyO1xyXG4gIGFjY2VwdGVkVHlwZXM/OiBzdHJpbmdbXTtcclxuICBkaXNhYmxlZD86IGJvb2xlYW47XHJcbiAgaGVscGVyVGV4dD86IHN0cmluZyB8IG51bGw7XHJcbiAgcmlnaHRTbG90PzogUmVhY3QuUmVhY3ROb2RlO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBEb2N1bWVudFVwbG9hZCh7XHJcbiAgZmlsZXMsXHJcbiAgb25BZGRGaWxlcyxcclxuICBvblJlbW92ZUZpbGUsXHJcbiAgbWF4RmlsZXMgPSAxMCxcclxuICBhY2NlcHRlZFR5cGVzID0gWycucGRmJywgJy5jc3YnLCAnLnBuZycsICcuanBnJywgJy5qcGVnJ10sXHJcbiAgZGlzYWJsZWQgPSBmYWxzZSxcclxuICBoZWxwZXJUZXh0ID0gbnVsbCxcclxuICByaWdodFNsb3QsXHJcbn06IERvY3VtZW50VXBsb2FkUHJvcHMpIHtcclxuICBjb25zdCBbbG9jYWxFcnJvciwgc2V0TG9jYWxFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcclxuICBjb25zdCBbaXNEcmFnZ2luZ0FwcCwgc2V0SXNEcmFnZ2luZ0FwcF0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW2lzRHJhZ2dpbmdTdG10LCBzZXRJc0RyYWdnaW5nU3RtdF0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgYXBwSW5wdXRSZWYgPSB1c2VSZWY8SFRNTElucHV0RWxlbWVudD4obnVsbCk7XHJcbiAgY29uc3Qgc3RtdElucHV0UmVmID0gdXNlUmVmPEhUTUxJbnB1dEVsZW1lbnQ+KG51bGwpO1xyXG5cclxuICBjb25zdCB0b3RhbEZpbGVzID0gZmlsZXMubGVuZ3RoO1xyXG5cclxuICBjb25zdCByZXNldEVycm9yID0gKCkgPT4ge1xyXG4gICAgaWYgKGxvY2FsRXJyb3IpIHtcclxuICAgICAgc2V0TG9jYWxFcnJvcihudWxsKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCB2YWxpZGF0ZUZpbGVzID0gKGluY29taW5nOiBGaWxlW10pOiBGaWxlW10gPT4ge1xyXG4gICAgY29uc3QgYWxsb3dlZCA9IG5ldyBTZXQoYWNjZXB0ZWRUeXBlcyk7XHJcbiAgICBjb25zdCB2YWxpZDogRmlsZVtdID0gW107XHJcblxyXG4gICAgZm9yIChjb25zdCBmaWxlIG9mIGluY29taW5nKSB7XHJcbiAgICAgIGNvbnN0IGV4dGVuc2lvbiA9IGAuJHtmaWxlLm5hbWUuc3BsaXQoJy4nKS5wb3AoKT8udG9Mb3dlckNhc2UoKX1gO1xyXG5cclxuICAgICAgaWYgKCFhbGxvd2VkLmhhcyhleHRlbnNpb24pKSB7XHJcbiAgICAgICAgc2V0TG9jYWxFcnJvcihgRmlsZSB0eXBlICR7ZXh0ZW5zaW9ufSBub3QgYWxsb3dlZC4gQWNjZXB0ZWQ6ICR7YWNjZXB0ZWRUeXBlcy5qb2luKCcsICcpfWApO1xyXG4gICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZmlsZS5zaXplID4gNTAgKiAxMDI0ICogMTAyNCkge1xyXG4gICAgICAgIHNldExvY2FsRXJyb3IoJ0ZpbGUgc2l6ZSBleGNlZWRzIDUwTUIgbGltaXQgKDUwTUIpLicpO1xyXG4gICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB2YWxpZC5wdXNoKGZpbGUpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh2YWxpZC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHJlc2V0RXJyb3IoKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdmFsaWQ7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlQWRkID0gKGluY29taW5nOiBGaWxlW10sIGNhdGVnb3J5OiAnYXBwbGljYXRpb24nIHwgJ3N0YXRlbWVudHMnKSA9PiB7XHJcbiAgICBpZiAoZGlzYWJsZWQgfHwgaW5jb21pbmcubGVuZ3RoID09PSAwKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgcmVtYWluaW5nU2xvdHMgPSBtYXhGaWxlcyAtIHRvdGFsRmlsZXM7XHJcbiAgICBpZiAocmVtYWluaW5nU2xvdHMgPD0gMCkge1xyXG4gICAgICBzZXRMb2NhbEVycm9yKGBNYXhpbXVtICR7bWF4RmlsZXN9IGZpbGVzIHRvdGFsIGFsbG93ZWQuYCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0cmltbWVkID0gaW5jb21pbmcuc2xpY2UoMCwgcmVtYWluaW5nU2xvdHMpO1xyXG4gICAgY29uc3QgdmFsaWQgPSB2YWxpZGF0ZUZpbGVzKHRyaW1tZWQpO1xyXG4gICAgaWYgKHZhbGlkLmxlbmd0aCkge1xyXG4gICAgICBvbkFkZEZpbGVzKHZhbGlkLCBjYXRlZ29yeSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZ2V0U3RhdHVzSWNvbiA9IChzdGF0dXM6IERlYWxVcGxvYWRTdGF0dXMpID0+IHtcclxuICAgIGlmIChzdGF0dXMgPT09ICdzdWNjZXNzJykge1xyXG4gICAgICByZXR1cm4gPENoZWNrQ2lyY2xlIGNsYXNzTmFtZT1cInctNCBoLTQgdGV4dC1ncmVlbi00MDBcIiAvPjtcclxuICAgIH1cclxuICAgIGlmIChzdGF0dXMgPT09ICdlcnJvcicpIHtcclxuICAgICAgcmV0dXJuIDxBbGVydENpcmNsZSBjbGFzc05hbWU9XCJ3LTQgaC00IHRleHQtcmVkLTQwMFwiIC8+O1xyXG4gICAgfVxyXG4gICAgaWYgKHN0YXR1cyA9PT0gJ3VwbG9hZGluZycpIHtcclxuICAgICAgcmV0dXJuIDxMb2FkZXIgY2xhc3NOYW1lPVwidy00IGgtNCB0ZXh0LWluZGlnby00MDAgYW5pbWF0ZS1zcGluXCIgLz47XHJcbiAgICB9XHJcbiAgICByZXR1cm4gPEZpbGVUZXh0IGNsYXNzTmFtZT1cInctNCBoLTQgdGV4dC1ncmF5LTQwMFwiIC8+O1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IHJlbmRlclVwbG9hZFpvbmUgPSAoXHJcbiAgICBjYXRlZ29yeTogJ2FwcGxpY2F0aW9uJyB8ICdzdGF0ZW1lbnRzJyxcclxuICAgIHRpdGxlOiBzdHJpbmcsXHJcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nLFxyXG4gICAgaXNEcmFnZ2luZzogYm9vbGVhbixcclxuICAgIHNldElzRHJhZ2dpbmc6ICh2YWw6IGJvb2xlYW4pID0+IHZvaWQsXHJcbiAgICBpbnB1dFJlZjogUmVhY3QuUmVmT2JqZWN0PEhUTUxJbnB1dEVsZW1lbnQgfCBudWxsPixcclxuICApID0+IChcclxuICAgIDxkaXZcclxuICAgICAgb25EcmFnT3Zlcj17KGV2ZW50KSA9PiB7XHJcbiAgICAgICAgaWYgKGRpc2FibGVkKSByZXR1cm47XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBzZXRJc0RyYWdnaW5nKHRydWUpO1xyXG4gICAgICB9fVxyXG4gICAgICBvbkRyYWdMZWF2ZT17KCkgPT4ge1xyXG4gICAgICAgIGlmIChkaXNhYmxlZCkgcmV0dXJuO1xyXG4gICAgICAgIHNldElzRHJhZ2dpbmcoZmFsc2UpO1xyXG4gICAgICB9fVxyXG4gICAgICBvbkRyb3A9eyhldmVudCkgPT4ge1xyXG4gICAgICAgIGlmIChkaXNhYmxlZCkgcmV0dXJuO1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgc2V0SXNEcmFnZ2luZyhmYWxzZSk7XHJcbiAgICAgICAgaGFuZGxlQWRkKEFycmF5LmZyb20oZXZlbnQuZGF0YVRyYW5zZmVyLmZpbGVzKSwgY2F0ZWdvcnkpO1xyXG4gICAgICB9fVxyXG4gICAgICBhcmlhLWRpc2FibGVkPXtkaXNhYmxlZH1cclxuICAgICAgY2xhc3NOYW1lPXtgYm9yZGVyLTIgYm9yZGVyLWRhc2hlZCByb3VuZGVkLWxnIHAtNiB0ZXh0LWNlbnRlciB0cmFuc2l0aW9uLWFsbCAke1xyXG4gICAgICAgIGRpc2FibGVkID8gJ29wYWNpdHktNjAgY3Vyc29yLW5vdC1hbGxvd2VkJyA6ICdjdXJzb3ItcG9pbnRlcidcclxuICAgICAgfSAke1xyXG4gICAgICAgIGlzRHJhZ2dpbmdcclxuICAgICAgICAgID8gJ2JvcmRlci1pbmRpZ28tNTAwIGJnLWluZGlnby01MDAvMTAnXHJcbiAgICAgICAgICA6ICdib3JkZXItZ3JheS03MDAgYmctZ3JheS04MDAvMzAgaG92ZXI6Ym9yZGVyLWdyYXktNjAwJ1xyXG4gICAgICB9YH1cclxuICAgICAgb25DbGljaz17KCkgPT4ge1xyXG4gICAgICAgIGlmIChkaXNhYmxlZCkgcmV0dXJuO1xyXG4gICAgICAgIGlucHV0UmVmLmN1cnJlbnQ/LmNsaWNrKCk7XHJcbiAgICAgIH19XHJcbiAgICA+XHJcbiAgICAgIDxVcGxvYWQgY2xhc3NOYW1lPVwidy0xMCBoLTEwIHRleHQtZ3JheS00MDAgbXgtYXV0byBtYi0yXCIgLz5cclxuICAgICAgPGg0IGNsYXNzTmFtZT1cInRleHQtYmFzZSBmb250LXNlbWlib2xkIHRleHQtd2hpdGUgbWItMVwiPnt0aXRsZX08L2g0PlxyXG4gICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwIHRleHQteHMgbWItMlwiPntkZXNjcmlwdGlvbn08L3A+XHJcbiAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTUwMFwiPlBERiwgQ1NWLCBQTkcsIEpQRyAoTWF4IDUwTUIgZWFjaCk8L3A+XHJcbiAgICAgIDxpbnB1dFxyXG4gICAgICAgIHJlZj17aW5wdXRSZWZ9XHJcbiAgICAgICAgdHlwZT1cImZpbGVcIlxyXG4gICAgICAgIG11bHRpcGxlXHJcbiAgICAgICAgYWNjZXB0PXthY2NlcHRlZFR5cGVzLmpvaW4oJywnKX1cclxuICAgICAgICBvbkNoYW5nZT17KGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICBpZiAoZGlzYWJsZWQpIHJldHVybjtcclxuICAgICAgICAgIGNvbnN0IHNlbGVjdGVkID0gZXZlbnQudGFyZ2V0LmZpbGVzID8gQXJyYXkuZnJvbShldmVudC50YXJnZXQuZmlsZXMpIDogW107XHJcbiAgICAgICAgICBoYW5kbGVBZGQoc2VsZWN0ZWQsIGNhdGVnb3J5KTtcclxuICAgICAgICAgIC8vIFJlc2V0IGlucHV0IHNvIHNhbWUgZmlsZSBjYW4gYmUgc2VsZWN0ZWQgYWdhaW4gbGF0ZXJcclxuICAgICAgICAgIGV2ZW50LnRhcmdldC52YWx1ZSA9ICcnO1xyXG4gICAgICAgIH19XHJcbiAgICAgICAgY2xhc3NOYW1lPVwiaGlkZGVuXCJcclxuICAgICAgLz5cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcblxyXG4gIGNvbnN0IHJlbmRlckZpbGVDYXJkID0gKGZpbGU6IERlYWxVcGxvYWRGaWxlRGlzcGxheSkgPT4gKFxyXG4gICAgPGRpdlxyXG4gICAgICBrZXk9e2ZpbGUuaWR9XHJcbiAgICAgIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIGJnLWdyYXktODAwLzUwIGJvcmRlciBib3JkZXItZ3JheS03MDAvMzAgcm91bmRlZC1sZyBwLTIuNVwiXHJcbiAgICA+XHJcbiAgICAgIHtnZXRTdGF0dXNJY29uKGZpbGUuc3RhdHVzKX1cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgbWluLXctMFwiPlxyXG4gICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC13aGl0ZSB0cnVuY2F0ZVwiPntmaWxlLm5hbWV9PC9wPlxyXG4gICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTUwMFwiPnsoZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQpLnRvRml4ZWQoMil9IE1CPC9wPlxyXG4gICAgICAgIHtmaWxlLmVycm9yICYmIGZpbGUuc3RhdHVzID09PSAnZXJyb3InICYmIChcclxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1yZWQtNDAwIHRydW5jYXRlXCI+e2ZpbGUuZXJyb3J9PC9wPlxyXG4gICAgICAgICl9XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICB7ZmlsZS5zdGF0dXMgPT09ICd1cGxvYWRpbmcnICYmIChcclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMjQgaC0xIGJnLWdyYXktNzAwIHJvdW5kZWQtZnVsbCBvdmVyZmxvdy1oaWRkZW5cIj5cclxuICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiaC1mdWxsIGJnLWluZGlnby01MDAgdHJhbnNpdGlvbi1hbGxcIlxyXG4gICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYCR7TWF0aC5taW4oMTAwLCBNYXRoLm1heCgwLCBmaWxlLnByb2dyZXNzKSl9JWAgfX1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICl9XHJcbiAgICAgIDxidXR0b25cclxuICAgICAgICBvbkNsaWNrPXsoZXZlbnQpID0+IHtcclxuICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgaWYgKGRpc2FibGVkKSByZXR1cm47XHJcbiAgICAgICAgICBvblJlbW92ZUZpbGUoZmlsZS5pZCk7XHJcbiAgICAgICAgfX1cclxuICAgICAgICBjbGFzc05hbWU9e2B0ZXh0LWdyYXktNDAwIHRyYW5zaXRpb24tY29sb3JzICR7XHJcbiAgICAgICAgICBkaXNhYmxlZCA/ICdjdXJzb3Itbm90LWFsbG93ZWQgb3BhY2l0eS02MCcgOiAnaG92ZXI6dGV4dC1ncmF5LTMwMCdcclxuICAgICAgICB9YH1cclxuICAgICAgPlxyXG4gICAgICAgIDxYIGNsYXNzTmFtZT1cInctNCBoLTRcIiAvPlxyXG4gICAgICA8L2J1dHRvbj5cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcblxyXG4gIGNvbnN0IHRvdGFsRXJyb3IgPSBoZWxwZXJUZXh0ID8/IGxvY2FsRXJyb3I7XHJcblxyXG4gIC8vIFNwbGl0IGZpbGVzIGludG8gdHdvIGNvbHVtbnMgZXZlbmx5XHJcbiAgY29uc3QgbWlkcG9pbnQgPSBNYXRoLmNlaWwoZmlsZXMubGVuZ3RoIC8gMik7XHJcbiAgY29uc3QgbGVmdENvbHVtbkZpbGVzID0gZmlsZXMuc2xpY2UoMCwgbWlkcG9pbnQpO1xyXG4gIGNvbnN0IHJpZ2h0Q29sdW1uRmlsZXMgPSBmaWxlcy5zbGljZShtaWRwb2ludCk7XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNFwiPlxyXG4gICAgICB7dG90YWxFcnJvciAmJiAoXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1yZWQtNTAwLzIwIGJvcmRlciBib3JkZXItcmVkLTUwMC8zMCByb3VuZGVkLWxnIHAtMyBmbGV4IGl0ZW1zLXN0YXJ0IGdhcC0yXCI+XHJcbiAgICAgICAgICA8QWxlcnRDaXJjbGUgY2xhc3NOYW1lPVwidy01IGgtNSB0ZXh0LXJlZC00MDAgZmxleC1zaHJpbmstMCBtdC0wLjVcIiAvPlxyXG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1yZWQtMzAwIHRleHQtc21cIj57dG90YWxFcnJvcn08L3A+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICl9XHJcblxyXG4gICAgICB7LyogVXBsb2FkIHpvbmVzICovfVxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17YGdyaWQgZ3JpZC1jb2xzLTEgZ2FwLTMgJHtyaWdodFNsb3QgPyAnbWQ6Z3JpZC1jb2xzLVthdXRvXzFmcl8xZnJdJyA6ICdtZDpncmlkLWNvbHMtMid9YH0+XHJcbiAgICAgICAge3JpZ2h0U2xvdH1cclxuXHJcbiAgICAgICAge3JlbmRlclVwbG9hZFpvbmUoXHJcbiAgICAgICAgICAnYXBwbGljYXRpb24nLFxyXG4gICAgICAgICAgJ0FwcGxpY2F0aW9uJyxcclxuICAgICAgICAgICdVcGxvYWQgbG9hbiBhcHBsaWNhdGlvbiBkb2NzJyxcclxuICAgICAgICAgIGlzRHJhZ2dpbmdBcHAsXHJcbiAgICAgICAgICBzZXRJc0RyYWdnaW5nQXBwLFxyXG4gICAgICAgICAgYXBwSW5wdXRSZWYsXHJcbiAgICAgICAgKX1cclxuXHJcbiAgICAgICAge3JlbmRlclVwbG9hZFpvbmUoXHJcbiAgICAgICAgICAnc3RhdGVtZW50cycsXHJcbiAgICAgICAgICAnQmFuayBTdGF0ZW1lbnRzJyxcclxuICAgICAgICAgICdVcGxvYWQgMysgbW9udGhzIG9mIHN0YXRlbWVudHMnLFxyXG4gICAgICAgICAgaXNEcmFnZ2luZ1N0bXQsXHJcbiAgICAgICAgICBzZXRJc0RyYWdnaW5nU3RtdCxcclxuICAgICAgICAgIHN0bXRJbnB1dFJlZixcclxuICAgICAgICApfVxyXG4gICAgICA8L2Rpdj5cclxuXHJcbiAgICAgIHsvKiBGaWxlIGxpc3QgaW4gMiBldmVuIGNvbHVtbnMgKi99XHJcbiAgICAgIHtmaWxlcy5sZW5ndGggPiAwICYmIChcclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktM1wiPlxyXG4gICAgICAgICAgPGg1IGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTMwMFwiPlxyXG4gICAgICAgICAgICBVcGxvYWRlZCBGaWxlcyAoe2ZpbGVzLmxlbmd0aH0gLyB7bWF4RmlsZXN9KVxyXG4gICAgICAgICAgPC9oNT5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBnYXAtM1wiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMlwiPlxyXG4gICAgICAgICAgICAgIHtsZWZ0Q29sdW1uRmlsZXMubWFwKHJlbmRlckZpbGVDYXJkKX1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0yXCI+XHJcbiAgICAgICAgICAgICAge3JpZ2h0Q29sdW1uRmlsZXMubWFwKHJlbmRlckZpbGVDYXJkKX1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgKX1cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn1cclxuIl0sImZpbGUiOiJDOi9Qcm9qZWN0cy9IdWdlIENhcGl0YWwvaHVnZS1jYXBpdGFsLW1nbXQvc3JjL2NvbXBvbmVudHMvRGVhbHMvRG9jdW1lbnRVcGxvYWQudHN4In0=