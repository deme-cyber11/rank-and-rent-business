import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/pages/data/google-search-console/page.tsx");import __vite__cjsImport0_react_jsxDevRuntime from "/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=9303f522"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
import * as RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
let prevRefreshReg;
let prevRefreshSig;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  prevRefreshReg = window.$RefreshReg$;
  prevRefreshSig = window.$RefreshSig$;
  window.$RefreshReg$ = RefreshRuntime.getRefreshReg("C:/Projects/Source 4 Industries/src/pages/data/google-search-console/page.tsx");
  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;
}
var _s = $RefreshSig$();
import __vite__cjsImport3_react from "/node_modules/.vite/deps/react.js?v=9303f522"; const useEffect = __vite__cjsImport3_react["useEffect"]; const useState = __vite__cjsImport3_react["useState"];
import { useSearchParams } from "/node_modules/.vite/deps/react-router-dom.js?v=9303f522";
import { GSCDashboardClient } from "/src/components/dashboard/gsc-dashboard-client.tsx";
import { GSCBackfill } from "/src/components/dashboard/GSCBackfill.tsx";
import { SyncButton } from "/src/components/dashboard/SyncButton.tsx";
import { useAuth } from "/src/vite/auth/auth-provider.tsx";
export function GoogleSearchConsolePage() {
  _s();
  const auth = useAuth();
  const [searchParams] = useSearchParams();
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const startDate = searchParams.get("from") || void 0;
  const endDate = searchParams.get("to") || void 0;
  useEffect(() => {
    const token = auth.session?.access_token;
    if (!token) return;
    async function fetchData() {
      try {
        setLoading(true);
        setError(null);
        const params = new URLSearchParams();
        if (startDate) params.set("startDate", startDate);
        if (endDate) params.set("endDate", endDate);
        const response = await fetch(`/api/data/google-search-console?${params}`, {
          headers: {
            "Authorization": `Bearer ${token}`
          }
        });
        const result = await response.json();
        if (!response.ok) {
          throw new Error(result.error || "Failed to fetch GSC data");
        }
        setData(result);
      } catch (err) {
        console.error("Error fetching GSC data:", err);
        setError(err instanceof Error ? err.message : "An error occurred");
      } finally {
        setLoading(false);
      }
    }
    fetchData();
  }, [auth.session?.access_token, startDate, endDate]);
  if (loading) {
    return /* @__PURE__ */ jsxDEV("div", { className: "flex items-center justify-center h-96", children: /* @__PURE__ */ jsxDEV("div", { className: "text-muted-foreground", children: "Loading GSC data..." }, void 0, false, {
      fileName: "C:/Projects/Source 4 Industries/src/pages/data/google-search-console/page.tsx",
      lineNumber: 98,
      columnNumber: 17
    }, this) }, void 0, false, {
      fileName: "C:/Projects/Source 4 Industries/src/pages/data/google-search-console/page.tsx",
      lineNumber: 97,
      columnNumber: 7
    }, this);
  }
  if (error) {
    return /* @__PURE__ */ jsxDEV("div", { className: "flex items-center justify-center h-96", children: /* @__PURE__ */ jsxDEV("div", { className: "text-red-500", children: [
      "Error: ",
      error
    ] }, void 0, true, {
      fileName: "C:/Projects/Source 4 Industries/src/pages/data/google-search-console/page.tsx",
      lineNumber: 106,
      columnNumber: 17
    }, this) }, void 0, false, {
      fileName: "C:/Projects/Source 4 Industries/src/pages/data/google-search-console/page.tsx",
      lineNumber: 105,
      columnNumber: 7
    }, this);
  }
  if (!data) {
    return /* @__PURE__ */ jsxDEV("div", { className: "flex items-center justify-center h-96", children: /* @__PURE__ */ jsxDEV("div", { className: "text-muted-foreground", children: "No data available" }, void 0, false, {
      fileName: "C:/Projects/Source 4 Industries/src/pages/data/google-search-console/page.tsx",
      lineNumber: 114,
      columnNumber: 17
    }, this) }, void 0, false, {
      fileName: "C:/Projects/Source 4 Industries/src/pages/data/google-search-console/page.tsx",
      lineNumber: 113,
      columnNumber: 7
    }, this);
  }
  return /* @__PURE__ */ jsxDEV("div", { className: "flex flex-col gap-6", children: [
    /* @__PURE__ */ jsxDEV("div", { className: "flex flex-col gap-4 px-6 pt-6", children: /* @__PURE__ */ jsxDEV("div", { className: "flex justify-between items-start gap-4", children: [
      /* @__PURE__ */ jsxDEV(GSCBackfill, {}, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/pages/data/google-search-console/page.tsx",
        lineNumber: 123,
        columnNumber: 21
      }, this),
      /* @__PURE__ */ jsxDEV(SyncButton, { endpoint: "/api/sync/gsc" }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/pages/data/google-search-console/page.tsx",
        lineNumber: 124,
        columnNumber: 21
      }, this)
    ] }, void 0, true, {
      fileName: "C:/Projects/Source 4 Industries/src/pages/data/google-search-console/page.tsx",
      lineNumber: 122,
      columnNumber: 17
    }, this) }, void 0, false, {
      fileName: "C:/Projects/Source 4 Industries/src/pages/data/google-search-console/page.tsx",
      lineNumber: 121,
      columnNumber: 13
    }, this),
    /* @__PURE__ */ jsxDEV(
      GSCDashboardClient,
      {
        overview: data.overview,
        topQueries: data.topQueries,
        topPages: data.topPages,
        deviceBreakdown: data.deviceBreakdown,
        dailyPerformance: data.dailyPerformance,
        currentStartDate: startDate,
        currentEndDate: endDate
      },
      void 0,
      false,
      {
        fileName: "C:/Projects/Source 4 Industries/src/pages/data/google-search-console/page.tsx",
        lineNumber: 127,
        columnNumber: 13
      },
      this
    )
  ] }, void 0, true, {
    fileName: "C:/Projects/Source 4 Industries/src/pages/data/google-search-console/page.tsx",
    lineNumber: 120,
    columnNumber: 5
  }, this);
}
_s(GoogleSearchConsolePage, "nYHEoPaPgpxi7Givxyis+VucpbA=", false, function() {
  return [useAuth, useSearchParams];
});
_c = GoogleSearchConsolePage;
var _c;
$RefreshReg$(_c, "GoogleSearchConsolePage");
if (import.meta.hot && !inWebWorker) {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}
if (import.meta.hot && !inWebWorker) {
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("C:/Projects/Source 4 Industries/src/pages/data/google-search-console/page.tsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("C:/Projects/Source 4 Industries/src/pages/data/google-search-console/page.tsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJtYXBwaW5ncyI6IkFBOEVnQjs7Ozs7Ozs7Ozs7Ozs7Ozs7QUE5RWhCLFNBQVNBLFdBQVdDLGdCQUFnQjtBQUNwQyxTQUFTQyx1QkFBdUI7QUFDaEMsU0FBU0MsMEJBQTBCO0FBQ25DLFNBQVNDLG1CQUFtQjtBQUM1QixTQUFTQyxrQkFBa0I7QUFDM0IsU0FBU0MsZUFBZTtBQXVCakIsZ0JBQVNDLDBCQUEwQjtBQUFBQyxLQUFBO0FBQ3RDLFFBQU1DLE9BQU9ILFFBQVE7QUFDckIsUUFBTSxDQUFDSSxZQUFZLElBQUlSLGdCQUFnQjtBQUN2QyxRQUFNLENBQUNTLE1BQU1DLE9BQU8sSUFBSVgsU0FBeUIsSUFBSTtBQUNyRCxRQUFNLENBQUNZLFNBQVNDLFVBQVUsSUFBSWIsU0FBUyxJQUFJO0FBQzNDLFFBQU0sQ0FBQ2MsT0FBT0MsUUFBUSxJQUFJZixTQUF3QixJQUFJO0FBRXRELFFBQU1nQixZQUFZUCxhQUFhUSxJQUFJLE1BQU0sS0FBS0M7QUFDOUMsUUFBTUMsVUFBVVYsYUFBYVEsSUFBSSxJQUFJLEtBQUtDO0FBRTFDbkIsWUFBVSxNQUFNO0FBQ1osVUFBTXFCLFFBQVFaLEtBQUthLFNBQVNDO0FBQzVCLFFBQUksQ0FBQ0YsTUFBTztBQUVaLG1CQUFlRyxZQUFZO0FBQ3ZCLFVBQUk7QUFDQVYsbUJBQVcsSUFBSTtBQUNmRSxpQkFBUyxJQUFJO0FBRWIsY0FBTVMsU0FBUyxJQUFJQyxnQkFBZ0I7QUFDbkMsWUFBSVQsVUFBV1EsUUFBT0UsSUFBSSxhQUFhVixTQUFTO0FBQ2hELFlBQUlHLFFBQVNLLFFBQU9FLElBQUksV0FBV1AsT0FBTztBQUUxQyxjQUFNUSxXQUFXLE1BQU1DLE1BQU0sbUNBQW1DSixNQUFNLElBQUk7QUFBQSxVQUN0RUssU0FBUztBQUFBLFlBQ0wsaUJBQWlCLFVBQVVULEtBQUs7QUFBQSxVQUNwQztBQUFBLFFBQ0osQ0FBQztBQUVELGNBQU1VLFNBQVMsTUFBTUgsU0FBU0ksS0FBSztBQUVuQyxZQUFJLENBQUNKLFNBQVNLLElBQUk7QUFDZCxnQkFBTSxJQUFJQyxNQUFNSCxPQUFPaEIsU0FBUywwQkFBMEI7QUFBQSxRQUM5RDtBQUVBSCxnQkFBUW1CLE1BQU07QUFBQSxNQUNsQixTQUFTSSxLQUFLO0FBQ1ZDLGdCQUFRckIsTUFBTSw0QkFBNEJvQixHQUFHO0FBQzdDbkIsaUJBQVNtQixlQUFlRCxRQUFRQyxJQUFJRSxVQUFVLG1CQUFtQjtBQUFBLE1BQ3JFLFVBQUM7QUFDR3ZCLG1CQUFXLEtBQUs7QUFBQSxNQUNwQjtBQUFBLElBQ0o7QUFFQVUsY0FBVTtBQUFBLEVBQ2QsR0FBRyxDQUFDZixLQUFLYSxTQUFTQyxjQUFjTixXQUFXRyxPQUFPLENBQUM7QUFFbkQsTUFBSVAsU0FBUztBQUNULFdBQ0ksdUJBQUMsU0FBSSxXQUFVLHlDQUNYLGlDQUFDLFNBQUksV0FBVSx5QkFBd0IsbUNBQXZDO0FBQUE7QUFBQTtBQUFBO0FBQUEsV0FBMEQsS0FEOUQ7QUFBQTtBQUFBO0FBQUE7QUFBQSxXQUVBO0FBQUEsRUFFUjtBQUVBLE1BQUlFLE9BQU87QUFDUCxXQUNJLHVCQUFDLFNBQUksV0FBVSx5Q0FDWCxpQ0FBQyxTQUFJLFdBQVUsZ0JBQWU7QUFBQTtBQUFBLE1BQVFBO0FBQUFBLFNBQXRDO0FBQUE7QUFBQTtBQUFBO0FBQUEsV0FBNEMsS0FEaEQ7QUFBQTtBQUFBO0FBQUE7QUFBQSxXQUVBO0FBQUEsRUFFUjtBQUVBLE1BQUksQ0FBQ0osTUFBTTtBQUNQLFdBQ0ksdUJBQUMsU0FBSSxXQUFVLHlDQUNYLGlDQUFDLFNBQUksV0FBVSx5QkFBd0IsaUNBQXZDO0FBQUE7QUFBQTtBQUFBO0FBQUEsV0FBd0QsS0FENUQ7QUFBQTtBQUFBO0FBQUE7QUFBQSxXQUVBO0FBQUEsRUFFUjtBQUVBLFNBQ0ksdUJBQUMsU0FBSSxXQUFVLHVCQUNYO0FBQUEsMkJBQUMsU0FBSSxXQUFVLGlDQUNYLGlDQUFDLFNBQUksV0FBVSwwQ0FDWDtBQUFBLDZCQUFDLGlCQUFEO0FBQUE7QUFBQTtBQUFBO0FBQUEsYUFBWTtBQUFBLE1BQ1osdUJBQUMsY0FBVyxVQUFTLG1CQUFyQjtBQUFBO0FBQUE7QUFBQTtBQUFBLGFBQW9DO0FBQUEsU0FGeEM7QUFBQTtBQUFBO0FBQUE7QUFBQSxXQUdBLEtBSko7QUFBQTtBQUFBO0FBQUE7QUFBQSxXQUtBO0FBQUEsSUFDQTtBQUFBLE1BQUM7QUFBQTtBQUFBLFFBQ0csVUFBVUEsS0FBSzJCO0FBQUFBLFFBQ2YsWUFBWTNCLEtBQUs0QjtBQUFBQSxRQUNqQixVQUFVNUIsS0FBSzZCO0FBQUFBLFFBQ2YsaUJBQWlCN0IsS0FBSzhCO0FBQUFBLFFBQ3RCLGtCQUFrQjlCLEtBQUsrQjtBQUFBQSxRQUN2QixrQkFBa0J6QjtBQUFBQSxRQUNsQixnQkFBZ0JHO0FBQUFBO0FBQUFBLE1BUHBCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQU80QjtBQUFBLE9BZGhDO0FBQUE7QUFBQTtBQUFBO0FBQUEsU0FnQkE7QUFFUjtBQUFDWixHQTFGZUQseUJBQXVCO0FBQUEsVUFDdEJELFNBQ1VKLGVBQWU7QUFBQTtBQUFBeUMsS0FGMUJwQztBQUF1QixJQUFBb0M7QUFBQUMsYUFBQUQsSUFBQSIsIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZVN0YXRlIiwidXNlU2VhcmNoUGFyYW1zIiwiR1NDRGFzaGJvYXJkQ2xpZW50IiwiR1NDQmFja2ZpbGwiLCJTeW5jQnV0dG9uIiwidXNlQXV0aCIsIkdvb2dsZVNlYXJjaENvbnNvbGVQYWdlIiwiX3MiLCJhdXRoIiwic2VhcmNoUGFyYW1zIiwiZGF0YSIsInNldERhdGEiLCJsb2FkaW5nIiwic2V0TG9hZGluZyIsImVycm9yIiwic2V0RXJyb3IiLCJzdGFydERhdGUiLCJnZXQiLCJ1bmRlZmluZWQiLCJlbmREYXRlIiwidG9rZW4iLCJzZXNzaW9uIiwiYWNjZXNzX3Rva2VuIiwiZmV0Y2hEYXRhIiwicGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwic2V0IiwicmVzcG9uc2UiLCJmZXRjaCIsImhlYWRlcnMiLCJyZXN1bHQiLCJqc29uIiwib2siLCJFcnJvciIsImVyciIsImNvbnNvbGUiLCJtZXNzYWdlIiwib3ZlcnZpZXciLCJ0b3BRdWVyaWVzIiwidG9wUGFnZXMiLCJkZXZpY2VCcmVha2Rvd24iLCJkYWlseVBlcmZvcm1hbmNlIiwiX2MiLCIkUmVmcmVzaFJlZyQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZXMiOlsicGFnZS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgeyB1c2VTZWFyY2hQYXJhbXMgfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xyXG5pbXBvcnQgeyBHU0NEYXNoYm9hcmRDbGllbnQgfSBmcm9tIFwiQC9jb21wb25lbnRzL2Rhc2hib2FyZC9nc2MtZGFzaGJvYXJkLWNsaWVudFwiO1xyXG5pbXBvcnQgeyBHU0NCYWNrZmlsbCB9IGZyb20gXCJAL2NvbXBvbmVudHMvZGFzaGJvYXJkL0dTQ0JhY2tmaWxsXCI7XHJcbmltcG9ydCB7IFN5bmNCdXR0b24gfSBmcm9tIFwiQC9jb21wb25lbnRzL2Rhc2hib2FyZC9TeW5jQnV0dG9uXCI7XHJcbmltcG9ydCB7IHVzZUF1dGggfSBmcm9tIFwiQC92aXRlL2F1dGgvYXV0aC1wcm92aWRlclwiO1xyXG5pbXBvcnQgdHlwZSB7XHJcbiAgICBnZXRHU0NPdmVydmlldyxcclxuICAgIGdldEdTQ1RvcFF1ZXJpZXMsXHJcbiAgICBnZXRHU0NUb3BQYWdlcyxcclxuICAgIGdldEdTQ0RldmljZUJyZWFrZG93bixcclxuICAgIGdldEdTQ0RhaWx5UGVyZm9ybWFuY2VcclxufSBmcm9tIFwiQC9saWIvZGF0YVwiO1xyXG5cclxudHlwZSBHU0NPdmVydmlld1Jlc3VsdCA9IEF3YWl0ZWQ8UmV0dXJuVHlwZTx0eXBlb2YgZ2V0R1NDT3ZlcnZpZXc+PjtcclxudHlwZSBHU0NUb3BRdWVyaWVzUmVzdWx0ID0gQXdhaXRlZDxSZXR1cm5UeXBlPHR5cGVvZiBnZXRHU0NUb3BRdWVyaWVzPj47XHJcbnR5cGUgR1NDVG9wUGFnZXNSZXN1bHQgPSBBd2FpdGVkPFJldHVyblR5cGU8dHlwZW9mIGdldEdTQ1RvcFBhZ2VzPj47XHJcbnR5cGUgR1NDRGV2aWNlQnJlYWtkb3duUmVzdWx0ID0gQXdhaXRlZDxSZXR1cm5UeXBlPHR5cGVvZiBnZXRHU0NEZXZpY2VCcmVha2Rvd24+PjtcclxudHlwZSBHU0NEYWlseVBlcmZvcm1hbmNlUmVzdWx0ID0gQXdhaXRlZDxSZXR1cm5UeXBlPHR5cGVvZiBnZXRHU0NEYWlseVBlcmZvcm1hbmNlPj47XHJcblxyXG5pbnRlcmZhY2UgR1NDRGF0YSB7XHJcbiAgICBvdmVydmlldzogR1NDT3ZlcnZpZXdSZXN1bHQ7XHJcbiAgICB0b3BRdWVyaWVzOiBHU0NUb3BRdWVyaWVzUmVzdWx0O1xyXG4gICAgdG9wUGFnZXM6IEdTQ1RvcFBhZ2VzUmVzdWx0O1xyXG4gICAgZGV2aWNlQnJlYWtkb3duOiBHU0NEZXZpY2VCcmVha2Rvd25SZXN1bHQ7XHJcbiAgICBkYWlseVBlcmZvcm1hbmNlOiBHU0NEYWlseVBlcmZvcm1hbmNlUmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gR29vZ2xlU2VhcmNoQ29uc29sZVBhZ2UoKSB7XHJcbiAgICBjb25zdCBhdXRoID0gdXNlQXV0aCgpO1xyXG4gICAgY29uc3QgW3NlYXJjaFBhcmFtc10gPSB1c2VTZWFyY2hQYXJhbXMoKTtcclxuICAgIGNvbnN0IFtkYXRhLCBzZXREYXRhXSA9IHVzZVN0YXRlPEdTQ0RhdGEgfCBudWxsPihudWxsKTtcclxuICAgIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xyXG4gICAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcclxuXHJcbiAgICBjb25zdCBzdGFydERhdGUgPSBzZWFyY2hQYXJhbXMuZ2V0KCdmcm9tJykgfHwgdW5kZWZpbmVkO1xyXG4gICAgY29uc3QgZW5kRGF0ZSA9IHNlYXJjaFBhcmFtcy5nZXQoJ3RvJykgfHwgdW5kZWZpbmVkO1xyXG5cclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdG9rZW4gPSBhdXRoLnNlc3Npb24/LmFjY2Vzc190b2tlbjtcclxuICAgICAgICBpZiAoIXRva2VuKSByZXR1cm47XHJcblxyXG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uIGZldGNoRGF0YSgpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHNldExvYWRpbmcodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBzZXRFcnJvcihudWxsKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhcnREYXRlKSBwYXJhbXMuc2V0KCdzdGFydERhdGUnLCBzdGFydERhdGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVuZERhdGUpIHBhcmFtcy5zZXQoJ2VuZERhdGUnLCBlbmREYXRlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2RhdGEvZ29vZ2xlLXNlYXJjaC1jb25zb2xlPyR7cGFyYW1zfWAsIHtcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3Rva2VufWBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihyZXN1bHQuZXJyb3IgfHwgJ0ZhaWxlZCB0byBmZXRjaCBHU0MgZGF0YScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHNldERhdGEocmVzdWx0KTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBHU0MgZGF0YTonLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgc2V0RXJyb3IoZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdBbiBlcnJvciBvY2N1cnJlZCcpO1xyXG4gICAgICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZldGNoRGF0YSgpO1xyXG4gICAgfSwgW2F1dGguc2Vzc2lvbj8uYWNjZXNzX3Rva2VuLCBzdGFydERhdGUsIGVuZERhdGVdKTtcclxuXHJcbiAgICBpZiAobG9hZGluZykge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgaC05NlwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LW11dGVkLWZvcmVncm91bmRcIj5Mb2FkaW5nIEdTQyBkYXRhLi4uPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBoLTk2XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtcmVkLTUwMFwiPkVycm9yOiB7ZXJyb3J9PC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFkYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBoLTk2XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiPk5vIGRhdGEgYXZhaWxhYmxlPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgZ2FwLTZcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGdhcC00IHB4LTYgcHQtNlwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1zdGFydCBnYXAtNFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxHU0NCYWNrZmlsbCAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxTeW5jQnV0dG9uIGVuZHBvaW50PVwiL2FwaS9zeW5jL2dzY1wiIC8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxHU0NEYXNoYm9hcmRDbGllbnRcclxuICAgICAgICAgICAgICAgIG92ZXJ2aWV3PXtkYXRhLm92ZXJ2aWV3fVxyXG4gICAgICAgICAgICAgICAgdG9wUXVlcmllcz17ZGF0YS50b3BRdWVyaWVzfVxyXG4gICAgICAgICAgICAgICAgdG9wUGFnZXM9e2RhdGEudG9wUGFnZXN9XHJcbiAgICAgICAgICAgICAgICBkZXZpY2VCcmVha2Rvd249e2RhdGEuZGV2aWNlQnJlYWtkb3dufVxyXG4gICAgICAgICAgICAgICAgZGFpbHlQZXJmb3JtYW5jZT17ZGF0YS5kYWlseVBlcmZvcm1hbmNlfVxyXG4gICAgICAgICAgICAgICAgY3VycmVudFN0YXJ0RGF0ZT17c3RhcnREYXRlfVxyXG4gICAgICAgICAgICAgICAgY3VycmVudEVuZERhdGU9e2VuZERhdGV9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG59XHJcbiJdLCJmaWxlIjoiQzovUHJvamVjdHMvU291cmNlIDQgSW5kdXN0cmllcy9zcmMvcGFnZXMvZGF0YS9nb29nbGUtc2VhcmNoLWNvbnNvbGUvcGFnZS50c3gifQ==