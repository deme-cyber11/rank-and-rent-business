import __vite__cjsImport0_react from "/node_modules/.vite/deps/react.js?v=aadb9797"; const useState = __vite__cjsImport0_react["useState"]; const useEffect = __vite__cjsImport0_react["useEffect"];
import { supabase } from "/src/lib/supabase.ts";
export function useDebtSchedules(dealId) {
  const [schedules, setSchedules] = useState([]);
  const [isLoading, setIsLoading] = useState(true);
  const [error, setError] = useState(null);
  const fetchSchedules = async () => {
    try {
      setIsLoading(true);
      setError(null);
      let query = supabase.from("debt_schedules").select(`
          *,
          deal:deals!debt_schedules_deal_id_fkey(id, legal_business_name, dba_name),
          lender:lenders!debt_schedules_lender_id_fkey(id, company_name)
        `).order("created_at", { ascending: false });
      if (dealId) {
        query = query.eq("deal_id", dealId);
      }
      const { data, error: fetchError } = await query;
      if (fetchError) throw fetchError;
      setSchedules(data || []);
    } catch (err) {
      const message = err instanceof Error ? err.message : "Failed to fetch debt schedules";
      setError(message);
      console.error("Error fetching debt schedules:", err);
    } finally {
      setIsLoading(false);
    }
  };
  useEffect(() => {
    fetchSchedules();
  }, [dealId]);
  return {
    schedules,
    isLoading,
    error,
    refetch: fetchSchedules
  };
}
export function useDebtSchedule(scheduleId) {
  const [schedule, setSchedule] = useState(null);
  const [isLoading, setIsLoading] = useState(true);
  const [error, setError] = useState(null);
  const fetchSchedule = async () => {
    if (!scheduleId) {
      setSchedule(null);
      setIsLoading(false);
      return;
    }
    try {
      setIsLoading(true);
      setError(null);
      const { data, error: fetchError } = await supabase.from("debt_schedules").select(`
          *,
          deal:deals!debt_schedules_deal_id_fkey(id, legal_business_name, dba_name),
          lender:lenders!debt_schedules_lender_id_fkey(id, company_name)
        `).eq("id", scheduleId).single();
      if (fetchError) throw fetchError;
      setSchedule(data);
    } catch (err) {
      const message = err instanceof Error ? err.message : "Failed to fetch debt schedule";
      setError(message);
      console.error("Error fetching debt schedule:", err);
    } finally {
      setIsLoading(false);
    }
  };
  useEffect(() => {
    fetchSchedule();
  }, [scheduleId]);
  return {
    schedule,
    isLoading,
    error,
    refetch: fetchSchedule
  };
}
export async function createDebtSchedule(data) {
  const { data: scheduleData, error } = await supabase.from("debt_schedules").insert([data]).select().single();
  if (error) {
    console.error("Error creating debt schedule:", error);
    throw new Error(error.message);
  }
  return scheduleData;
}
export async function updateDebtSchedule(id, data) {
  const { data: scheduleData, error } = await supabase.from("debt_schedules").update(data).eq("id", id).select().single();
  if (error) {
    console.error("Error updating debt schedule:", error);
    throw new Error(error.message);
  }
  return scheduleData;
}
export async function deleteDebtSchedule(id) {
  const { error } = await supabase.from("debt_schedules").delete().eq("id", id);
  if (error) {
    console.error("Error deleting debt schedule:", error);
    throw new Error(error.message);
  }
}
export function useDebtSchedulesMutations() {
  const [isCreating, setIsCreating] = useState(false);
  const [isUpdating, setIsUpdating] = useState(false);
  const [isDeleting, setIsDeleting] = useState(false);
  const create = async (data) => {
    setIsCreating(true);
    try {
      return await createDebtSchedule(data);
    } finally {
      setIsCreating(false);
    }
  };
  const update = async (id, data) => {
    setIsUpdating(true);
    try {
      return await updateDebtSchedule(id, data);
    } finally {
      setIsUpdating(false);
    }
  };
  const remove = async (id) => {
    setIsDeleting(true);
    try {
      await deleteDebtSchedule(id);
    } finally {
      setIsDeleting(false);
    }
  };
  return {
    create,
    update,
    remove,
    isCreating,
    isUpdating,
    isDeleting,
    isMutating: isCreating || isUpdating || isDeleting
  };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZURlYnRTY2hlZHVsZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gdXNlRGVidFNjaGVkdWxlcyBIb29rXHJcbi8vIEN1c3RvbSBob29rIGZvciBtYW5hZ2luZyBkZWJ0IHNjaGVkdWxlcyB3aXRoIFN1cGFiYXNlXHJcblxyXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gJy4uL2xpYi9zdXBhYmFzZSc7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBUWVBFU1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZXhwb3J0IHR5cGUgUGF5bWVudEZyZXF1ZW5jeSA9ICdkYWlseScgfCAnd2Vla2x5JyB8ICdtb250aGx5JztcclxuZXhwb3J0IHR5cGUgRWFybHlQYXlvZmZUeXBlID0gJ3Byb3JhdGVkJyB8ICdyZW1haW5pbmdfYmFsYW5jZScgfCAnZGlzY291bnQnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBEZWJ0U2NoZWR1bGUge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgZGVhbF9pZDogc3RyaW5nIHwgbnVsbDtcclxuICBsZW5kZXJfaWQ6IHN0cmluZyB8IG51bGw7XHJcbiAgZnVuZGVkX2Ftb3VudDogbnVtYmVyO1xyXG4gIGZhY3Rvcl9yYXRlOiBudW1iZXIgfCBudWxsO1xyXG4gIGludGVyZXN0X3JhdGU6IG51bWJlciB8IG51bGw7XHJcbiAgcGF5bWVudF9hbW91bnQ6IG51bWJlcjtcclxuICBwYXltZW50X2ZyZXF1ZW5jeTogUGF5bWVudEZyZXF1ZW5jeTtcclxuICB0ZXJtX2xlbmd0aDogbnVtYmVyIHwgbnVsbDtcclxuICBmaXJzdF9wYXltZW50X2RhdGU6IHN0cmluZyB8IG51bGw7XHJcbiAgcGF5b2ZmX2RhdGU6IHN0cmluZyB8IG51bGw7XHJcbiAgdG90YWxfcGF5YmFjazogbnVtYmVyIHwgbnVsbDtcclxuICBlYXJseV9wYXlvZmZfdHlwZTogRWFybHlQYXlvZmZUeXBlIHwgbnVsbDtcclxuICBub3Rlczogc3RyaW5nIHwgbnVsbDtcclxuICBjcmVhdGVkX2F0OiBzdHJpbmc7XHJcbiAgdXBkYXRlZF9hdDogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIERlYnRTY2hlZHVsZVdpdGhSZWxhdGlvbnMgZXh0ZW5kcyBEZWJ0U2NoZWR1bGUge1xyXG4gIGRlYWw/OiB7XHJcbiAgICBpZDogc3RyaW5nO1xyXG4gICAgbGVnYWxfYnVzaW5lc3NfbmFtZTogc3RyaW5nO1xyXG4gICAgZGJhX25hbWU6IHN0cmluZyB8IG51bGw7XHJcbiAgfSB8IG51bGw7XHJcbiAgbGVuZGVyPzoge1xyXG4gICAgaWQ6IHN0cmluZztcclxuICAgIGNvbXBhbnlfbmFtZTogc3RyaW5nO1xyXG4gIH0gfCBudWxsO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZURlYnRTY2hlZHVsZUlucHV0IHtcclxuICBkZWFsX2lkPzogc3RyaW5nIHwgbnVsbDtcclxuICBsZW5kZXJfaWQ/OiBzdHJpbmcgfCBudWxsO1xyXG4gIGZ1bmRlZF9hbW91bnQ6IG51bWJlcjtcclxuICBmYWN0b3JfcmF0ZT86IG51bWJlciB8IG51bGw7XHJcbiAgaW50ZXJlc3RfcmF0ZT86IG51bWJlciB8IG51bGw7XHJcbiAgcGF5bWVudF9hbW91bnQ6IG51bWJlcjtcclxuICBwYXltZW50X2ZyZXF1ZW5jeTogUGF5bWVudEZyZXF1ZW5jeTtcclxuICB0ZXJtX2xlbmd0aD86IG51bWJlciB8IG51bGw7XHJcbiAgZmlyc3RfcGF5bWVudF9kYXRlPzogc3RyaW5nIHwgbnVsbDtcclxuICBwYXlvZmZfZGF0ZT86IHN0cmluZyB8IG51bGw7XHJcbiAgdG90YWxfcGF5YmFjaz86IG51bWJlciB8IG51bGw7XHJcbiAgZWFybHlfcGF5b2ZmX3R5cGU/OiBFYXJseVBheW9mZlR5cGUgfCBudWxsO1xyXG4gIG5vdGVzPzogc3RyaW5nIHwgbnVsbDtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgVXBkYXRlRGVidFNjaGVkdWxlSW5wdXQgPSBQYXJ0aWFsPE9taXQ8RGVidFNjaGVkdWxlLCAnaWQnIHwgJ2NyZWF0ZWRfYXQnIHwgJ3VwZGF0ZWRfYXQnPj47XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBNQUlOIEhPT0sgLSBGZXRjaCBhbGwgc2NoZWR1bGVzIChvcHRpb25hbGx5IGJ5IGRlYWwpXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXNlRGVidFNjaGVkdWxlcyhkZWFsSWQ/OiBzdHJpbmcpIHtcclxuICBjb25zdCBbc2NoZWR1bGVzLCBzZXRTY2hlZHVsZXNdID0gdXNlU3RhdGU8RGVidFNjaGVkdWxlV2l0aFJlbGF0aW9uc1tdPihbXSk7XHJcbiAgY29uc3QgW2lzTG9hZGluZywgc2V0SXNMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xyXG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XHJcblxyXG4gIGNvbnN0IGZldGNoU2NoZWR1bGVzID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgc2V0SXNMb2FkaW5nKHRydWUpO1xyXG4gICAgICBzZXRFcnJvcihudWxsKTtcclxuXHJcbiAgICAgIGxldCBxdWVyeSA9IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ2RlYnRfc2NoZWR1bGVzJylcclxuICAgICAgICAuc2VsZWN0KGBcclxuICAgICAgICAgICosXHJcbiAgICAgICAgICBkZWFsOmRlYWxzIWRlYnRfc2NoZWR1bGVzX2RlYWxfaWRfZmtleShpZCwgbGVnYWxfYnVzaW5lc3NfbmFtZSwgZGJhX25hbWUpLFxyXG4gICAgICAgICAgbGVuZGVyOmxlbmRlcnMhZGVidF9zY2hlZHVsZXNfbGVuZGVyX2lkX2ZrZXkoaWQsIGNvbXBhbnlfbmFtZSlcclxuICAgICAgICBgKVxyXG4gICAgICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcclxuXHJcbiAgICAgIGlmIChkZWFsSWQpIHtcclxuICAgICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdkZWFsX2lkJywgZGVhbElkKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvcjogZmV0Y2hFcnJvciB9ID0gYXdhaXQgcXVlcnk7XHJcblxyXG4gICAgICBpZiAoZmV0Y2hFcnJvcikgdGhyb3cgZmV0Y2hFcnJvcjtcclxuICAgICAgc2V0U2NoZWR1bGVzKGRhdGEgfHwgW10pO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBmZXRjaCBkZWJ0IHNjaGVkdWxlcyc7XHJcbiAgICAgIHNldEVycm9yKG1lc3NhZ2UpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBkZWJ0IHNjaGVkdWxlczonLCBlcnIpO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgZmV0Y2hTY2hlZHVsZXMoKTtcclxuICB9LCBbZGVhbElkXSk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBzY2hlZHVsZXMsXHJcbiAgICBpc0xvYWRpbmcsXHJcbiAgICBlcnJvcixcclxuICAgIHJlZmV0Y2g6IGZldGNoU2NoZWR1bGVzLFxyXG4gIH07XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFNJTkdMRSBTQ0hFRFVMRSBIT09LXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXNlRGVidFNjaGVkdWxlKHNjaGVkdWxlSWQ6IHN0cmluZyB8IG51bGwpIHtcclxuICBjb25zdCBbc2NoZWR1bGUsIHNldFNjaGVkdWxlXSA9IHVzZVN0YXRlPERlYnRTY2hlZHVsZVdpdGhSZWxhdGlvbnMgfCBudWxsPihudWxsKTtcclxuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XHJcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcclxuXHJcbiAgY29uc3QgZmV0Y2hTY2hlZHVsZSA9IGFzeW5jICgpID0+IHtcclxuICAgIGlmICghc2NoZWR1bGVJZCkge1xyXG4gICAgICBzZXRTY2hlZHVsZShudWxsKTtcclxuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIHNldElzTG9hZGluZyh0cnVlKTtcclxuICAgICAgc2V0RXJyb3IobnVsbCk7XHJcblxyXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yOiBmZXRjaEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdkZWJ0X3NjaGVkdWxlcycpXHJcbiAgICAgICAgLnNlbGVjdChgXHJcbiAgICAgICAgICAqLFxyXG4gICAgICAgICAgZGVhbDpkZWFscyFkZWJ0X3NjaGVkdWxlc19kZWFsX2lkX2ZrZXkoaWQsIGxlZ2FsX2J1c2luZXNzX25hbWUsIGRiYV9uYW1lKSxcclxuICAgICAgICAgIGxlbmRlcjpsZW5kZXJzIWRlYnRfc2NoZWR1bGVzX2xlbmRlcl9pZF9ma2V5KGlkLCBjb21wYW55X25hbWUpXHJcbiAgICAgICAgYClcclxuICAgICAgICAuZXEoJ2lkJywgc2NoZWR1bGVJZClcclxuICAgICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgICBpZiAoZmV0Y2hFcnJvcikgdGhyb3cgZmV0Y2hFcnJvcjtcclxuICAgICAgc2V0U2NoZWR1bGUoZGF0YSk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc3QgbWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGZldGNoIGRlYnQgc2NoZWR1bGUnO1xyXG4gICAgICBzZXRFcnJvcihtZXNzYWdlKTtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgZGVidCBzY2hlZHVsZTonLCBlcnIpO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgZmV0Y2hTY2hlZHVsZSgpO1xyXG4gIH0sIFtzY2hlZHVsZUlkXSk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBzY2hlZHVsZSxcclxuICAgIGlzTG9hZGluZyxcclxuICAgIGVycm9yLFxyXG4gICAgcmVmZXRjaDogZmV0Y2hTY2hlZHVsZSxcclxuICB9O1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBNVVRBVElPTiBGVU5DVElPTlNcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVEZWJ0U2NoZWR1bGUoZGF0YTogQ3JlYXRlRGVidFNjaGVkdWxlSW5wdXQpOiBQcm9taXNlPERlYnRTY2hlZHVsZT4ge1xyXG4gIGNvbnN0IHsgZGF0YTogc2NoZWR1bGVEYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgIC5mcm9tKCdkZWJ0X3NjaGVkdWxlcycpXHJcbiAgICAuaW5zZXJ0KFtkYXRhXSlcclxuICAgIC5zZWxlY3QoKVxyXG4gICAgLnNpbmdsZSgpO1xyXG5cclxuICBpZiAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGRlYnQgc2NoZWR1bGU6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKGVycm9yLm1lc3NhZ2UpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHNjaGVkdWxlRGF0YTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZURlYnRTY2hlZHVsZShcclxuICBpZDogc3RyaW5nLFxyXG4gIGRhdGE6IFVwZGF0ZURlYnRTY2hlZHVsZUlucHV0XHJcbik6IFByb21pc2U8RGVidFNjaGVkdWxlPiB7XHJcbiAgY29uc3QgeyBkYXRhOiBzY2hlZHVsZURhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ2RlYnRfc2NoZWR1bGVzJylcclxuICAgIC51cGRhdGUoZGF0YSlcclxuICAgIC5lcSgnaWQnLCBpZClcclxuICAgIC5zZWxlY3QoKVxyXG4gICAgLnNpbmdsZSgpO1xyXG5cclxuICBpZiAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGRlYnQgc2NoZWR1bGU6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKGVycm9yLm1lc3NhZ2UpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHNjaGVkdWxlRGF0YTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZURlYnRTY2hlZHVsZShpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgIC5mcm9tKCdkZWJ0X3NjaGVkdWxlcycpXHJcbiAgICAuZGVsZXRlKClcclxuICAgIC5lcSgnaWQnLCBpZCk7XHJcblxyXG4gIGlmIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgZGVidCBzY2hlZHVsZTonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IubWVzc2FnZSk7XHJcbiAgfVxyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBDT01CSU5FRCBIT09LIFdJVEggTVVUQVRJT05TXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXNlRGVidFNjaGVkdWxlc011dGF0aW9ucygpIHtcclxuICBjb25zdCBbaXNDcmVhdGluZywgc2V0SXNDcmVhdGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW2lzVXBkYXRpbmcsIHNldElzVXBkYXRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IFtpc0RlbGV0aW5nLCBzZXRJc0RlbGV0aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuXHJcbiAgY29uc3QgY3JlYXRlID0gYXN5bmMgKGRhdGE6IENyZWF0ZURlYnRTY2hlZHVsZUlucHV0KTogUHJvbWlzZTxEZWJ0U2NoZWR1bGU+ID0+IHtcclxuICAgIHNldElzQ3JlYXRpbmcodHJ1ZSk7XHJcbiAgICB0cnkge1xyXG4gICAgICByZXR1cm4gYXdhaXQgY3JlYXRlRGVidFNjaGVkdWxlKGRhdGEpO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgc2V0SXNDcmVhdGluZyhmYWxzZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgdXBkYXRlID0gYXN5bmMgKGlkOiBzdHJpbmcsIGRhdGE6IFVwZGF0ZURlYnRTY2hlZHVsZUlucHV0KTogUHJvbWlzZTxEZWJ0U2NoZWR1bGU+ID0+IHtcclxuICAgIHNldElzVXBkYXRpbmcodHJ1ZSk7XHJcbiAgICB0cnkge1xyXG4gICAgICByZXR1cm4gYXdhaXQgdXBkYXRlRGVidFNjaGVkdWxlKGlkLCBkYXRhKTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIHNldElzVXBkYXRpbmcoZmFsc2UpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHJlbW92ZSA9IGFzeW5jIChpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgICBzZXRJc0RlbGV0aW5nKHRydWUpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgZGVsZXRlRGVidFNjaGVkdWxlKGlkKTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIHNldElzRGVsZXRpbmcoZmFsc2UpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBjcmVhdGUsXHJcbiAgICB1cGRhdGUsXHJcbiAgICByZW1vdmUsXHJcbiAgICBpc0NyZWF0aW5nLFxyXG4gICAgaXNVcGRhdGluZyxcclxuICAgIGlzRGVsZXRpbmcsXHJcbiAgICBpc011dGF0aW5nOiBpc0NyZWF0aW5nIHx8IGlzVXBkYXRpbmcgfHwgaXNEZWxldGluZyxcclxuICB9O1xyXG59XHJcbiJdLCJtYXBwaW5ncyI6IkFBR0EsU0FBUyxVQUFVLGlCQUFpQjtBQUNwQyxTQUFTLGdCQUFnQjtBQThEbEIsZ0JBQVMsaUJBQWlCLFFBQWlCO0FBQ2hELFFBQU0sQ0FBQyxXQUFXLFlBQVksSUFBSSxTQUFzQyxDQUFDLENBQUM7QUFDMUUsUUFBTSxDQUFDLFdBQVcsWUFBWSxJQUFJLFNBQVMsSUFBSTtBQUMvQyxRQUFNLENBQUMsT0FBTyxRQUFRLElBQUksU0FBd0IsSUFBSTtBQUV0RCxRQUFNLGlCQUFpQixZQUFZO0FBQ2pDLFFBQUk7QUFDRixtQkFBYSxJQUFJO0FBQ2pCLGVBQVMsSUFBSTtBQUViLFVBQUksUUFBUSxTQUNULEtBQUssZ0JBQWdCLEVBQ3JCLE9BQU87QUFBQTtBQUFBO0FBQUE7QUFB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