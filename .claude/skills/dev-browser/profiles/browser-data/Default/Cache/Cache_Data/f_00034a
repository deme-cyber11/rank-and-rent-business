import __vite__cjsImport0_react from "/node_modules/.vite/deps/react.js?v=aadb9797"; const useState = __vite__cjsImport0_react["useState"]; const useEffect = __vite__cjsImport0_react["useEffect"];
import { supabase } from "/src/lib/supabase.ts";
export function useDebtSchedules(dealId) {
  const [schedules, setSchedules] = useState([]);
  const [isLoading, setIsLoading] = useState(true);
  const [error, setError] = useState(null);
  const fetchSchedules = async () => {
    try {
      setIsLoading(true);
      setError(null);
      let query = supabase.from("debt_schedules").select(`
          *,
          deal:deals!debt_schedules_deal_id_fkey(id, business_name),
          lender:lenders!debt_schedules_lender_id_fkey(id, company_name)
        `).order("created_at", { ascending: false });
      if (dealId) {
        query = query.eq("deal_id", dealId);
      }
      const { data, error: fetchError } = await query;
      if (fetchError) throw fetchError;
      setSchedules(data || []);
    } catch (err) {
      const message = err instanceof Error ? err.message : "Failed to fetch debt schedules";
      setError(message);
      console.error("Error fetching debt schedules:", err);
    } finally {
      setIsLoading(false);
    }
  };
  useEffect(() => {
    fetchSchedules();
  }, [dealId]);
  return {
    schedules,
    isLoading,
    error,
    refetch: fetchSchedules
  };
}
export function useDebtSchedule(scheduleId) {
  const [schedule, setSchedule] = useState(null);
  const [isLoading, setIsLoading] = useState(true);
  const [error, setError] = useState(null);
  const fetchSchedule = async () => {
    if (!scheduleId) {
      setSchedule(null);
      setIsLoading(false);
      return;
    }
    try {
      setIsLoading(true);
      setError(null);
      const { data, error: fetchError } = await supabase.from("debt_schedules").select(`
          *,
          deal:deals!debt_schedules_deal_id_fkey(id, business_name),
          lender:lenders!debt_schedules_lender_id_fkey(id, company_name)
        `).eq("id", scheduleId).single();
      if (fetchError) throw fetchError;
      setSchedule(data);
    } catch (err) {
      const message = err instanceof Error ? err.message : "Failed to fetch debt schedule";
      setError(message);
      console.error("Error fetching debt schedule:", err);
    } finally {
      setIsLoading(false);
    }
  };
  useEffect(() => {
    fetchSchedule();
  }, [scheduleId]);
  return {
    schedule,
    isLoading,
    error,
    refetch: fetchSchedule
  };
}
export async function createDebtSchedule(data) {
  const { data: scheduleData, error } = await supabase.from("debt_schedules").insert([data]).select().single();
  if (error) {
    console.error("Error creating debt schedule:", error);
    throw new Error(error.message);
  }
  return scheduleData;
}
export async function updateDebtSchedule(id, data) {
  const { data: scheduleData, error } = await supabase.from("debt_schedules").update(data).eq("id", id).select().single();
  if (error) {
    console.error("Error updating debt schedule:", error);
    throw new Error(error.message);
  }
  return scheduleData;
}
export async function deleteDebtSchedule(id) {
  const { error } = await supabase.from("debt_schedules").delete().eq("id", id);
  if (error) {
    console.error("Error deleting debt schedule:", error);
    throw new Error(error.message);
  }
}
export function useDebtSchedulesMutations() {
  const [isCreating, setIsCreating] = useState(false);
  const [isUpdating, setIsUpdating] = useState(false);
  const [isDeleting, setIsDeleting] = useState(false);
  const create = async (data) => {
    setIsCreating(true);
    try {
      return await createDebtSchedule(data);
    } finally {
      setIsCreating(false);
    }
  };
  const update = async (id, data) => {
    setIsUpdating(true);
    try {
      return await updateDebtSchedule(id, data);
    } finally {
      setIsUpdating(false);
    }
  };
  const remove = async (id) => {
    setIsDeleting(true);
    try {
      await deleteDebtSchedule(id);
    } finally {
      setIsDeleting(false);
    }
  };
  return {
    create,
    update,
    remove,
    isCreating,
    isUpdating,
    isDeleting,
    isMutating: isCreating || isUpdating || isDeleting
  };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZURlYnRTY2hlZHVsZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gdXNlRGVidFNjaGVkdWxlcyBIb29rXHJcbi8vIEN1c3RvbSBob29rIGZvciBtYW5hZ2luZyBkZWJ0IHNjaGVkdWxlcyB3aXRoIFN1cGFiYXNlXHJcblxyXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gJy4uL2xpYi9zdXBhYmFzZSc7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBUWVBFU1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZXhwb3J0IHR5cGUgUGF5bWVudEZyZXF1ZW5jeSA9ICdkYWlseScgfCAnd2Vla2x5JyB8ICdtb250aGx5JztcclxuZXhwb3J0IHR5cGUgRWFybHlQYXlvZmZUeXBlID0gJ3Byb3JhdGVkJyB8ICdyZW1haW5pbmdfYmFsYW5jZScgfCAnZGlzY291bnQnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBEZWJ0U2NoZWR1bGUge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgZGVhbF9pZDogc3RyaW5nIHwgbnVsbDtcclxuICBsZW5kZXJfaWQ6IHN0cmluZyB8IG51bGw7XHJcbiAgZnVuZGVkX2Ftb3VudDogbnVtYmVyO1xyXG4gIGZhY3Rvcl9yYXRlOiBudW1iZXIgfCBudWxsO1xyXG4gIGludGVyZXN0X3JhdGU6IG51bWJlciB8IG51bGw7XHJcbiAgcGF5bWVudF9hbW91bnQ6IG51bWJlcjtcclxuICBwYXltZW50X2ZyZXF1ZW5jeTogUGF5bWVudEZyZXF1ZW5jeTtcclxuICB0ZXJtX2xlbmd0aDogbnVtYmVyIHwgbnVsbDtcclxuICBmaXJzdF9wYXltZW50X2RhdGU6IHN0cmluZyB8IG51bGw7XHJcbiAgcGF5b2ZmX2RhdGU6IHN0cmluZyB8IG51bGw7XHJcbiAgdG90YWxfcGF5YmFjazogbnVtYmVyIHwgbnVsbDtcclxuICBlYXJseV9wYXlvZmZfdHlwZTogRWFybHlQYXlvZmZUeXBlIHwgbnVsbDtcclxuICBub3Rlczogc3RyaW5nIHwgbnVsbDtcclxuICBjcmVhdGVkX2F0OiBzdHJpbmc7XHJcbiAgdXBkYXRlZF9hdDogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIERlYnRTY2hlZHVsZVdpdGhSZWxhdGlvbnMgZXh0ZW5kcyBEZWJ0U2NoZWR1bGUge1xyXG4gIGRlYWw/OiB7XHJcbiAgICBpZDogc3RyaW5nO1xyXG4gICAgbGVnYWxfYnVzaW5lc3NfbmFtZTogc3RyaW5nO1xyXG4gICAgZGJhX25hbWU6IHN0cmluZyB8IG51bGw7XHJcbiAgfSB8IG51bGw7XHJcbiAgbGVuZGVyPzoge1xyXG4gICAgaWQ6IHN0cmluZztcclxuICAgIGNvbXBhbnlfbmFtZTogc3RyaW5nO1xyXG4gIH0gfCBudWxsO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZURlYnRTY2hlZHVsZUlucHV0IHtcclxuICBkZWFsX2lkPzogc3RyaW5nIHwgbnVsbDtcclxuICBsZW5kZXJfaWQ/OiBzdHJpbmcgfCBudWxsO1xyXG4gIGZ1bmRlZF9hbW91bnQ6IG51bWJlcjtcclxuICBmYWN0b3JfcmF0ZT86IG51bWJlciB8IG51bGw7XHJcbiAgaW50ZXJlc3RfcmF0ZT86IG51bWJlciB8IG51bGw7XHJcbiAgcGF5bWVudF9hbW91bnQ6IG51bWJlcjtcclxuICBwYXltZW50X2ZyZXF1ZW5jeTogUGF5bWVudEZyZXF1ZW5jeTtcclxuICB0ZXJtX2xlbmd0aD86IG51bWJlciB8IG51bGw7XHJcbiAgZmlyc3RfcGF5bWVudF9kYXRlPzogc3RyaW5nIHwgbnVsbDtcclxuICBwYXlvZmZfZGF0ZT86IHN0cmluZyB8IG51bGw7XHJcbiAgdG90YWxfcGF5YmFjaz86IG51bWJlciB8IG51bGw7XHJcbiAgZWFybHlfcGF5b2ZmX3R5cGU/OiBFYXJseVBheW9mZlR5cGUgfCBudWxsO1xyXG4gIG5vdGVzPzogc3RyaW5nIHwgbnVsbDtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgVXBkYXRlRGVidFNjaGVkdWxlSW5wdXQgPSBQYXJ0aWFsPE9taXQ8RGVidFNjaGVkdWxlLCAnaWQnIHwgJ2NyZWF0ZWRfYXQnIHwgJ3VwZGF0ZWRfYXQnPj47XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBNQUlOIEhPT0sgLSBGZXRjaCBhbGwgc2NoZWR1bGVzIChvcHRpb25hbGx5IGJ5IGRlYWwpXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXNlRGVidFNjaGVkdWxlcyhkZWFsSWQ/OiBzdHJpbmcpIHtcclxuICBjb25zdCBbc2NoZWR1bGVzLCBzZXRTY2hlZHVsZXNdID0gdXNlU3RhdGU8RGVidFNjaGVkdWxlV2l0aFJlbGF0aW9uc1tdPihbXSk7XHJcbiAgY29uc3QgW2lzTG9hZGluZywgc2V0SXNMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xyXG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XHJcblxyXG4gIGNvbnN0IGZldGNoU2NoZWR1bGVzID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgc2V0SXNMb2FkaW5nKHRydWUpO1xyXG4gICAgICBzZXRFcnJvcihudWxsKTtcclxuXHJcbiAgICAgIGxldCBxdWVyeSA9IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ2RlYnRfc2NoZWR1bGVzJylcclxuICAgICAgICAuc2VsZWN0KGBcclxuICAgICAgICAgICosXHJcbiAgICAgICAgICBkZWFsOmRlYWxzIWRlYnRfc2NoZWR1bGVzX2RlYWxfaWRfZmtleShpZCwgYnVzaW5lc3NfbmFtZSksXHJcbiAgICAgICAgICBsZW5kZXI6bGVuZGVycyFkZWJ0X3NjaGVkdWxlc19sZW5kZXJfaWRfZmtleShpZCwgY29tcGFueV9uYW1lKVxyXG4gICAgICAgIGApXHJcbiAgICAgICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xyXG5cclxuICAgICAgaWYgKGRlYWxJZCkge1xyXG4gICAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoJ2RlYWxfaWQnLCBkZWFsSWQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yOiBmZXRjaEVycm9yIH0gPSBhd2FpdCBxdWVyeTtcclxuXHJcbiAgICAgIGlmIChmZXRjaEVycm9yKSB0aHJvdyBmZXRjaEVycm9yO1xyXG4gICAgICBzZXRTY2hlZHVsZXMoZGF0YSB8fCBbXSk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc3QgbWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGZldGNoIGRlYnQgc2NoZWR1bGVzJztcclxuICAgICAgc2V0RXJyb3IobWVzc2FnZSk7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGRlYnQgc2NoZWR1bGVzOicsIGVycik7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBmZXRjaFNjaGVkdWxlcygpO1xyXG4gIH0sIFtkZWFsSWRdKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHNjaGVkdWxlcyxcclxuICAgIGlzTG9hZGluZyxcclxuICAgIGVycm9yLFxyXG4gICAgcmVmZXRjaDogZmV0Y2hTY2hlZHVsZXMsXHJcbiAgfTtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gU0lOR0xFIFNDSEVEVUxFIEhPT0tcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VEZWJ0U2NoZWR1bGUoc2NoZWR1bGVJZDogc3RyaW5nIHwgbnVsbCkge1xyXG4gIGNvbnN0IFtzY2hlZHVsZSwgc2V0U2NoZWR1bGVdID0gdXNlU3RhdGU8RGVidFNjaGVkdWxlV2l0aFJlbGF0aW9ucyB8IG51bGw+KG51bGwpO1xyXG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcclxuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xyXG5cclxuICBjb25zdCBmZXRjaFNjaGVkdWxlID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKCFzY2hlZHVsZUlkKSB7XHJcbiAgICAgIHNldFNjaGVkdWxlKG51bGwpO1xyXG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgc2V0SXNMb2FkaW5nKHRydWUpO1xyXG4gICAgICBzZXRFcnJvcihudWxsKTtcclxuXHJcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3I6IGZldGNoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ2RlYnRfc2NoZWR1bGVzJylcclxuICAgICAgICAuc2VsZWN0KGBcclxuICAgICAgICAgICosXHJcbiAgICAgICAgICBkZWFsOmRlYWxzIWRlYnRfc2NoZWR1bGVzX2RlYWxfaWRfZmtleShpZCwgYnVzaW5lc3NfbmFtZSksXHJcbiAgICAgICAgICBsZW5kZXI6bGVuZGVycyFkZWJ0X3NjaGVkdWxlc19sZW5kZXJfaWRfZmtleShpZCwgY29tcGFueV9uYW1lKVxyXG4gICAgICAgIGApXHJcbiAgICAgICAgLmVxKCdpZCcsIHNjaGVkdWxlSWQpXHJcbiAgICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgICAgaWYgKGZldGNoRXJyb3IpIHRocm93IGZldGNoRXJyb3I7XHJcbiAgICAgIHNldFNjaGVkdWxlKGRhdGEpO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBmZXRjaCBkZWJ0IHNjaGVkdWxlJztcclxuICAgICAgc2V0RXJyb3IobWVzc2FnZSk7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGRlYnQgc2NoZWR1bGU6JywgZXJyKTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGZldGNoU2NoZWR1bGUoKTtcclxuICB9LCBbc2NoZWR1bGVJZF0pO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgc2NoZWR1bGUsXHJcbiAgICBpc0xvYWRpbmcsXHJcbiAgICBlcnJvcixcclxuICAgIHJlZmV0Y2g6IGZldGNoU2NoZWR1bGUsXHJcbiAgfTtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gTVVUQVRJT04gRlVOQ1RJT05TXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRGVidFNjaGVkdWxlKGRhdGE6IENyZWF0ZURlYnRTY2hlZHVsZUlucHV0KTogUHJvbWlzZTxEZWJ0U2NoZWR1bGU+IHtcclxuICBjb25zdCB7IGRhdGE6IHNjaGVkdWxlRGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAuZnJvbSgnZGVidF9zY2hlZHVsZXMnKVxyXG4gICAgLmluc2VydChbZGF0YV0pXHJcbiAgICAuc2VsZWN0KClcclxuICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgaWYgKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBkZWJ0IHNjaGVkdWxlOicsIGVycm9yKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihlcnJvci5tZXNzYWdlKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBzY2hlZHVsZURhdGE7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVEZWJ0U2NoZWR1bGUoXHJcbiAgaWQ6IHN0cmluZyxcclxuICBkYXRhOiBVcGRhdGVEZWJ0U2NoZWR1bGVJbnB1dFxyXG4pOiBQcm9taXNlPERlYnRTY2hlZHVsZT4ge1xyXG4gIGNvbnN0IHsgZGF0YTogc2NoZWR1bGVEYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgIC5mcm9tKCdkZWJ0X3NjaGVkdWxlcycpXHJcbiAgICAudXBkYXRlKGRhdGEpXHJcbiAgICAuZXEoJ2lkJywgaWQpXHJcbiAgICAuc2VsZWN0KClcclxuICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgaWYgKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBkZWJ0IHNjaGVkdWxlOicsIGVycm9yKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihlcnJvci5tZXNzYWdlKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBzY2hlZHVsZURhdGE7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVEZWJ0U2NoZWR1bGUoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAuZnJvbSgnZGVidF9zY2hlZHVsZXMnKVxyXG4gICAgLmRlbGV0ZSgpXHJcbiAgICAuZXEoJ2lkJywgaWQpO1xyXG5cclxuICBpZiAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGRlYnQgc2NoZWR1bGU6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKGVycm9yLm1lc3NhZ2UpO1xyXG4gIH1cclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gQ09NQklORUQgSE9PSyBXSVRIIE1VVEFUSU9OU1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVzZURlYnRTY2hlZHVsZXNNdXRhdGlvbnMoKSB7XHJcbiAgY29uc3QgW2lzQ3JlYXRpbmcsIHNldElzQ3JlYXRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IFtpc1VwZGF0aW5nLCBzZXRJc1VwZGF0aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBbaXNEZWxldGluZywgc2V0SXNEZWxldGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XHJcblxyXG4gIGNvbnN0IGNyZWF0ZSA9IGFzeW5jIChkYXRhOiBDcmVhdGVEZWJ0U2NoZWR1bGVJbnB1dCk6IFByb21pc2U8RGVidFNjaGVkdWxlPiA9PiB7XHJcbiAgICBzZXRJc0NyZWF0aW5nKHRydWUpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgcmV0dXJuIGF3YWl0IGNyZWF0ZURlYnRTY2hlZHVsZShkYXRhKTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIHNldElzQ3JlYXRpbmcoZmFsc2UpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHVwZGF0ZSA9IGFzeW5jIChpZDogc3RyaW5nLCBkYXRhOiBVcGRhdGVEZWJ0U2NoZWR1bGVJbnB1dCk6IFByb21pc2U8RGVidFNjaGVkdWxlPiA9PiB7XHJcbiAgICBzZXRJc1VwZGF0aW5nKHRydWUpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgcmV0dXJuIGF3YWl0IHVwZGF0ZURlYnRTY2hlZHVsZShpZCwgZGF0YSk7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBzZXRJc1VwZGF0aW5nKGZhbHNlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCByZW1vdmUgPSBhc3luYyAoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4gPT4ge1xyXG4gICAgc2V0SXNEZWxldGluZyh0cnVlKTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IGRlbGV0ZURlYnRTY2hlZHVsZShpZCk7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBzZXRJc0RlbGV0aW5nKGZhbHNlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgY3JlYXRlLFxyXG4gICAgdXBkYXRlLFxyXG4gICAgcmVtb3ZlLFxyXG4gICAgaXNDcmVhdGluZyxcclxuICAgIGlzVXBkYXRpbmcsXHJcbiAgICBpc0RlbGV0aW5nLFxyXG4gICAgaXNNdXRhdGluZzogaXNDcmVhdGluZyB8fCBpc1VwZGF0aW5nIHx8IGlzRGVsZXRpbmcsXHJcbiAgfTtcclxufVxyXG4iXSwibWFwcGluZ3MiOiJBQUdBLFNBQVMsVUFBVSxpQkFBaUI7QUFDcEMsU0FBUyxnQkFBZ0I7QUE4RGxCLGdCQUFTLGlCQUFpQixRQUFpQjtBQUNoRCxRQUFNLENBQUMsV0FBVyxZQUFZLElBQUksU0FBc0MsQ0FBQyxDQUFDO0FBQzFFLFFBQU0sQ0FBQyxXQUFXLFlBQVksSUFBSSxTQUFTLElBQUk7QUFDL0MsUUFBTSxDQUFDLE9BQU8sUUFBUSxJQUFJLFNBQXdCLElBQUk7QUFFdEQsUUFBTSxpQkFBaUIsWUFBWTtBQUNqQyxRQUFJO0FBQ0YsbUJBQWEsSUFBSTtBQUNqQixlQUFTLElBQUk7QUFFYixVQUFJLFFBQVEsU0FDVCxLQUFLLGdCQUFnQixFQUNyQixPQUFPO0FBQUE7QUFBQTtBQUFBO0FBQUEsU0FJUCxFQUNBLE1BQU0sY0FBYyxFQUFFLFdBQVcs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