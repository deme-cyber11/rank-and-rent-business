import __vite__cjsImport0_react from "/node_modules/.vite/deps/react.js?v=aadb9797"; const useState = __vite__cjsImport0_react["useState"]; const useEffect = __vite__cjsImport0_react["useEffect"];
import { supabase } from "/src/lib/supabase.ts";
export function useDebtSchedules(dealId) {
  const [schedules, setSchedules] = useState([]);
  const [isLoading, setIsLoading] = useState(true);
  const [error, setError] = useState(null);
  const fetchSchedules = async () => {
    try {
      setIsLoading(true);
      setError(null);
      let query = supabase.from("debt_schedules").select(`
          *,
          deal:deals!debt_schedules_deal_id_fkey(id, business_name),
          lender:lenders!debt_schedules_lender_id_fkey(id, company_name)
        `).order("created_at", { ascending: false });
      if (dealId) {
        query = query.eq("deal_id", dealId);
      }
      const { data, error: fetchError } = await query;
      if (fetchError) throw fetchError;
      setSchedules(data || []);
    } catch (err) {
      const message = err instanceof Error ? err.message : "Failed to fetch debt schedules";
      setError(message);
      console.error("Error fetching debt schedules:", err);
    } finally {
      setIsLoading(false);
    }
  };
  useEffect(() => {
    fetchSchedules();
  }, [dealId]);
  return {
    schedules,
    isLoading,
    error,
    refetch: fetchSchedules
  };
}
export function useDebtSchedule(scheduleId) {
  const [schedule, setSchedule] = useState(null);
  const [isLoading, setIsLoading] = useState(true);
  const [error, setError] = useState(null);
  const fetchSchedule = async () => {
    if (!scheduleId) {
      setSchedule(null);
      setIsLoading(false);
      return;
    }
    try {
      setIsLoading(true);
      setError(null);
      const { data, error: fetchError } = await supabase.from("debt_schedules").select(`
          *,
          deal:deals!debt_schedules_deal_id_fkey(id, business_name),
          lender:lenders!debt_schedules_lender_id_fkey(id, company_name)
        `).eq("id", scheduleId).single();
      if (fetchError) throw fetchError;
      setSchedule(data);
    } catch (err) {
      const message = err instanceof Error ? err.message : "Failed to fetch debt schedule";
      setError(message);
      console.error("Error fetching debt schedule:", err);
    } finally {
      setIsLoading(false);
    }
  };
  useEffect(() => {
    fetchSchedule();
  }, [scheduleId]);
  return {
    schedule,
    isLoading,
    error,
    refetch: fetchSchedule
  };
}
export async function createDebtSchedule(data) {
  const { data: scheduleData, error } = await supabase.from("debt_schedules").insert([data]).select().single();
  if (error) {
    console.error("Error creating debt schedule:", error);
    throw new Error(error.message);
  }
  return scheduleData;
}
export async function updateDebtSchedule(id, data) {
  const { data: scheduleData, error } = await supabase.from("debt_schedules").update(data).eq("id", id).select().single();
  if (error) {
    console.error("Error updating debt schedule:", error);
    throw new Error(error.message);
  }
  return scheduleData;
}
export async function deleteDebtSchedule(id) {
  const { error } = await supabase.from("debt_schedules").delete().eq("id", id);
  if (error) {
    console.error("Error deleting debt schedule:", error);
    throw new Error(error.message);
  }
}
export function useDebtSchedulesMutations() {
  const [isCreating, setIsCreating] = useState(false);
  const [isUpdating, setIsUpdating] = useState(false);
  const [isDeleting, setIsDeleting] = useState(false);
  const create = async (data) => {
    setIsCreating(true);
    try {
      return await createDebtSchedule(data);
    } finally {
      setIsCreating(false);
    }
  };
  const update = async (id, data) => {
    setIsUpdating(true);
    try {
      return await updateDebtSchedule(id, data);
    } finally {
      setIsUpdating(false);
    }
  };
  const remove = async (id) => {
    setIsDeleting(true);
    try {
      await deleteDebtSchedule(id);
    } finally {
      setIsDeleting(false);
    }
  };
  return {
    create,
    update,
    remove,
    isCreating,
    isUpdating,
    isDeleting,
    isMutating: isCreating || isUpdating || isDeleting
  };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZURlYnRTY2hlZHVsZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gdXNlRGVidFNjaGVkdWxlcyBIb29rXHJcbi8vIEN1c3RvbSBob29rIGZvciBtYW5hZ2luZyBkZWJ0IHNjaGVkdWxlcyB3aXRoIFN1cGFiYXNlXHJcblxyXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gJy4uL2xpYi9zdXBhYmFzZSc7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBUWVBFU1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZXhwb3J0IHR5cGUgUGF5bWVudEZyZXF1ZW5jeSA9ICdkYWlseScgfCAnd2Vla2x5JyB8ICdtb250aGx5JztcclxuZXhwb3J0IHR5cGUgRWFybHlQYXlvZmZUeXBlID0gJ3Byb3JhdGVkJyB8ICdyZW1haW5pbmdfYmFsYW5jZScgfCAnZGlzY291bnQnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBEZWJ0U2NoZWR1bGUge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgZGVhbF9pZDogc3RyaW5nIHwgbnVsbDtcclxuICBsZW5kZXJfaWQ6IHN0cmluZyB8IG51bGw7XHJcbiAgZnVuZGVkX2Ftb3VudDogbnVtYmVyO1xyXG4gIGZhY3Rvcl9yYXRlOiBudW1iZXIgfCBudWxsO1xyXG4gIGludGVyZXN0X3JhdGU6IG51bWJlciB8IG51bGw7XHJcbiAgcGF5bWVudF9hbW91bnQ6IG51bWJlcjtcclxuICBwYXltZW50X2ZyZXF1ZW5jeTogUGF5bWVudEZyZXF1ZW5jeTtcclxuICB0ZXJtX2xlbmd0aDogbnVtYmVyIHwgbnVsbDtcclxuICBmaXJzdF9wYXltZW50X2RhdGU6IHN0cmluZyB8IG51bGw7XHJcbiAgcGF5b2ZmX2RhdGU6IHN0cmluZyB8IG51bGw7XHJcbiAgdG90YWxfcGF5YmFjazogbnVtYmVyIHwgbnVsbDtcclxuICBlYXJseV9wYXlvZmZfdHlwZTogRWFybHlQYXlvZmZUeXBlIHwgbnVsbDtcclxuICBub3Rlczogc3RyaW5nIHwgbnVsbDtcclxuICBjcmVhdGVkX2F0OiBzdHJpbmc7XHJcbiAgdXBkYXRlZF9hdDogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIERlYnRTY2hlZHVsZVdpdGhSZWxhdGlvbnMgZXh0ZW5kcyBEZWJ0U2NoZWR1bGUge1xyXG4gIGRlYWw/OiB7XHJcbiAgICBpZDogc3RyaW5nO1xyXG4gICAgYnVzaW5lc3NfbmFtZTogc3RyaW5nO1xyXG4gIH0gfCBudWxsO1xyXG4gIGxlbmRlcj86IHtcclxuICAgIGlkOiBzdHJpbmc7XHJcbiAgICBjb21wYW55X25hbWU6IHN0cmluZztcclxuICB9IHwgbnVsbDtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVEZWJ0U2NoZWR1bGVJbnB1dCB7XHJcbiAgZGVhbF9pZD86IHN0cmluZyB8IG51bGw7XHJcbiAgbGVuZGVyX2lkPzogc3RyaW5nIHwgbnVsbDtcclxuICBmdW5kZWRfYW1vdW50OiBudW1iZXI7XHJcbiAgZmFjdG9yX3JhdGU/OiBudW1iZXIgfCBudWxsO1xyXG4gIGludGVyZXN0X3JhdGU/OiBudW1iZXIgfCBudWxsO1xyXG4gIHBheW1lbnRfYW1vdW50OiBudW1iZXI7XHJcbiAgcGF5bWVudF9mcmVxdWVuY3k6IFBheW1lbnRGcmVxdWVuY3k7XHJcbiAgdGVybV9sZW5ndGg/OiBudW1iZXIgfCBudWxsO1xyXG4gIGZpcnN0X3BheW1lbnRfZGF0ZT86IHN0cmluZyB8IG51bGw7XHJcbiAgcGF5b2ZmX2RhdGU/OiBzdHJpbmcgfCBudWxsO1xyXG4gIHRvdGFsX3BheWJhY2s/OiBudW1iZXIgfCBudWxsO1xyXG4gIGVhcmx5X3BheW9mZl90eXBlPzogRWFybHlQYXlvZmZUeXBlIHwgbnVsbDtcclxuICBub3Rlcz86IHN0cmluZyB8IG51bGw7XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFVwZGF0ZURlYnRTY2hlZHVsZUlucHV0ID0gUGFydGlhbDxPbWl0PERlYnRTY2hlZHVsZSwgJ2lkJyB8ICdjcmVhdGVkX2F0JyB8ICd1cGRhdGVkX2F0Jz4+O1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gTUFJTiBIT09LIC0gRmV0Y2ggYWxsIHNjaGVkdWxlcyAob3B0aW9uYWxseSBieSBkZWFsKVxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVzZURlYnRTY2hlZHVsZXMoZGVhbElkPzogc3RyaW5nKSB7XHJcbiAgY29uc3QgW3NjaGVkdWxlcywgc2V0U2NoZWR1bGVzXSA9IHVzZVN0YXRlPERlYnRTY2hlZHVsZVdpdGhSZWxhdGlvbnNbXT4oW10pO1xyXG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcclxuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xyXG5cclxuICBjb25zdCBmZXRjaFNjaGVkdWxlcyA9IGFzeW5jICgpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHNldElzTG9hZGluZyh0cnVlKTtcclxuICAgICAgc2V0RXJyb3IobnVsbCk7XHJcblxyXG4gICAgICBsZXQgcXVlcnkgPSBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdkZWJ0X3NjaGVkdWxlcycpXHJcbiAgICAgICAgLnNlbGVjdChgXHJcbiAgICAgICAgICAqLFxyXG4gICAgICAgICAgZGVhbDpkZWFscyFkZWJ0X3NjaGVkdWxlc19kZWFsX2lkX2ZrZXkoaWQsIGJ1c2luZXNzX25hbWUpLFxyXG4gICAgICAgICAgbGVuZGVyOmxlbmRlcnMhZGVidF9zY2hlZHVsZXNfbGVuZGVyX2lkX2ZrZXkoaWQsIGNvbXBhbnlfbmFtZSlcclxuICAgICAgICBgKVxyXG4gICAgICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcclxuXHJcbiAgICAgIGlmIChkZWFsSWQpIHtcclxuICAgICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdkZWFsX2lkJywgZGVhbElkKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvcjogZmV0Y2hFcnJvciB9ID0gYXdhaXQgcXVlcnk7XHJcblxyXG4gICAgICBpZiAoZmV0Y2hFcnJvcikgdGhyb3cgZmV0Y2hFcnJvcjtcclxuICAgICAgc2V0U2NoZWR1bGVzKGRhdGEgfHwgW10pO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBmZXRjaCBkZWJ0IHNjaGVkdWxlcyc7XHJcbiAgICAgIHNldEVycm9yKG1lc3NhZ2UpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBkZWJ0IHNjaGVkdWxlczonLCBlcnIpO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgZmV0Y2hTY2hlZHVsZXMoKTtcclxuICB9LCBbZGVhbElkXSk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBzY2hlZHVsZXMsXHJcbiAgICBpc0xvYWRpbmcsXHJcbiAgICBlcnJvcixcclxuICAgIHJlZmV0Y2g6IGZldGNoU2NoZWR1bGVzLFxyXG4gIH07XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFNJTkdMRSBTQ0hFRFVMRSBIT09LXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXNlRGVidFNjaGVkdWxlKHNjaGVkdWxlSWQ6IHN0cmluZyB8IG51bGwpIHtcclxuICBjb25zdCBbc2NoZWR1bGUsIHNldFNjaGVkdWxlXSA9IHVzZVN0YXRlPERlYnRTY2hlZHVsZVdpdGhSZWxhdGlvbnMgfCBudWxsPihudWxsKTtcclxuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XHJcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcclxuXHJcbiAgY29uc3QgZmV0Y2hTY2hlZHVsZSA9IGFzeW5jICgpID0+IHtcclxuICAgIGlmICghc2NoZWR1bGVJZCkge1xyXG4gICAgICBzZXRTY2hlZHVsZShudWxsKTtcclxuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIHNldElzTG9hZGluZyh0cnVlKTtcclxuICAgICAgc2V0RXJyb3IobnVsbCk7XHJcblxyXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yOiBmZXRjaEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdkZWJ0X3NjaGVkdWxlcycpXHJcbiAgICAgICAgLnNlbGVjdChgXHJcbiAgICAgICAgICAqLFxyXG4gICAgICAgICAgZGVhbDpkZWFscyFkZWJ0X3NjaGVkdWxlc19kZWFsX2lkX2ZrZXkoaWQsIGJ1c2luZXNzX25hbWUpLFxyXG4gICAgICAgICAgbGVuZGVyOmxlbmRlcnMhZGVidF9zY2hlZHVsZXNfbGVuZGVyX2lkX2ZrZXkoaWQsIGNvbXBhbnlfbmFtZSlcclxuICAgICAgICBgKVxyXG4gICAgICAgIC5lcSgnaWQnLCBzY2hlZHVsZUlkKVxyXG4gICAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICAgIGlmIChmZXRjaEVycm9yKSB0aHJvdyBmZXRjaEVycm9yO1xyXG4gICAgICBzZXRTY2hlZHVsZShkYXRhKTtcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBjb25zdCBtZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdGYWlsZWQgdG8gZmV0Y2ggZGVidCBzY2hlZHVsZSc7XHJcbiAgICAgIHNldEVycm9yKG1lc3NhZ2UpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBkZWJ0IHNjaGVkdWxlOicsIGVycik7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBmZXRjaFNjaGVkdWxlKCk7XHJcbiAgfSwgW3NjaGVkdWxlSWRdKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHNjaGVkdWxlLFxyXG4gICAgaXNMb2FkaW5nLFxyXG4gICAgZXJyb3IsXHJcbiAgICByZWZldGNoOiBmZXRjaFNjaGVkdWxlLFxyXG4gIH07XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIE1VVEFUSU9OIEZVTkNUSU9OU1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZURlYnRTY2hlZHVsZShkYXRhOiBDcmVhdGVEZWJ0U2NoZWR1bGVJbnB1dCk6IFByb21pc2U8RGVidFNjaGVkdWxlPiB7XHJcbiAgY29uc3QgeyBkYXRhOiBzY2hlZHVsZURhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ2RlYnRfc2NoZWR1bGVzJylcclxuICAgIC5pbnNlcnQoW2RhdGFdKVxyXG4gICAgLnNlbGVjdCgpXHJcbiAgICAuc2luZ2xlKCk7XHJcblxyXG4gIGlmIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgZGVidCBzY2hlZHVsZTonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IubWVzc2FnZSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gc2NoZWR1bGVEYXRhO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlRGVidFNjaGVkdWxlKFxyXG4gIGlkOiBzdHJpbmcsXHJcbiAgZGF0YTogVXBkYXRlRGVidFNjaGVkdWxlSW5wdXRcclxuKTogUHJvbWlzZTxEZWJ0U2NoZWR1bGU+IHtcclxuICBjb25zdCB7IGRhdGE6IHNjaGVkdWxlRGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAuZnJvbSgnZGVidF9zY2hlZHVsZXMnKVxyXG4gICAgLnVwZGF0ZShkYXRhKVxyXG4gICAgLmVxKCdpZCcsIGlkKVxyXG4gICAgLnNlbGVjdCgpXHJcbiAgICAuc2luZ2xlKCk7XHJcblxyXG4gIGlmIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgZGVidCBzY2hlZHVsZTonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IubWVzc2FnZSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gc2NoZWR1bGVEYXRhO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlRGVidFNjaGVkdWxlKGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ2RlYnRfc2NoZWR1bGVzJylcclxuICAgIC5kZWxldGUoKVxyXG4gICAgLmVxKCdpZCcsIGlkKTtcclxuXHJcbiAgaWYgKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBkZWJ0IHNjaGVkdWxlOicsIGVycm9yKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihlcnJvci5tZXNzYWdlKTtcclxuICB9XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIENPTUJJTkVEIEhPT0sgV0lUSCBNVVRBVElPTlNcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VEZWJ0U2NoZWR1bGVzTXV0YXRpb25zKCkge1xyXG4gIGNvbnN0IFtpc0NyZWF0aW5nLCBzZXRJc0NyZWF0aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBbaXNVcGRhdGluZywgc2V0SXNVcGRhdGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW2lzRGVsZXRpbmcsIHNldElzRGVsZXRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xyXG5cclxuICBjb25zdCBjcmVhdGUgPSBhc3luYyAoZGF0YTogQ3JlYXRlRGVidFNjaGVkdWxlSW5wdXQpOiBQcm9taXNlPERlYnRTY2hlZHVsZT4gPT4ge1xyXG4gICAgc2V0SXNDcmVhdGluZyh0cnVlKTtcclxuICAgIHRyeSB7XHJcbiAgICAgIHJldHVybiBhd2FpdCBjcmVhdGVEZWJ0U2NoZWR1bGUoZGF0YSk7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBzZXRJc0NyZWF0aW5nKGZhbHNlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCB1cGRhdGUgPSBhc3luYyAoaWQ6IHN0cmluZywgZGF0YTogVXBkYXRlRGVidFNjaGVkdWxlSW5wdXQpOiBQcm9taXNlPERlYnRTY2hlZHVsZT4gPT4ge1xyXG4gICAgc2V0SXNVcGRhdGluZyh0cnVlKTtcclxuICAgIHRyeSB7XHJcbiAgICAgIHJldHVybiBhd2FpdCB1cGRhdGVEZWJ0U2NoZWR1bGUoaWQsIGRhdGEpO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgc2V0SXNVcGRhdGluZyhmYWxzZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgcmVtb3ZlID0gYXN5bmMgKGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+ID0+IHtcclxuICAgIHNldElzRGVsZXRpbmcodHJ1ZSk7XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBkZWxldGVEZWJ0U2NoZWR1bGUoaWQpO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgc2V0SXNEZWxldGluZyhmYWxzZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGNyZWF0ZSxcclxuICAgIHVwZGF0ZSxcclxuICAgIHJlbW92ZSxcclxuICAgIGlzQ3JlYXRpbmcsXHJcbiAgICBpc1VwZGF0aW5nLFxyXG4gICAgaXNEZWxldGluZyxcclxuICAgIGlzTXV0YXRpbmc6IGlzQ3JlYXRpbmcgfHwgaXNVcGRhdGluZyB8fCBpc0RlbGV0aW5nLFxyXG4gIH07XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiQUFHQSxTQUFTLFVBQVUsaUJBQWlCO0FBQ3BDLFNBQVMsZ0JBQWdCO0FBNkRsQixnQkFBUyxpQkFBaUIsUUFBaUI7QUFDaEQsUUFBTSxDQUFDLFdBQVcsWUFBWSxJQUFJLFNBQXNDLENBQUMsQ0FBQztBQUMxRSxRQUFNLENBQUMsV0FBVyxZQUFZLElBQUksU0FBUyxJQUFJO0FBQy9DLFFBQU0sQ0FBQyxPQUFPLFFBQVEsSUFBSSxTQUF3QixJQUFJO0FBRXRELFFBQU0saUJBQWlCLFlBQVk7QUFDakMsUUFBSTtBQUNGLG1CQUFhLElBQUk7QUFDakIsZUFBUyxJQUFJO0FBRWIsVUFBSSxRQUFRLFNBQ1QsS0FBSyxnQkFBZ0IsRUFDckIsT0FBTztBQUFBO0FBQUE7QUFBQTtBQUFBLFNBSVAsRUFDQSxNQUFNLGNBQWMsRUFBRSxXQUFXLE1BQU0sQ0FBQztBQUUzQyxVQUFJLFFBQVE7QUFDVixnQkFBUSxN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