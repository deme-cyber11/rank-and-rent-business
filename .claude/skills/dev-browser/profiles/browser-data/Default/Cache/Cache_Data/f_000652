import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/components/admin/vendor-pricing-files.tsx");import __vite__cjsImport0_react_jsxDevRuntime from "/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=9303f522"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
import * as RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
let prevRefreshReg;
let prevRefreshSig;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  prevRefreshReg = window.$RefreshReg$;
  prevRefreshSig = window.$RefreshSig$;
  window.$RefreshReg$ = RefreshRuntime.getRefreshReg("C:/Projects/Source 4 Industries/src/components/admin/vendor-pricing-files.tsx");
  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;
}
"use client";
var _s = $RefreshSig$();
import __vite__cjsImport3_react from "/node_modules/.vite/deps/react.js?v=9303f522"; const useState = __vite__cjsImport3_react["useState"]; const useEffect = __vite__cjsImport3_react["useEffect"]; const useCallback = __vite__cjsImport3_react["useCallback"];
import { Badge } from "/src/components/ui/badge.tsx";
import { FileSpreadsheet, Download, Star, Calendar, Loader2 } from "/node_modules/.vite/deps/lucide-react.js?v=9303f522";
function formatDate(isoString) {
  if (!isoString) return "-";
  const date = new Date(isoString);
  return date.toLocaleDateString("en-US", {
    month: "short",
    day: "numeric",
    year: "numeric"
  });
}
function formatFileSize(bytes) {
  if (bytes === null || bytes === void 0) return "-";
  if (bytes < 1024) return `${bytes} B`;
  if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;
  return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;
}
function FileEntry({ file }) {
  return /* @__PURE__ */ jsxDEV("div", { className: "flex items-center justify-between gap-2 py-2 border-b border-border/50 last:border-b-0", children: [
    /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-2 min-w-0 flex-1", children: [
      /* @__PURE__ */ jsxDEV(FileSpreadsheet, { className: "h-3.5 w-3.5 text-muted-foreground shrink-0" }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/admin/vendor-pricing-files.tsx",
        lineNumber: 66,
        columnNumber: 9
      }, this),
      file.file_url ? /* @__PURE__ */ jsxDEV(
        "a",
        {
          href: file.file_url,
          target: "_blank",
          rel: "noopener noreferrer",
          className: "text-xs text-primary hover:underline truncate flex items-center gap-1",
          title: file.file_name,
          children: [
            /* @__PURE__ */ jsxDEV("span", { className: "truncate", children: file.file_name }, void 0, false, {
              fileName: "C:/Projects/Source 4 Industries/src/components/admin/vendor-pricing-files.tsx",
              lineNumber: 75,
              columnNumber: 13
            }, this),
            /* @__PURE__ */ jsxDEV(Download, { className: "h-3 w-3 shrink-0" }, void 0, false, {
              fileName: "C:/Projects/Source 4 Industries/src/components/admin/vendor-pricing-files.tsx",
              lineNumber: 76,
              columnNumber: 13
            }, this)
          ]
        },
        void 0,
        true,
        {
          fileName: "C:/Projects/Source 4 Industries/src/components/admin/vendor-pricing-files.tsx",
          lineNumber: 68,
          columnNumber: 9
        },
        this
      ) : /* @__PURE__ */ jsxDEV("span", { className: "text-xs text-foreground truncate", title: file.file_name, children: file.file_name }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/admin/vendor-pricing-files.tsx",
        lineNumber: 79,
        columnNumber: 9
      }, this),
      file.is_current && /* @__PURE__ */ jsxDEV(Badge, { variant: "success", className: "shrink-0 px-1.5 py-0 text-[10px]", children: [
        /* @__PURE__ */ jsxDEV(Star, { className: "h-2.5 w-2.5 mr-0.5" }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/components/admin/vendor-pricing-files.tsx",
          lineNumber: 85,
          columnNumber: 13
        }, this),
        "Current"
      ] }, void 0, true, {
        fileName: "C:/Projects/Source 4 Industries/src/components/admin/vendor-pricing-files.tsx",
        lineNumber: 84,
        columnNumber: 9
      }, this)
    ] }, void 0, true, {
      fileName: "C:/Projects/Source 4 Industries/src/components/admin/vendor-pricing-files.tsx",
      lineNumber: 65,
      columnNumber: 7
    }, this),
    /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-3 shrink-0 text-[10px] text-muted-foreground", children: [
      /* @__PURE__ */ jsxDEV("span", { className: "flex items-center gap-1", children: [
        /* @__PURE__ */ jsxDEV(Calendar, { className: "h-3 w-3" }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/components/admin/vendor-pricing-files.tsx",
          lineNumber: 94,
          columnNumber: 11
        }, this),
        formatDate(file.original_upload_date)
      ] }, void 0, true, {
        fileName: "C:/Projects/Source 4 Industries/src/components/admin/vendor-pricing-files.tsx",
        lineNumber: 93,
        columnNumber: 9
      }, this),
      /* @__PURE__ */ jsxDEV("span", { className: "w-14 text-right", children: formatFileSize(file.file_size) }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/admin/vendor-pricing-files.tsx",
        lineNumber: 97,
        columnNumber: 9
      }, this)
    ] }, void 0, true, {
      fileName: "C:/Projects/Source 4 Industries/src/components/admin/vendor-pricing-files.tsx",
      lineNumber: 92,
      columnNumber: 7
    }, this)
  ] }, void 0, true, {
    fileName: "C:/Projects/Source 4 Industries/src/components/admin/vendor-pricing-files.tsx",
    lineNumber: 63,
    columnNumber: 5
  }, this);
}
_c = FileEntry;
export function VendorPricingFiles({ vendorId, vendorName }) {
  _s();
  const [files, setFiles] = useState([]);
  const [isLoading, setIsLoading] = useState(true);
  const [error, setError] = useState(null);
  const fetchFiles = useCallback(async () => {
    try {
      setError(null);
      const response = await fetch(`/api/vendors/${vendorId}/pricing-files`);
      if (!response.ok) {
        throw new Error(`Failed to fetch files: ${response.statusText}`);
      }
      const result = await response.json();
      if (result.error) {
        throw new Error(result.error);
      }
      setFiles(result.data || []);
    } catch (err) {
      console.error("Error fetching vendor pricing files:", err);
      setError(err instanceof Error ? err.message : "Failed to load files");
    } finally {
      setIsLoading(false);
    }
  }, [vendorId]);
  useEffect(() => {
    fetchFiles();
  }, [fetchFiles]);
  if (isLoading) {
    return /* @__PURE__ */ jsxDEV("div", { className: "flex items-center justify-center py-4", children: [
      /* @__PURE__ */ jsxDEV(Loader2, { className: "h-4 w-4 animate-spin text-muted-foreground" }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/admin/vendor-pricing-files.tsx",
        lineNumber: 146,
        columnNumber: 9
      }, this),
      /* @__PURE__ */ jsxDEV("span", { className: "ml-2 text-xs text-muted-foreground", children: "Loading files..." }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/admin/vendor-pricing-files.tsx",
        lineNumber: 147,
        columnNumber: 9
      }, this)
    ] }, void 0, true, {
      fileName: "C:/Projects/Source 4 Industries/src/components/admin/vendor-pricing-files.tsx",
      lineNumber: 145,
      columnNumber: 7
    }, this);
  }
  if (error) {
    return /* @__PURE__ */ jsxDEV("div", { className: "py-3 px-2 text-xs text-danger bg-danger/10 rounded", children: error }, void 0, false, {
      fileName: "C:/Projects/Source 4 Industries/src/components/admin/vendor-pricing-files.tsx",
      lineNumber: 155,
      columnNumber: 7
    }, this);
  }
  if (files.length === 0) {
    return /* @__PURE__ */ jsxDEV("div", { className: "text-center py-4 text-muted-foreground", children: [
      /* @__PURE__ */ jsxDEV(FileSpreadsheet, { className: "h-6 w-6 mx-auto mb-1.5 opacity-50" }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/admin/vendor-pricing-files.tsx",
        lineNumber: 165,
        columnNumber: 9
      }, this),
      /* @__PURE__ */ jsxDEV("p", { className: "text-xs", children: "No pricing files" }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/admin/vendor-pricing-files.tsx",
        lineNumber: 166,
        columnNumber: 9
      }, this),
      vendorName && /* @__PURE__ */ jsxDEV("p", { className: "text-[10px] mt-0.5", children: [
        "No files found for ",
        vendorName
      ] }, void 0, true, {
        fileName: "C:/Projects/Source 4 Industries/src/components/admin/vendor-pricing-files.tsx",
        lineNumber: 168,
        columnNumber: 9
      }, this)
    ] }, void 0, true, {
      fileName: "C:/Projects/Source 4 Industries/src/components/admin/vendor-pricing-files.tsx",
      lineNumber: 164,
      columnNumber: 7
    }, this);
  }
  return /* @__PURE__ */ jsxDEV("div", { className: "space-y-0", children: files.map(
    (file) => /* @__PURE__ */ jsxDEV(FileEntry, { file }, file.id, false, {
      fileName: "C:/Projects/Source 4 Industries/src/components/admin/vendor-pricing-files.tsx",
      lineNumber: 178,
      columnNumber: 7
    }, this)
  ) }, void 0, false, {
    fileName: "C:/Projects/Source 4 Industries/src/components/admin/vendor-pricing-files.tsx",
    lineNumber: 176,
    columnNumber: 5
  }, this);
}
_s(VendorPricingFiles, "Ptau7lLjoedQWFe+AfQYNRc4AqM=");
_c2 = VendorPricingFiles;
var _c, _c2;
$RefreshReg$(_c, "FileEntry");
$RefreshReg$(_c2, "VendorPricingFiles");
if (import.meta.hot && !inWebWorker) {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}
if (import.meta.hot && !inWebWorker) {
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("C:/Projects/Source 4 Industries/src/components/admin/vendor-pricing-files.tsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("C:/Projects/Source 4 Industries/src/components/admin/vendor-pricing-files.tsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}

//# sourceMappingURL=data:application/json;base64,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O0FBQUE7QUFBQSxXQUVBO0FBQUEsRUFFSjtBQUdBLE1BQUlKLE1BQU1rQixXQUFXLEdBQUc7QUFDdEIsV0FDRSx1QkFBQyxTQUFJLFdBQVUsMENBQ2I7QUFBQSw2QkFBQyxtQkFBZ0IsV0FBVSx1Q0FBM0I7QUFBQTtBQUFBO0FBQUE7QUFBQSxhQUE4RDtBQUFBLE1BQzlELHVCQUFDLE9BQUUsV0FBVSxXQUFVLGdDQUF2QjtBQUFBO0FBQUE7QUFBQTtBQUFBLGFBQXVDO0FBQUEsTUFDdENuQixjQUNDLHVCQUFDLE9BQUUsV0FBVSxzQkFBcUI7QUFBQTtBQUFBLFFBQW9CQTtBQUFBQSxXQUF0RDtBQUFBO0FBQUE7QUFBQTtBQUFBLGFBQWlFO0FBQUEsU0FKckU7QUFBQTtBQUFBO0FBQUE7QUFBQSxXQU1BO0FBQUEsRUFFSjtBQUdBLFNBQ0UsdUJBQUMsU0FBSSxXQUFVLGFBQ1pDLGdCQUFNbUI7QUFBQUEsSUFBSSxDQUFDN0IsU0FDVix1QkFBQyxhQUF3QixRQUFUQSxLQUFLOEIsSUFBckI7QUFBQTtBQUFBO0FBQUE7QUFBQSxXQUFvQztBQUFBLEVBQ3JDLEtBSEg7QUFBQTtBQUFBO0FBQUE7QUFBQSxTQUlBO0FBRUo7QUFBQ3RELEdBM0VlK0Isb0JBQWtCO0FBQUF3QixNQUFsQnhCO0FBQWtCLElBQUFELElBQUF5QjtBQUFBQyxhQUFBMUIsSUFBQTtBQUFBMEIsYUFBQUQsS0FBQSIsIm5hbWVzIjpbIl9zIiwiJFJlZnJlc2hTaWckIiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VDYWxsYmFjayIsIkJhZGdlIiwiRmlsZVNwcmVhZHNoZWV0IiwiRG93bmxvYWQiLCJTdGFyIiwiQ2FsZW5kYXIiLCJMb2FkZXIyIiwiZm9ybWF0RGF0ZSIsImlzb1N0cmluZyIsImRhdGUiLCJEYXRlIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwibW9udGgiLCJkYXkiLCJ5ZWFyIiwiZm9ybWF0RmlsZVNpemUiLCJieXRlcyIsInVuZGVmaW5lZCIsInRvRml4ZWQiLCJGaWxlRW50cnkiLCJmaWxlIiwiZmlsZV91cmwiLCJmaWxlX25hbWUiLCJpc19jdXJyZW50Iiwib3JpZ2luYWxfdXBsb2FkX2RhdGUiLCJmaWxlX3NpemUiLCJfYyIsIlZlbmRvclByaWNpbmdGaWxlcyIsInZlbmRvcklkIiwidmVuZG9yTmFtZSIsImZpbGVzIiwic2V0RmlsZXMiLCJpc0xvYWRpbmciLCJzZXRJc0xvYWRpbmciLCJlcnJvciIsInNldEVycm9yIiwiZmV0Y2hGaWxlcyIsInJlc3BvbnNlIiwiZmV0Y2giLCJvayIsIkVycm9yIiwic3RhdHVzVGV4dCIsInJlc3VsdCIsImpzb24iLCJkYXRhIiwiZXJyIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJsZW5ndGgiLCJtYXAiLCJpZCIsIl9jMiIsIiRSZWZyZXNoUmVnJCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJ2ZW5kb3ItcHJpY2luZy1maWxlcy50c3giXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XHJcblxyXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VDYWxsYmFjayB9IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgeyBCYWRnZSB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvYmFkZ2VcIjtcclxuaW1wb3J0IHsgVmVuZG9yUHJpY2luZ0ZpbGUgfSBmcm9tIFwiQC9saWIvZGF0YS92ZW5kb3JzXCI7XHJcbmltcG9ydCB7IEZpbGVTcHJlYWRzaGVldCwgRG93bmxvYWQsIFN0YXIsIENhbGVuZGFyLCBMb2FkZXIyIH0gZnJvbSBcImx1Y2lkZS1yZWFjdFwiO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBUeXBlc1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG50eXBlIFZlbmRvclByaWNpbmdGaWxlc1Byb3BzID0ge1xyXG4gIHZlbmRvcklkOiBzdHJpbmc7XHJcbiAgdmVuZG9yTmFtZT86IHN0cmluZztcclxufTtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gSGVscGVyIEZ1bmN0aW9uc1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5mdW5jdGlvbiBmb3JtYXREYXRlKGlzb1N0cmluZzogc3RyaW5nIHwgbnVsbCk6IHN0cmluZyB7XHJcbiAgaWYgKCFpc29TdHJpbmcpIHJldHVybiBcIi1cIjtcclxuICBjb25zdCBkYXRlID0gbmV3IERhdGUoaXNvU3RyaW5nKTtcclxuICByZXR1cm4gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoXCJlbi1VU1wiLCB7XHJcbiAgICBtb250aDogXCJzaG9ydFwiLFxyXG4gICAgZGF5OiBcIm51bWVyaWNcIixcclxuICAgIHllYXI6IFwibnVtZXJpY1wiLFxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmb3JtYXRGaWxlU2l6ZShieXRlczogbnVtYmVyIHwgbnVsbCk6IHN0cmluZyB7XHJcbiAgaWYgKGJ5dGVzID09PSBudWxsIHx8IGJ5dGVzID09PSB1bmRlZmluZWQpIHJldHVybiBcIi1cIjtcclxuICBpZiAoYnl0ZXMgPCAxMDI0KSByZXR1cm4gYCR7Ynl0ZXN9IEJgO1xyXG4gIGlmIChieXRlcyA8IDEwMjQgKiAxMDI0KSByZXR1cm4gYCR7KGJ5dGVzIC8gMTAyNCkudG9GaXhlZCgxKX0gS0JgO1xyXG4gIHJldHVybiBgJHsoYnl0ZXMgLyAoMTAyNCAqIDEwMjQpKS50b0ZpeGVkKDEpfSBNQmA7XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gRmlsZSBFbnRyeSBDb21wb25lbnRcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZnVuY3Rpb24gRmlsZUVudHJ5KHsgZmlsZSB9OiB7IGZpbGU6IFZlbmRvclByaWNpbmdGaWxlIH0pIHtcclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gZ2FwLTIgcHktMiBib3JkZXItYiBib3JkZXItYm9yZGVyLzUwIGxhc3Q6Ym9yZGVyLWItMFwiPlxyXG4gICAgICB7LyogTGVmdCBzaWRlOiBJY29uICsgRmlsZSBuYW1lICovfVxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIG1pbi13LTAgZmxleC0xXCI+XHJcbiAgICAgICAgPEZpbGVTcHJlYWRzaGVldCBjbGFzc05hbWU9XCJoLTMuNSB3LTMuNSB0ZXh0LW11dGVkLWZvcmVncm91bmQgc2hyaW5rLTBcIiAvPlxyXG4gICAgICAgIHtmaWxlLmZpbGVfdXJsID8gKFxyXG4gICAgICAgICAgPGFcclxuICAgICAgICAgICAgaHJlZj17ZmlsZS5maWxlX3VybH1cclxuICAgICAgICAgICAgdGFyZ2V0PVwiX2JsYW5rXCJcclxuICAgICAgICAgICAgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiXHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1wcmltYXJ5IGhvdmVyOnVuZGVybGluZSB0cnVuY2F0ZSBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMVwiXHJcbiAgICAgICAgICAgIHRpdGxlPXtmaWxlLmZpbGVfbmFtZX1cclxuICAgICAgICAgID5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidHJ1bmNhdGVcIj57ZmlsZS5maWxlX25hbWV9PC9zcGFuPlxyXG4gICAgICAgICAgICA8RG93bmxvYWQgY2xhc3NOYW1lPVwiaC0zIHctMyBzaHJpbmstMFwiIC8+XHJcbiAgICAgICAgICA8L2E+XHJcbiAgICAgICAgKSA6IChcclxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1mb3JlZ3JvdW5kIHRydW5jYXRlXCIgdGl0bGU9e2ZpbGUuZmlsZV9uYW1lfT5cclxuICAgICAgICAgICAge2ZpbGUuZmlsZV9uYW1lfVxyXG4gICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICl9XHJcbiAgICAgICAge2ZpbGUuaXNfY3VycmVudCAmJiAoXHJcbiAgICAgICAgICA8QmFkZ2UgdmFyaWFudD1cInN1Y2Nlc3NcIiBjbGFzc05hbWU9XCJzaHJpbmstMCBweC0xLjUgcHktMCB0ZXh0LVsxMHB4XVwiPlxyXG4gICAgICAgICAgICA8U3RhciBjbGFzc05hbWU9XCJoLTIuNSB3LTIuNSBtci0wLjVcIiAvPlxyXG4gICAgICAgICAgICBDdXJyZW50XHJcbiAgICAgICAgICA8L0JhZGdlPlxyXG4gICAgICAgICl9XHJcbiAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgey8qIFJpZ2h0IHNpZGU6IERhdGUgKyBTaXplICovfVxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0zIHNocmluay0wIHRleHQtWzEwcHhdIHRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiPlxyXG4gICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0xXCI+XHJcbiAgICAgICAgICA8Q2FsZW5kYXIgY2xhc3NOYW1lPVwiaC0zIHctM1wiIC8+XHJcbiAgICAgICAgICB7Zm9ybWF0RGF0ZShmaWxlLm9yaWdpbmFsX3VwbG9hZF9kYXRlKX1cclxuICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidy0xNCB0ZXh0LXJpZ2h0XCI+e2Zvcm1hdEZpbGVTaXplKGZpbGUuZmlsZV9zaXplKX08L3NwYW4+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBNYWluIENvbXBvbmVudFxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gVmVuZG9yUHJpY2luZ0ZpbGVzKHsgdmVuZG9ySWQsIHZlbmRvck5hbWUgfTogVmVuZG9yUHJpY2luZ0ZpbGVzUHJvcHMpIHtcclxuICBjb25zdCBbZmlsZXMsIHNldEZpbGVzXSA9IHVzZVN0YXRlPFZlbmRvclByaWNpbmdGaWxlW10+KFtdKTtcclxuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XHJcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcclxuXHJcbiAgLy8gRmV0Y2ggZmlsZXNcclxuICBjb25zdCBmZXRjaEZpbGVzID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgc2V0RXJyb3IobnVsbCk7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvdmVuZG9ycy8ke3ZlbmRvcklkfS9wcmljaW5nLWZpbGVzYCk7XHJcblxyXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggZmlsZXM6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cclxuICAgICAgaWYgKHJlc3VsdC5lcnJvcikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihyZXN1bHQuZXJyb3IpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBzZXRGaWxlcyhyZXN1bHQuZGF0YSB8fCBbXSk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHZlbmRvciBwcmljaW5nIGZpbGVzOlwiLCBlcnIpO1xyXG4gICAgICBzZXRFcnJvcihlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWQgdG8gbG9hZCBmaWxlc1wiKTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XHJcbiAgICB9XHJcbiAgfSwgW3ZlbmRvcklkXSk7XHJcblxyXG4gIC8vIEluaXRpYWwgZmV0Y2hcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgZmV0Y2hGaWxlcygpO1xyXG4gIH0sIFtmZXRjaEZpbGVzXSk7XHJcblxyXG4gIC8vIExvYWRpbmcgc3RhdGVcclxuICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHB5LTRcIj5cclxuICAgICAgICA8TG9hZGVyMiBjbGFzc05hbWU9XCJoLTQgdy00IGFuaW1hdGUtc3BpbiB0ZXh0LW11dGVkLWZvcmVncm91bmRcIiAvPlxyXG4gICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm1sLTIgdGV4dC14cyB0ZXh0LW11dGVkLWZvcmVncm91bmRcIj5Mb2FkaW5nIGZpbGVzLi4uPC9zcGFuPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvLyBFcnJvciBzdGF0ZVxyXG4gIGlmIChlcnJvcikge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJweS0zIHB4LTIgdGV4dC14cyB0ZXh0LWRhbmdlciBiZy1kYW5nZXIvMTAgcm91bmRlZFwiPlxyXG4gICAgICAgIHtlcnJvcn1cclxuICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy8gRW1wdHkgc3RhdGVcclxuICBpZiAoZmlsZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHB5LTQgdGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCI+XHJcbiAgICAgICAgPEZpbGVTcHJlYWRzaGVldCBjbGFzc05hbWU9XCJoLTYgdy02IG14LWF1dG8gbWItMS41IG9wYWNpdHktNTBcIiAvPlxyXG4gICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHNcIj5ObyBwcmljaW5nIGZpbGVzPC9wPlxyXG4gICAgICAgIHt2ZW5kb3JOYW1lICYmIChcclxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtWzEwcHhdIG10LTAuNVwiPk5vIGZpbGVzIGZvdW5kIGZvciB7dmVuZG9yTmFtZX08L3A+XHJcbiAgICAgICAgKX1cclxuICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy8gRmlsZSBsaXN0XHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0wXCI+XHJcbiAgICAgIHtmaWxlcy5tYXAoKGZpbGUpID0+IChcclxuICAgICAgICA8RmlsZUVudHJ5IGtleT17ZmlsZS5pZH0gZmlsZT17ZmlsZX0gLz5cclxuICAgICAgKSl9XHJcbiAgICA8L2Rpdj5cclxuICApO1xyXG59XHJcbiJdLCJmaWxlIjoiQzovUHJvamVjdHMvU291cmNlIDQgSW5kdXN0cmllcy9zcmMvY29tcG9uZW50cy9hZG1pbi92ZW5kb3ItcHJpY2luZy1maWxlcy50c3gifQ==