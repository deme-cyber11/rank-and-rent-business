import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/components/profit-loss/comparison-summary.tsx");import __vite__cjsImport0_react_jsxDevRuntime from "/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=9303f522"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
import * as RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
let prevRefreshReg;
let prevRefreshSig;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  prevRefreshReg = window.$RefreshReg$;
  prevRefreshSig = window.$RefreshSig$;
  window.$RefreshReg$ = RefreshRuntime.getRefreshReg("C:/Projects/Source 4 Industries/src/components/profit-loss/comparison-summary.tsx");
  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;
}
"use client";
import { TrendingUp, TrendingDown, Minus } from "/node_modules/.vite/deps/lucide-react.js?v=9303f522";
import { Card, CardContent, CardHeader, CardTitle } from "/src/components/ui/card.tsx";
import { cn } from "/src/lib/utils.ts";
import { formatCurrency, formatPercent } from "/src/lib/data/profit-loss.ts";
export function ComparisonSummary({
  comparisonData,
  className
}) {
  if (!comparisonData.hasComparison || !comparisonData.comparison) {
    return /* @__PURE__ */ jsxDEV(Card, { className, children: /* @__PURE__ */ jsxDEV(CardContent, { className: "p-6", children: /* @__PURE__ */ jsxDEV("p", { className: "text-center text-sm text-muted-foreground", children: "No comparison period available" }, void 0, false, {
      fileName: "C:/Projects/Source 4 Industries/src/components/profit-loss/comparison-summary.tsx",
      lineNumber: 41,
      columnNumber: 11
    }, this) }, void 0, false, {
      fileName: "C:/Projects/Source 4 Industries/src/components/profit-loss/comparison-summary.tsx",
      lineNumber: 40,
      columnNumber: 9
    }, this) }, void 0, false, {
      fileName: "C:/Projects/Source 4 Industries/src/components/profit-loss/comparison-summary.tsx",
      lineNumber: 39,
      columnNumber: 7
    }, this);
  }
  const { currentPeriod, comparisonPeriod, comparison } = comparisonData;
  const keyMetrics = [
    { label: "Net Income", key: "Net Income" },
    { label: "Gross Margin", key: "Gross Margin %", isPercentage: true },
    { label: "Operating Margin", key: "Operating Margin %", isPercentage: true }
  ];
  return /* @__PURE__ */ jsxDEV(Card, { className, children: [
    /* @__PURE__ */ jsxDEV(CardHeader, { children: [
      /* @__PURE__ */ jsxDEV(CardTitle, { className: "text-lg", children: "Period Comparison" }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/profit-loss/comparison-summary.tsx",
        lineNumber: 65,
        columnNumber: 9
      }, this),
      /* @__PURE__ */ jsxDEV("p", { className: "text-sm text-muted-foreground", children: [
        currentPeriod.label,
        " vs ",
        comparisonPeriod?.label || "N/A"
      ] }, void 0, true, {
        fileName: "C:/Projects/Source 4 Industries/src/components/profit-loss/comparison-summary.tsx",
        lineNumber: 66,
        columnNumber: 9
      }, this)
    ] }, void 0, true, {
      fileName: "C:/Projects/Source 4 Industries/src/components/profit-loss/comparison-summary.tsx",
      lineNumber: 64,
      columnNumber: 7
    }, this),
    /* @__PURE__ */ jsxDEV(CardContent, { children: /* @__PURE__ */ jsxDEV("div", { className: "grid gap-4 md:grid-cols-3", children: keyMetrics.map((metric) => {
      const data = comparison[metric.key];
      if (!data) return null;
      return /* @__PURE__ */ jsxDEV(
        ComparisonMetricCard,
        {
          label: metric.label,
          data,
          isPercentage: metric.isPercentage
        },
        metric.key,
        false,
        {
          fileName: "C:/Projects/Source 4 Industries/src/components/profit-loss/comparison-summary.tsx",
          lineNumber: 77,
          columnNumber: 15
        },
        this
      );
    }) }, void 0, false, {
      fileName: "C:/Projects/Source 4 Industries/src/components/profit-loss/comparison-summary.tsx",
      lineNumber: 71,
      columnNumber: 9
    }, this) }, void 0, false, {
      fileName: "C:/Projects/Source 4 Industries/src/components/profit-loss/comparison-summary.tsx",
      lineNumber: 70,
      columnNumber: 7
    }, this)
  ] }, void 0, true, {
    fileName: "C:/Projects/Source 4 Industries/src/components/profit-loss/comparison-summary.tsx",
    lineNumber: 63,
    columnNumber: 5
  }, this);
}
_c = ComparisonSummary;
function ComparisonMetricCard({
  label,
  data,
  isPercentage = false
}) {
  const { currentValue, dollarChange, percentChange, direction } = data;
  const getColorClass = () => {
    if (direction === "up") return "text-green-600 dark:text-green-400";
    if (direction === "down") return "text-red-600 dark:text-red-400";
    return "text-muted-foreground";
  };
  const getBackgroundClass = () => {
    if (direction === "up") return "bg-green-50 dark:bg-green-950/20";
    if (direction === "down") return "bg-red-50 dark:bg-red-950/20";
    return "bg-muted/20";
  };
  const DirectionIcon = () => {
    if (direction === "up") {
      return /* @__PURE__ */ jsxDEV(TrendingUp, { className: "h-5 w-5" }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/profit-loss/comparison-summary.tsx",
        lineNumber: 120,
        columnNumber: 14
      }, this);
    } else if (direction === "down") {
      return /* @__PURE__ */ jsxDEV(TrendingDown, { className: "h-5 w-5" }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/profit-loss/comparison-summary.tsx",
        lineNumber: 122,
        columnNumber: 14
      }, this);
    }
    return /* @__PURE__ */ jsxDEV(Minus, { className: "h-5 w-5" }, void 0, false, {
      fileName: "C:/Projects/Source 4 Industries/src/components/profit-loss/comparison-summary.tsx",
      lineNumber: 124,
      columnNumber: 12
    }, this);
  };
  return /* @__PURE__ */ jsxDEV(
    "div",
    {
      className: cn(
        "rounded-lg border p-4 transition-colors",
        getBackgroundClass()
      ),
      children: /* @__PURE__ */ jsxDEV("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsxDEV("p", { className: "text-xs font-medium uppercase tracking-wide text-muted-foreground", children: label }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/components/profit-loss/comparison-summary.tsx",
          lineNumber: 135,
          columnNumber: 9
        }, this),
        /* @__PURE__ */ jsxDEV("div", { className: "flex items-center justify-between", children: /* @__PURE__ */ jsxDEV("div", { children: [
          /* @__PURE__ */ jsxDEV("p", { className: "text-2xl font-bold", children: isPercentage ? formatPercent(currentValue) : formatCurrency(currentValue) }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/components/profit-loss/comparison-summary.tsx",
            lineNumber: 140,
            columnNumber: 13
          }, this),
          /* @__PURE__ */ jsxDEV("div", { className: cn("mt-1 flex items-center gap-1", getColorClass()), children: [
            /* @__PURE__ */ jsxDEV(DirectionIcon, {}, void 0, false, {
              fileName: "C:/Projects/Source 4 Industries/src/components/profit-loss/comparison-summary.tsx",
              lineNumber: 146,
              columnNumber: 15
            }, this),
            /* @__PURE__ */ jsxDEV("span", { className: "text-sm font-semibold", children: [
              direction === "up" && "+",
              isPercentage ? `${percentChange.toFixed(1)}%` : formatCurrency(dollarChange)
            ] }, void 0, true, {
              fileName: "C:/Projects/Source 4 Industries/src/components/profit-loss/comparison-summary.tsx",
              lineNumber: 147,
              columnNumber: 15
            }, this)
          ] }, void 0, true, {
            fileName: "C:/Projects/Source 4 Industries/src/components/profit-loss/comparison-summary.tsx",
            lineNumber: 145,
            columnNumber: 13
          }, this)
        ] }, void 0, true, {
          fileName: "C:/Projects/Source 4 Industries/src/components/profit-loss/comparison-summary.tsx",
          lineNumber: 139,
          columnNumber: 11
        }, this) }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/components/profit-loss/comparison-summary.tsx",
          lineNumber: 138,
          columnNumber: 9
        }, this),
        /* @__PURE__ */ jsxDEV("p", { className: "text-xs text-muted-foreground", children: [
          percentChange > 0 && "+",
          formatPercent(percentChange),
          " change"
        ] }, void 0, true, {
          fileName: "C:/Projects/Source 4 Industries/src/components/profit-loss/comparison-summary.tsx",
          lineNumber: 156,
          columnNumber: 9
        }, this)
      ] }, void 0, true, {
        fileName: "C:/Projects/Source 4 Industries/src/components/profit-loss/comparison-summary.tsx",
        lineNumber: 134,
        columnNumber: 7
      }, this)
    },
    void 0,
    false,
    {
      fileName: "C:/Projects/Source 4 Industries/src/components/profit-loss/comparison-summary.tsx",
      lineNumber: 128,
      columnNumber: 5
    },
    this
  );
}
_c2 = ComparisonMetricCard;
var _c, _c2;
$RefreshReg$(_c, "ComparisonSummary");
$RefreshReg$(_c2, "ComparisonMetricCard");
if (import.meta.hot && !inWebWorker) {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}
if (import.meta.hot && !inWebWorker) {
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("C:/Projects/Source 4 Industries/src/components/profit-loss/comparison-summary.tsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("C:/Projects/Source 4 Industries/src/components/profit-loss/comparison-summary.tsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}

//# sourceMappingURL=data:application/json;base64,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R0E7QUFBQSxXQXpCRjtBQUFBO0FBQUE7QUFBQTtBQUFBLGFBMEJBO0FBQUE7QUFBQSxJQWhDRjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFpQ0E7QUFFSjtBQUFDTSxNQWxFUVQ7QUFBb0IsSUFBQUQsSUFBQVU7QUFBQUMsYUFBQVgsSUFBQTtBQUFBVyxhQUFBRCxLQUFBIiwibmFtZXMiOlsiVHJlbmRpbmdVcCIsIlRyZW5kaW5nRG93biIsIk1pbnVzIiwiQ2FyZCIsIkNhcmRDb250ZW50IiwiQ2FyZEhlYWRlciIsIkNhcmRUaXRsZSIsImNuIiwiZm9ybWF0Q3VycmVuY3kiLCJmb3JtYXRQZXJjZW50IiwiQ29tcGFyaXNvblN1bW1hcnkiLCJjb21wYXJpc29uRGF0YSIsImNsYXNzTmFtZSIsImhhc0NvbXBhcmlzb24iLCJjb21wYXJpc29uIiwiY3VycmVudFBlcmlvZCIsImNvbXBhcmlzb25QZXJpb2QiLCJrZXlNZXRyaWNzIiwibGFiZWwiLCJrZXkiLCJpc1BlcmNlbnRhZ2UiLCJtYXAiLCJtZXRyaWMiLCJkYXRhIiwiX2MiLCJDb21wYXJpc29uTWV0cmljQ2FyZCIsImN1cnJlbnRWYWx1ZSIsImRvbGxhckNoYW5nZSIsInBlcmNlbnRDaGFuZ2UiLCJkaXJlY3Rpb24iLCJnZXRDb2xvckNsYXNzIiwiZ2V0QmFja2dyb3VuZENsYXNzIiwiRGlyZWN0aW9uSWNvbiIsInRvRml4ZWQiLCJfYzIiLCIkUmVmcmVzaFJlZyQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZXMiOlsiY29tcGFyaXNvbi1zdW1tYXJ5LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcclxuXHJcbmltcG9ydCB7IFRyZW5kaW5nVXAsIFRyZW5kaW5nRG93biwgTWludXMgfSBmcm9tIFwibHVjaWRlLXJlYWN0XCI7XHJcbmltcG9ydCB7IENhcmQsIENhcmRDb250ZW50LCBDYXJkSGVhZGVyLCBDYXJkVGl0bGUgfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2NhcmRcIjtcclxuaW1wb3J0IHsgY24gfSBmcm9tIFwiQC9saWIvdXRpbHNcIjtcclxuaW1wb3J0IHsgZm9ybWF0Q3VycmVuY3ksIGZvcm1hdFBlcmNlbnQgfSBmcm9tIFwiQC9saWIvZGF0YS9wcm9maXQtbG9zc1wiO1xyXG5pbXBvcnQgdHlwZSB7IFBlcmlvZENvbXBhcmlzb25EYXRhLCBNZXRyaWNDb21wYXJpc29uIH0gZnJvbSBcIkAvbGliL2RhdGEvcHJvZml0LWxvc3NcIjtcclxuXHJcbmludGVyZmFjZSBDb21wYXJpc29uU3VtbWFyeVByb3BzIHtcclxuICBjb21wYXJpc29uRGF0YTogUGVyaW9kQ29tcGFyaXNvbkRhdGE7XHJcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gQ29tcGFyaXNvblN1bW1hcnkoe1xyXG4gIGNvbXBhcmlzb25EYXRhLFxyXG4gIGNsYXNzTmFtZSxcclxufTogQ29tcGFyaXNvblN1bW1hcnlQcm9wcykge1xyXG4gIGlmICghY29tcGFyaXNvbkRhdGEuaGFzQ29tcGFyaXNvbiB8fCAhY29tcGFyaXNvbkRhdGEuY29tcGFyaXNvbikge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPENhcmQgY2xhc3NOYW1lPXtjbGFzc05hbWV9PlxyXG4gICAgICAgIDxDYXJkQ29udGVudCBjbGFzc05hbWU9XCJwLTZcIj5cclxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHRleHQtc20gdGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCI+XHJcbiAgICAgICAgICAgIE5vIGNvbXBhcmlzb24gcGVyaW9kIGF2YWlsYWJsZVxyXG4gICAgICAgICAgPC9wPlxyXG4gICAgICAgIDwvQ2FyZENvbnRlbnQ+XHJcbiAgICAgIDwvQ2FyZD5cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBjb25zdCB7IGN1cnJlbnRQZXJpb2QsIGNvbXBhcmlzb25QZXJpb2QsIGNvbXBhcmlzb24gfSA9IGNvbXBhcmlzb25EYXRhO1xyXG5cclxuICAvLyBLZXkgbWV0cmljcyB0byBkaXNwbGF5XHJcbiAgY29uc3Qga2V5TWV0cmljczoge1xyXG4gICAgbGFiZWw6IHN0cmluZztcclxuICAgIGtleTogc3RyaW5nO1xyXG4gICAgaXNQZXJjZW50YWdlPzogYm9vbGVhbjtcclxuICB9W10gPSBbXHJcbiAgICB7IGxhYmVsOiBcIk5ldCBJbmNvbWVcIiwga2V5OiBcIk5ldCBJbmNvbWVcIiB9LFxyXG4gICAgeyBsYWJlbDogXCJHcm9zcyBNYXJnaW5cIiwga2V5OiBcIkdyb3NzIE1hcmdpbiAlXCIsIGlzUGVyY2VudGFnZTogdHJ1ZSB9LFxyXG4gICAgeyBsYWJlbDogXCJPcGVyYXRpbmcgTWFyZ2luXCIsIGtleTogXCJPcGVyYXRpbmcgTWFyZ2luICVcIiwgaXNQZXJjZW50YWdlOiB0cnVlIH0sXHJcbiAgXTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxDYXJkIGNsYXNzTmFtZT17Y2xhc3NOYW1lfT5cclxuICAgICAgPENhcmRIZWFkZXI+XHJcbiAgICAgICAgPENhcmRUaXRsZSBjbGFzc05hbWU9XCJ0ZXh0LWxnXCI+UGVyaW9kIENvbXBhcmlzb248L0NhcmRUaXRsZT5cclxuICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiPlxyXG4gICAgICAgICAge2N1cnJlbnRQZXJpb2QubGFiZWx9IHZzIHtjb21wYXJpc29uUGVyaW9kPy5sYWJlbCB8fCBcIk4vQVwifVxyXG4gICAgICAgIDwvcD5cclxuICAgICAgPC9DYXJkSGVhZGVyPlxyXG4gICAgICA8Q2FyZENvbnRlbnQ+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdhcC00IG1kOmdyaWQtY29scy0zXCI+XHJcbiAgICAgICAgICB7a2V5TWV0cmljcy5tYXAoKG1ldHJpYykgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gY29tcGFyaXNvblttZXRyaWMua2V5XTtcclxuICAgICAgICAgICAgaWYgKCFkYXRhKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgPENvbXBhcmlzb25NZXRyaWNDYXJkXHJcbiAgICAgICAgICAgICAgICBrZXk9e21ldHJpYy5rZXl9XHJcbiAgICAgICAgICAgICAgICBsYWJlbD17bWV0cmljLmxhYmVsfVxyXG4gICAgICAgICAgICAgICAgZGF0YT17ZGF0YX1cclxuICAgICAgICAgICAgICAgIGlzUGVyY2VudGFnZT17bWV0cmljLmlzUGVyY2VudGFnZX1cclxuICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfSl9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvQ2FyZENvbnRlbnQ+XHJcbiAgICA8L0NhcmQ+XHJcbiAgKTtcclxufVxyXG5cclxuaW50ZXJmYWNlIENvbXBhcmlzb25NZXRyaWNDYXJkUHJvcHMge1xyXG4gIGxhYmVsOiBzdHJpbmc7XHJcbiAgZGF0YTogTWV0cmljQ29tcGFyaXNvbjtcclxuICBpc1BlcmNlbnRhZ2U/OiBib29sZWFuO1xyXG59XHJcblxyXG5mdW5jdGlvbiBDb21wYXJpc29uTWV0cmljQ2FyZCh7XHJcbiAgbGFiZWwsXHJcbiAgZGF0YSxcclxuICBpc1BlcmNlbnRhZ2UgPSBmYWxzZSxcclxufTogQ29tcGFyaXNvbk1ldHJpY0NhcmRQcm9wcykge1xyXG4gIGNvbnN0IHsgY3VycmVudFZhbHVlLCBkb2xsYXJDaGFuZ2UsIHBlcmNlbnRDaGFuZ2UsIGRpcmVjdGlvbiB9ID0gZGF0YTtcclxuXHJcbiAgLy8gRGV0ZXJtaW5lIGNvbG9ycyBiYXNlZCBvbiBtZXRyaWMgdHlwZSBhbmQgZGlyZWN0aW9uXHJcbiAgY29uc3QgZ2V0Q29sb3JDbGFzcyA9ICgpID0+IHtcclxuICAgIC8vIEZvciBtYXJnaW5zIGFuZCBuZXQgaW5jb21lLCB1cCBpcyBnb29kIChncmVlbiksIGRvd24gaXMgYmFkIChyZWQpXHJcbiAgICBpZiAoZGlyZWN0aW9uID09PSBcInVwXCIpIHJldHVybiBcInRleHQtZ3JlZW4tNjAwIGRhcms6dGV4dC1ncmVlbi00MDBcIjtcclxuICAgIGlmIChkaXJlY3Rpb24gPT09IFwiZG93blwiKSByZXR1cm4gXCJ0ZXh0LXJlZC02MDAgZGFyazp0ZXh0LXJlZC00MDBcIjtcclxuICAgIHJldHVybiBcInRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGdldEJhY2tncm91bmRDbGFzcyA9ICgpID0+IHtcclxuICAgIGlmIChkaXJlY3Rpb24gPT09IFwidXBcIikgcmV0dXJuIFwiYmctZ3JlZW4tNTAgZGFyazpiZy1ncmVlbi05NTAvMjBcIjtcclxuICAgIGlmIChkaXJlY3Rpb24gPT09IFwiZG93blwiKSByZXR1cm4gXCJiZy1yZWQtNTAgZGFyazpiZy1yZWQtOTUwLzIwXCI7XHJcbiAgICByZXR1cm4gXCJiZy1tdXRlZC8yMFwiO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IERpcmVjdGlvbkljb24gPSAoKSA9PiB7XHJcbiAgICBpZiAoZGlyZWN0aW9uID09PSBcInVwXCIpIHtcclxuICAgICAgcmV0dXJuIDxUcmVuZGluZ1VwIGNsYXNzTmFtZT1cImgtNSB3LTVcIiAvPjtcclxuICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSBcImRvd25cIikge1xyXG4gICAgICByZXR1cm4gPFRyZW5kaW5nRG93biBjbGFzc05hbWU9XCJoLTUgdy01XCIgLz47XHJcbiAgICB9XHJcbiAgICByZXR1cm4gPE1pbnVzIGNsYXNzTmFtZT1cImgtNSB3LTVcIiAvPjtcclxuICB9O1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdlxyXG4gICAgICBjbGFzc05hbWU9e2NuKFxyXG4gICAgICAgIFwicm91bmRlZC1sZyBib3JkZXIgcC00IHRyYW5zaXRpb24tY29sb3JzXCIsXHJcbiAgICAgICAgZ2V0QmFja2dyb3VuZENsYXNzKClcclxuICAgICAgKX1cclxuICAgID5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTJcIj5cclxuICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIGZvbnQtbWVkaXVtIHVwcGVyY2FzZSB0cmFja2luZy13aWRlIHRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiPlxyXG4gICAgICAgICAge2xhYmVsfVxyXG4gICAgICAgIDwvcD5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlblwiPlxyXG4gICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC0yeGwgZm9udC1ib2xkXCI+XHJcbiAgICAgICAgICAgICAge2lzUGVyY2VudGFnZVxyXG4gICAgICAgICAgICAgICAgPyBmb3JtYXRQZXJjZW50KGN1cnJlbnRWYWx1ZSlcclxuICAgICAgICAgICAgICAgIDogZm9ybWF0Q3VycmVuY3koY3VycmVudFZhbHVlKX1cclxuICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y24oXCJtdC0xIGZsZXggaXRlbXMtY2VudGVyIGdhcC0xXCIsIGdldENvbG9yQ2xhc3MoKSl9PlxyXG4gICAgICAgICAgICAgIDxEaXJlY3Rpb25JY29uIC8+XHJcbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LXNlbWlib2xkXCI+XHJcbiAgICAgICAgICAgICAgICB7ZGlyZWN0aW9uID09PSBcInVwXCIgJiYgXCIrXCJ9XHJcbiAgICAgICAgICAgICAgICB7aXNQZXJjZW50YWdlXHJcbiAgICAgICAgICAgICAgICAgID8gYCR7cGVyY2VudENoYW5nZS50b0ZpeGVkKDEpfSVgXHJcbiAgICAgICAgICAgICAgICAgIDogZm9ybWF0Q3VycmVuY3koZG9sbGFyQ2hhbmdlKX1cclxuICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LW11dGVkLWZvcmVncm91bmRcIj5cclxuICAgICAgICAgIHtwZXJjZW50Q2hhbmdlID4gMCAmJiBcIitcIn1cclxuICAgICAgICAgIHtmb3JtYXRQZXJjZW50KHBlcmNlbnRDaGFuZ2UpfSBjaGFuZ2VcclxuICAgICAgICA8L3A+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxufVxyXG4iXSwiZmlsZSI6IkM6L1Byb2plY3RzL1NvdXJjZSA0IEluZHVzdHJpZXMvc3JjL2NvbXBvbmVudHMvcHJvZml0LWxvc3MvY29tcGFyaXNvbi1zdW1tYXJ5LnRzeCJ9