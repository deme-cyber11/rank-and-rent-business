export function formatCurrency(amount) {
  const isNegative = amount < 0;
  const absAmount = Math.abs(amount);
  const formatted = new Intl.NumberFormat("en-US", {
    style: "currency",
    currency: "USD",
    minimumFractionDigits: 2,
    maximumFractionDigits: 2
  }).format(absAmount);
  return isNegative ? `-${formatted}` : formatted;
}
export function getNextBusinessDay(date) {
  const result = new Date(date);
  const dayOfWeek = result.getDay();
  if (dayOfWeek === 0) {
    result.setDate(result.getDate() + 1);
  } else if (dayOfWeek === 6) {
    result.setDate(result.getDate() + 2);
  }
  return result;
}
function addPeriod(date, frequency, periods = 1) {
  const result = new Date(date);
  switch (frequency) {
    case "daily":
      result.setDate(result.getDate() + periods);
      break;
    case "weekly":
      result.setDate(result.getDate() + 7 * periods);
      break;
    case "monthly":
      result.setMonth(result.getMonth() + periods);
      break;
  }
  return result;
}
function daysBetween(startDate, endDate) {
  const msPerDay = 24 * 60 * 60 * 1e3;
  return Math.round((endDate.getTime() - startDate.getTime()) / msPerDay);
}
export function calculateMCASchedule(input) {
  const { fundedAmount, factorRate, paymentAmount, paymentFrequency, firstPaymentDate } = input;
  const totalPayback = fundedAmount * factorRate;
  const totalInterest = totalPayback - fundedAmount;
  const interestPortion = (factorRate - 1) / factorRate;
  const principalPortion = 1 / factorRate;
  const payments = [];
  let remainingBalance = totalPayback;
  let currentDate = new Date(firstPaymentDate);
  if (paymentFrequency === "daily") {
    currentDate = getNextBusinessDay(currentDate);
  }
  let paymentNumber = 1;
  while (remainingBalance > 0.01) {
    const actualPayment = Math.min(paymentAmount, remainingBalance);
    const interestThisPayment = actualPayment * interestPortion;
    const principalThisPayment = actualPayment * principalPortion;
    remainingBalance -= actualPayment;
    payments.push({
      paymentNumber,
      date: new Date(currentDate),
      payment: Math.round(actualPayment * 100) / 100,
      principal: Math.round(principalThisPayment * 100) / 100,
      interest: Math.round(interestThisPayment * 100) / 100,
      balance: Math.max(0, Math.round(remainingBalance * 100) / 100)
    });
    currentDate = addPeriod(currentDate, paymentFrequency);
    if (paymentFrequency === "daily") {
      currentDate = getNextBusinessDay(currentDate);
    }
    paymentNumber++;
    if (paymentNumber > 1e4) {
      console.warn("MCA schedule calculation exceeded 10,000 payments");
      break;
    }
  }
  const payoffDate = payments.length > 0 ? payments[payments.length - 1].date : firstPaymentDate;
  const termLength = daysBetween(firstPaymentDate, payoffDate);
  return {
    payments,
    totalPayback: Math.round(totalPayback * 100) / 100,
    totalInterest: Math.round(totalInterest * 100) / 100,
    payoffDate,
    termLength
  };
}
export function calculateTermLoanSchedule(input) {
  const { principal, annualRate, termMonths, firstPaymentDate } = input;
  const monthlyRate = annualRate / 12;
  const n = termMonths;
  let monthlyPayment;
  if (monthlyRate === 0) {
    monthlyPayment = principal / n;
  } else {
    const rateCompound = Math.pow(1 + monthlyRate, n);
    monthlyPayment = principal * (monthlyRate * rateCompound) / (rateCompound - 1);
  }
  const payments = [];
  let remainingBalance = principal;
  let currentDate = new Date(firstPaymentDate);
  let totalInterestPaid = 0;
  for (let paymentNumber = 1; paymentNumber <= termMonths; paymentNumber++) {
    const interestThisPayment = remainingBalance * monthlyRate;
    let actualPayment;
    let principalThisPayment;
    if (paymentNumber === termMonths) {
      principalThisPayment = remainingBalance;
      actualPayment = principalThisPayment + interestThisPayment;
    } else {
      actualPayment = monthlyPayment;
      principalThisPayment = actualPayment - interestThisPayment;
    }
    remainingBalance -= principalThisPayment;
    totalInterestPaid += interestThisPayment;
    payments.push({
      paymentNumber,
      date: new Date(currentDate),
      payment: Math.round(actualPayment * 100) / 100,
      principal: Math.round(principalThisPayment * 100) / 100,
      interest: Math.round(interestThisPayment * 100) / 100,
      balance: Math.max(0, Math.round(remainingBalance * 100) / 100)
    });
    currentDate = addPeriod(currentDate, "monthly");
  }
  const totalPayback = principal + totalInterestPaid;
  const payoffDate = payments.length > 0 ? payments[payments.length - 1].date : firstPaymentDate;
  const termLength = daysBetween(firstPaymentDate, payoffDate);
  return {
    payments,
    totalPayback: Math.round(totalPayback * 100) / 100,
    totalInterest: Math.round(totalInterestPaid * 100) / 100,
    payoffDate,
    termLength
  };
}
export function calculateEarlyPayoff(schedule, paymentsMade, payoffType, discountPercent = 0.25) {
  const { payments, totalPayback, totalInterest } = schedule;
  if (paymentsMade < 0 || paymentsMade >= payments.length) {
    throw new Error(
      `Invalid paymentsMade: ${paymentsMade}. Must be between 0 and ${payments.length - 1}`
    );
  }
  let principalPaid = 0;
  let interestPaid = 0;
  for (let i = 0; i < paymentsMade; i++) {
    principalPaid += payments[i].principal;
    interestPaid += payments[i].interest;
  }
  const remainingBalance = paymentsMade > 0 ? payments[paymentsMade - 1].balance : totalPayback;
  const remainingPrincipal = payments.reduce((sum, p) => sum + p.principal, 0) - principalPaid;
  const originalRemainingInterest = totalInterest - interestPaid;
  let payoffAmount;
  let interestSaved;
  let discountApplied;
  switch (payoffType) {
    case "prorated": {
      const originalPrincipal = payments.reduce((sum, p) => sum + p.principal, 0);
      const factorRate = totalPayback / originalPrincipal;
      payoffAmount = remainingPrincipal * factorRate;
      interestSaved = remainingBalance - payoffAmount;
      break;
    }
    case "remaining_balance": {
      payoffAmount = remainingBalance;
      interestSaved = 0;
      break;
    }
    case "discount": {
      const discountedInterest = originalRemainingInterest * (1 - discountPercent);
      payoffAmount = remainingPrincipal + discountedInterest;
      interestSaved = originalRemainingInterest * discountPercent;
      discountApplied = discountPercent;
      break;
    }
    default:
      throw new Error(`Unknown payoff type: ${payoffType}`);
  }
  return {
    paymentsMade,
    remainingBalance: Math.round(remainingBalance * 100) / 100,
    interestSaved: Math.round(interestSaved * 100) / 100,
    payoffAmount: Math.round(payoffAmount * 100) / 100,
    originalRemainingInterest: Math.round(originalRemainingInterest * 100) / 100,
    discountApplied
  };
}
export function getFrequencyLabel(frequency) {
  switch (frequency) {
    case "daily":
      return "Daily";
    case "weekly":
      return "Weekly";
    case "monthly":
      return "Monthly";
    default:
      return "Unknown";
  }
}
export function calculateMCAApr(fundedAmount, factorRate, termDays) {
  const totalCost = fundedAmount * (factorRate - 1);
  const dailyRate = totalCost / fundedAmount / termDays;
  const annualRate = dailyRate * 365;
  return Math.round(annualRate * 1e4) / 1e4;
}
export function estimatePaymentCount(frequency, termDays) {
  switch (frequency) {
    case "daily":
      return Math.ceil(termDays * (5 / 7));
    case "weekly":
      return Math.ceil(termDays / 7);
    case "monthly":
      return Math.ceil(termDays / 30);
    default:
      return termDays;
  }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlYnRDYWxjdWxhdGlvbnMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIERlYnQgU2NoZWR1bGVyIENhbGN1bGF0aW9uIFV0aWxpdGllc1xyXG4gKlxyXG4gKiBQcm92aWRlcyBjYWxjdWxhdGlvbnMgZm9yIE1DQSAoTWVyY2hhbnQgQ2FzaCBBZHZhbmNlKSBhbmQgVGVybSBMb2FuIHNjaGVkdWxlcyxcclxuICogaW5jbHVkaW5nIHBheW1lbnQgYnJlYWtkb3ducywgZWFybHkgcGF5b2ZmIGNhbGN1bGF0aW9ucywgYW5kIGRhdGUgdXRpbGl0aWVzLlxyXG4gKi9cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFRZUEVTXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4vKipcclxuICogUGF5bWVudCBmcmVxdWVuY3kgb3B0aW9ucyBmb3IgZGVidCBzY2hlZHVsZXNcclxuICovXHJcbmV4cG9ydCB0eXBlIFBheW1lbnRGcmVxdWVuY3kgPSAnZGFpbHknIHwgJ3dlZWtseScgfCAnbW9udGhseSc7XHJcblxyXG4vKipcclxuICogRWFybHkgcGF5b2ZmIGNhbGN1bGF0aW9uIG1ldGhvZHNcclxuICovXHJcbmV4cG9ydCB0eXBlIFBheW9mZlR5cGUgPSAncHJvcmF0ZWQnIHwgJ3JlbWFpbmluZ19iYWxhbmNlJyB8ICdkaXNjb3VudCc7XHJcblxyXG4vKipcclxuICogSW5wdXQgcGFyYW1ldGVycyBmb3IgTUNBIChNZXJjaGFudCBDYXNoIEFkdmFuY2UpIHNjaGVkdWxlIGNhbGN1bGF0aW9uXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1DQVNjaGVkdWxlSW5wdXQge1xyXG4gIC8qKiBUaGUgb3JpZ2luYWwgZnVuZGVkIGFtb3VudCAqL1xyXG4gIGZ1bmRlZEFtb3VudDogbnVtYmVyO1xyXG4gIC8qKiBUaGUgZmFjdG9yIHJhdGUgKGUuZy4sIDEuMzUgbWVhbnMgMzUlIGNvc3Qgb2YgY2FwaXRhbCkgKi9cclxuICBmYWN0b3JSYXRlOiBudW1iZXI7XHJcbiAgLyoqIEZpeGVkIHBheW1lbnQgYW1vdW50IHBlciBwZXJpb2QgKi9cclxuICBwYXltZW50QW1vdW50OiBudW1iZXI7XHJcbiAgLyoqIEhvdyBvZnRlbiBwYXltZW50cyBhcmUgbWFkZSAqL1xyXG4gIHBheW1lbnRGcmVxdWVuY3k6IFBheW1lbnRGcmVxdWVuY3k7XHJcbiAgLyoqIERhdGUgb2YgdGhlIGZpcnN0IHBheW1lbnQgKi9cclxuICBmaXJzdFBheW1lbnREYXRlOiBEYXRlO1xyXG59XHJcblxyXG4vKipcclxuICogSW5wdXQgcGFyYW1ldGVycyBmb3IgVGVybSBMb2FuIHNjaGVkdWxlIGNhbGN1bGF0aW9uXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFRlcm1Mb2FuSW5wdXQge1xyXG4gIC8qKiBUaGUgcHJpbmNpcGFsIGxvYW4gYW1vdW50ICovXHJcbiAgcHJpbmNpcGFsOiBudW1iZXI7XHJcbiAgLyoqIEFubnVhbCBpbnRlcmVzdCByYXRlIGFzIGEgZGVjaW1hbCAoZS5nLiwgMC4xMiBmb3IgMTIlKSAqL1xyXG4gIGFubnVhbFJhdGU6IG51bWJlcjtcclxuICAvKiogTG9hbiB0ZXJtIGluIG1vbnRocyAqL1xyXG4gIHRlcm1Nb250aHM6IG51bWJlcjtcclxuICAvKiogRGF0ZSBvZiB0aGUgZmlyc3QgcGF5bWVudCAqL1xyXG4gIGZpcnN0UGF5bWVudERhdGU6IERhdGU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBIHNpbmdsZSBwYXltZW50IHJvdyBpbiBhIHNjaGVkdWxlXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFBheW1lbnRSb3cge1xyXG4gIC8qKiBTZXF1ZW50aWFsIHBheW1lbnQgbnVtYmVyIHN0YXJ0aW5nIGZyb20gMSAqL1xyXG4gIHBheW1lbnROdW1iZXI6IG51bWJlcjtcclxuICAvKiogRGF0ZSB0aGlzIHBheW1lbnQgaXMgZHVlICovXHJcbiAgZGF0ZTogRGF0ZTtcclxuICAvKiogVG90YWwgcGF5bWVudCBhbW91bnQgKi9cclxuICBwYXltZW50OiBudW1iZXI7XHJcbiAgLyoqIFByaW5jaXBhbCBwb3J0aW9uIG9mIHRoZSBwYXltZW50ICovXHJcbiAgcHJpbmNpcGFsOiBudW1iZXI7XHJcbiAgLyoqIEludGVyZXN0L2ZlZSBwb3J0aW9uIG9mIHRoZSBwYXltZW50ICovXHJcbiAgaW50ZXJlc3Q6IG51bWJlcjtcclxuICAvKiogUmVtYWluaW5nIGJhbGFuY2UgYWZ0ZXIgdGhpcyBwYXltZW50ICovXHJcbiAgYmFsYW5jZTogbnVtYmVyO1xyXG59XHJcblxyXG4vKipcclxuICogQ29tcGxldGUgc2NoZWR1bGUgcmVzdWx0IHdpdGggc3VtbWFyeSBtZXRyaWNzXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFNjaGVkdWxlUmVzdWx0IHtcclxuICAvKiogQXJyYXkgb2YgYWxsIHBheW1lbnQgcm93cyAqL1xyXG4gIHBheW1lbnRzOiBQYXltZW50Um93W107XHJcbiAgLyoqIFRvdGFsIGFtb3VudCB0byBiZSBwYWlkIGJhY2sgKi9cclxuICB0b3RhbFBheWJhY2s6IG51bWJlcjtcclxuICAvKiogVG90YWwgaW50ZXJlc3QvZmVlcyBwYWlkICovXHJcbiAgdG90YWxJbnRlcmVzdDogbnVtYmVyO1xyXG4gIC8qKiBEYXRlIG9mIHRoZSBmaW5hbCBwYXltZW50ICovXHJcbiAgcGF5b2ZmRGF0ZTogRGF0ZTtcclxuICAvKiogVG90YWwgdGVybSBsZW5ndGggaW4gZGF5cyAqL1xyXG4gIHRlcm1MZW5ndGg6IG51bWJlcjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlc3VsdCBvZiBhbiBlYXJseSBwYXlvZmYgY2FsY3VsYXRpb25cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgRWFybHlQYXlvZmZSZXN1bHQge1xyXG4gIC8qKiBOdW1iZXIgb2YgcGF5bWVudHMgYWxyZWFkeSBtYWRlICovXHJcbiAgcGF5bWVudHNNYWRlOiBudW1iZXI7XHJcbiAgLyoqIFJlbWFpbmluZyBiYWxhbmNlIGF0IHRpbWUgb2YgcGF5b2ZmICovXHJcbiAgcmVtYWluaW5nQmFsYW5jZTogbnVtYmVyO1xyXG4gIC8qKiBJbnRlcmVzdCBzYXZlZCBieSBwYXlpbmcgZWFybHkgKi9cclxuICBpbnRlcmVzdFNhdmVkOiBudW1iZXI7XHJcbiAgLyoqIEZpbmFsIHBheW9mZiBhbW91bnQgZHVlICovXHJcbiAgcGF5b2ZmQW1vdW50OiBudW1iZXI7XHJcbiAgLyoqIE9yaWdpbmFsIHJlbWFpbmluZyBpbnRlcmVzdCB0aGF0IHdvdWxkIGhhdmUgYmVlbiBwYWlkICovXHJcbiAgb3JpZ2luYWxSZW1haW5pbmdJbnRlcmVzdDogbnVtYmVyO1xyXG4gIC8qKiBEaXNjb3VudCBwZXJjZW50YWdlIGFwcGxpZWQgKGZvciBkaXNjb3VudCBwYXlvZmYgdHlwZSkgKi9cclxuICBkaXNjb3VudEFwcGxpZWQ/OiBudW1iZXI7XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFVUSUxJVFkgRlVOQ1RJT05TXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4vKipcclxuICogRm9ybWF0IGEgbnVtYmVyIGFzIFVTRCBjdXJyZW5jeVxyXG4gKlxyXG4gKiBAcGFyYW0gYW1vdW50IC0gVGhlIG51bWVyaWMgYW1vdW50IHRvIGZvcm1hdFxyXG4gKiBAcmV0dXJucyBGb3JtYXR0ZWQgc3RyaW5nIHdpdGggJCBzeW1ib2wgYW5kIDIgZGVjaW1hbCBwbGFjZXNcclxuICpcclxuICogQGV4YW1wbGVcclxuICogZm9ybWF0Q3VycmVuY3koMTIzNC41KSAvLyBSZXR1cm5zIFwiJDEsMjM0LjUwXCJcclxuICogZm9ybWF0Q3VycmVuY3koMCkgLy8gUmV0dXJucyBcIiQwLjAwXCJcclxuICogZm9ybWF0Q3VycmVuY3koLTUwMCkgLy8gUmV0dXJucyBcIi0kNTAwLjAwXCJcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRDdXJyZW5jeShhbW91bnQ6IG51bWJlcik6IHN0cmluZyB7XHJcbiAgY29uc3QgaXNOZWdhdGl2ZSA9IGFtb3VudCA8IDA7XHJcbiAgY29uc3QgYWJzQW1vdW50ID0gTWF0aC5hYnMoYW1vdW50KTtcclxuICBjb25zdCBmb3JtYXR0ZWQgPSBuZXcgSW50bC5OdW1iZXJGb3JtYXQoJ2VuLVVTJywge1xyXG4gICAgc3R5bGU6ICdjdXJyZW5jeScsXHJcbiAgICBjdXJyZW5jeTogJ1VTRCcsXHJcbiAgICBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IDIsXHJcbiAgICBtYXhpbXVtRnJhY3Rpb25EaWdpdHM6IDIsXHJcbiAgfSkuZm9ybWF0KGFic0Ftb3VudCk7XHJcblxyXG4gIHJldHVybiBpc05lZ2F0aXZlID8gYC0ke2Zvcm1hdHRlZH1gIDogZm9ybWF0dGVkO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBuZXh0IGJ1c2luZXNzIGRheSAoc2tpcHMgd2Vla2VuZHMpXHJcbiAqIFVzZWQgZm9yIGRhaWx5IHBheW1lbnQgc2NoZWR1bGVzIHdoZXJlIHBheW1lbnRzIG9ubHkgb2NjdXIgb24gYnVzaW5lc3MgZGF5c1xyXG4gKlxyXG4gKiBAcGFyYW0gZGF0ZSAtIFRoZSBzdGFydGluZyBkYXRlXHJcbiAqIEByZXR1cm5zIFRoZSBzYW1lIGRhdGUgaWYgaXQncyBhIHdlZWtkYXksIG9yIHRoZSBuZXh0IE1vbmRheSBpZiBpdCdzIGEgd2Vla2VuZFxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBnZXROZXh0QnVzaW5lc3NEYXkobmV3IERhdGUoJzIwMjUtMDEtMDQnKSkgLy8gU2F0dXJkYXkgLT4gUmV0dXJucyBNb25kYXkgMjAyNS0wMS0wNlxyXG4gKiBnZXROZXh0QnVzaW5lc3NEYXkobmV3IERhdGUoJzIwMjUtMDEtMDMnKSkgLy8gRnJpZGF5IC0+IFJldHVybnMgRnJpZGF5IDIwMjUtMDEtMDNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXROZXh0QnVzaW5lc3NEYXkoZGF0ZTogRGF0ZSk6IERhdGUge1xyXG4gIGNvbnN0IHJlc3VsdCA9IG5ldyBEYXRlKGRhdGUpO1xyXG4gIGNvbnN0IGRheU9mV2VlayA9IHJlc3VsdC5nZXREYXkoKTtcclxuXHJcbiAgLy8gU3VuZGF5ICgwKSAtPiBtb3ZlIHRvIE1vbmRheSAoKzEpXHJcbiAgaWYgKGRheU9mV2VlayA9PT0gMCkge1xyXG4gICAgcmVzdWx0LnNldERhdGUocmVzdWx0LmdldERhdGUoKSArIDEpO1xyXG4gIH1cclxuICAvLyBTYXR1cmRheSAoNikgLT4gbW92ZSB0byBNb25kYXkgKCsyKVxyXG4gIGVsc2UgaWYgKGRheU9mV2VlayA9PT0gNikge1xyXG4gICAgcmVzdWx0LnNldERhdGUocmVzdWx0LmdldERhdGUoKSArIDIpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEFkZCBhIHNwZWNpZmllZCBudW1iZXIgb2YgZGF5cy93ZWVrcy9tb250aHMgdG8gYSBkYXRlXHJcbiAqXHJcbiAqIEBwYXJhbSBkYXRlIC0gVGhlIHN0YXJ0aW5nIGRhdGVcclxuICogQHBhcmFtIGZyZXF1ZW5jeSAtIFRoZSBwYXltZW50IGZyZXF1ZW5jeVxyXG4gKiBAcGFyYW0gcGVyaW9kcyAtIE51bWJlciBvZiBwZXJpb2RzIHRvIGFkZCAoZGVmYXVsdCAxKVxyXG4gKiBAcmV0dXJucyBOZXcgZGF0ZSB3aXRoIHRoZSBwZXJpb2QgYWRkZWRcclxuICovXHJcbmZ1bmN0aW9uIGFkZFBlcmlvZChkYXRlOiBEYXRlLCBmcmVxdWVuY3k6IFBheW1lbnRGcmVxdWVuY3ksIHBlcmlvZHM6IG51bWJlciA9IDEpOiBEYXRlIHtcclxuICBjb25zdCByZXN1bHQgPSBuZXcgRGF0ZShkYXRlKTtcclxuXHJcbiAgc3dpdGNoIChmcmVxdWVuY3kpIHtcclxuICAgIGNhc2UgJ2RhaWx5JzpcclxuICAgICAgcmVzdWx0LnNldERhdGUocmVzdWx0LmdldERhdGUoKSArIHBlcmlvZHMpO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgJ3dlZWtseSc6XHJcbiAgICAgIHJlc3VsdC5zZXREYXRlKHJlc3VsdC5nZXREYXRlKCkgKyAoNyAqIHBlcmlvZHMpKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlICdtb250aGx5JzpcclxuICAgICAgcmVzdWx0LnNldE1vbnRoKHJlc3VsdC5nZXRNb250aCgpICsgcGVyaW9kcyk7XHJcbiAgICAgIGJyZWFrO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuLyoqXHJcbiAqIENhbGN1bGF0ZSB0aGUgbnVtYmVyIG9mIGRheXMgYmV0d2VlbiB0d28gZGF0ZXNcclxuICpcclxuICogQHBhcmFtIHN0YXJ0RGF0ZSAtIFRoZSBzdGFydCBkYXRlXHJcbiAqIEBwYXJhbSBlbmREYXRlIC0gVGhlIGVuZCBkYXRlXHJcbiAqIEByZXR1cm5zIE51bWJlciBvZiBkYXlzIGJldHdlZW4gdGhlIGRhdGVzXHJcbiAqL1xyXG5mdW5jdGlvbiBkYXlzQmV0d2VlbihzdGFydERhdGU6IERhdGUsIGVuZERhdGU6IERhdGUpOiBudW1iZXIge1xyXG4gIGNvbnN0IG1zUGVyRGF5ID0gMjQgKiA2MCAqIDYwICogMTAwMDtcclxuICByZXR1cm4gTWF0aC5yb3VuZCgoZW5kRGF0ZS5nZXRUaW1lKCkgLSBzdGFydERhdGUuZ2V0VGltZSgpKSAvIG1zUGVyRGF5KTtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gTUNBIENBTENVTEFUSU9OU1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuLyoqXHJcbiAqIENhbGN1bGF0ZSBhIGNvbXBsZXRlIE1DQSAoTWVyY2hhbnQgQ2FzaCBBZHZhbmNlKSBwYXltZW50IHNjaGVkdWxlXHJcbiAqXHJcbiAqIE1DQSBwcm9kdWN0cyB1c2UgYSBmYWN0b3IgcmF0ZSByYXRoZXIgdGhhbiBBUFIuIFRoZSB0b3RhbCBwYXliYWNrIGlzXHJcbiAqIHNpbXBseSB0aGUgZnVuZGVkIGFtb3VudCBtdWx0aXBsaWVkIGJ5IHRoZSBmYWN0b3IgcmF0ZS4gRWFjaCBwYXltZW50XHJcbiAqIGlzIHNwbGl0IHByb3BvcnRpb25hbGx5IGJldHdlZW4gcHJpbmNpcGFsIGFuZCBpbnRlcmVzdC9mZWVzLlxyXG4gKlxyXG4gKiBAcGFyYW0gaW5wdXQgLSBNQ0Egc2NoZWR1bGUgcGFyYW1ldGVyc1xyXG4gKiBAcmV0dXJucyBDb21wbGV0ZSBzY2hlZHVsZSB3aXRoIGFsbCBwYXltZW50cyBhbmQgc3VtbWFyeSBtZXRyaWNzXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGNvbnN0IHNjaGVkdWxlID0gY2FsY3VsYXRlTUNBU2NoZWR1bGUoe1xyXG4gKiAgIGZ1bmRlZEFtb3VudDogNTAwMDAsXHJcbiAqICAgZmFjdG9yUmF0ZTogMS4zNSxcclxuICogICBwYXltZW50QW1vdW50OiA1MDAsXHJcbiAqICAgcGF5bWVudEZyZXF1ZW5jeTogJ2RhaWx5JyxcclxuICogICBmaXJzdFBheW1lbnREYXRlOiBuZXcgRGF0ZSgnMjAyNS0wMi0wMScpLFxyXG4gKiB9KTtcclxuICogLy8gUmV0dXJucyBzY2hlZHVsZSB3aXRoIH4xMzUgZGFpbHkgcGF5bWVudHMsICQ2Nyw1MDAgdG90YWwgcGF5YmFja1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZU1DQVNjaGVkdWxlKGlucHV0OiBNQ0FTY2hlZHVsZUlucHV0KTogU2NoZWR1bGVSZXN1bHQge1xyXG4gIGNvbnN0IHsgZnVuZGVkQW1vdW50LCBmYWN0b3JSYXRlLCBwYXltZW50QW1vdW50LCBwYXltZW50RnJlcXVlbmN5LCBmaXJzdFBheW1lbnREYXRlIH0gPSBpbnB1dDtcclxuXHJcbiAgLy8gVG90YWwgYW1vdW50IHRvIGJlIHBhaWQgYmFja1xyXG4gIGNvbnN0IHRvdGFsUGF5YmFjayA9IGZ1bmRlZEFtb3VudCAqIGZhY3RvclJhdGU7XHJcbiAgY29uc3QgdG90YWxJbnRlcmVzdCA9IHRvdGFsUGF5YmFjayAtIGZ1bmRlZEFtb3VudDtcclxuXHJcbiAgLy8gQ2FsY3VsYXRlIHRoZSBwcm9wb3J0aW9uIG9mIGVhY2ggcGF5bWVudCB0aGF0IGdvZXMgdG8gaW50ZXJlc3QgdnMgcHJpbmNpcGFsXHJcbiAgLy8gSW50ZXJlc3QgcG9ydGlvbiA9IChwYXltZW50ICogKGZhY3RvclJhdGUgLSAxKSkgLyBmYWN0b3JSYXRlXHJcbiAgY29uc3QgaW50ZXJlc3RQb3J0aW9uID0gKGZhY3RvclJhdGUgLSAxKSAvIGZhY3RvclJhdGU7XHJcbiAgY29uc3QgcHJpbmNpcGFsUG9ydGlvbiA9IDEgLyBmYWN0b3JSYXRlO1xyXG5cclxuICBjb25zdCBwYXltZW50czogUGF5bWVudFJvd1tdID0gW107XHJcbiAgbGV0IHJlbWFpbmluZ0JhbGFuY2UgPSB0b3RhbFBheWJhY2s7XHJcbiAgbGV0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoZmlyc3RQYXltZW50RGF0ZSk7XHJcblxyXG4gIC8vIEFkanVzdCBmaXJzdCBwYXltZW50IGRhdGUgdG8gYnVzaW5lc3MgZGF5IGlmIG5lZWRlZCBmb3IgZGFpbHkgcGF5bWVudHNcclxuICBpZiAocGF5bWVudEZyZXF1ZW5jeSA9PT0gJ2RhaWx5Jykge1xyXG4gICAgY3VycmVudERhdGUgPSBnZXROZXh0QnVzaW5lc3NEYXkoY3VycmVudERhdGUpO1xyXG4gIH1cclxuXHJcbiAgbGV0IHBheW1lbnROdW1iZXIgPSAxO1xyXG5cclxuICB3aGlsZSAocmVtYWluaW5nQmFsYW5jZSA+IDAuMDEpIHsgLy8gVXNlIHNtYWxsIHRocmVzaG9sZCB0byBoYW5kbGUgZmxvYXRpbmcgcG9pbnRcclxuICAgIC8vIEZvciB0aGUgbGFzdCBwYXltZW50LCBhZGp1c3QgdG8gZXhhY3QgcmVtYWluaW5nIGJhbGFuY2VcclxuICAgIGNvbnN0IGFjdHVhbFBheW1lbnQgPSBNYXRoLm1pbihwYXltZW50QW1vdW50LCByZW1haW5pbmdCYWxhbmNlKTtcclxuXHJcbiAgICAvLyBTcGxpdCBwYXltZW50IHByb3BvcnRpb25hbGx5XHJcbiAgICBjb25zdCBpbnRlcmVzdFRoaXNQYXltZW50ID0gYWN0dWFsUGF5bWVudCAqIGludGVyZXN0UG9ydGlvbjtcclxuICAgIGNvbnN0IHByaW5jaXBhbFRoaXNQYXltZW50ID0gYWN0dWFsUGF5bWVudCAqIHByaW5jaXBhbFBvcnRpb247XHJcblxyXG4gICAgcmVtYWluaW5nQmFsYW5jZSAtPSBhY3R1YWxQYXltZW50O1xyXG5cclxuICAgIHBheW1lbnRzLnB1c2goe1xyXG4gICAgICBwYXltZW50TnVtYmVyLFxyXG4gICAgICBkYXRlOiBuZXcgRGF0ZShjdXJyZW50RGF0ZSksXHJcbiAgICAgIHBheW1lbnQ6IE1hdGgucm91bmQoYWN0dWFsUGF5bWVudCAqIDEwMCkgLyAxMDAsXHJcbiAgICAgIHByaW5jaXBhbDogTWF0aC5yb3VuZChwcmluY2lwYWxUaGlzUGF5bWVudCAqIDEwMCkgLyAxMDAsXHJcbiAgICAgIGludGVyZXN0OiBNYXRoLnJvdW5kKGludGVyZXN0VGhpc1BheW1lbnQgKiAxMDApIC8gMTAwLFxyXG4gICAgICBiYWxhbmNlOiBNYXRoLm1heCgwLCBNYXRoLnJvdW5kKHJlbWFpbmluZ0JhbGFuY2UgKiAxMDApIC8gMTAwKSxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIE1vdmUgdG8gbmV4dCBwYXltZW50IGRhdGVcclxuICAgIGN1cnJlbnREYXRlID0gYWRkUGVyaW9kKGN1cnJlbnREYXRlLCBwYXltZW50RnJlcXVlbmN5KTtcclxuXHJcbiAgICAvLyBTa2lwIHdlZWtlbmRzIGZvciBkYWlseSBwYXltZW50c1xyXG4gICAgaWYgKHBheW1lbnRGcmVxdWVuY3kgPT09ICdkYWlseScpIHtcclxuICAgICAgY3VycmVudERhdGUgPSBnZXROZXh0QnVzaW5lc3NEYXkoY3VycmVudERhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHBheW1lbnROdW1iZXIrKztcclxuXHJcbiAgICAvLyBTYWZldHkgbGltaXQgdG8gcHJldmVudCBpbmZpbml0ZSBsb29wc1xyXG4gICAgaWYgKHBheW1lbnROdW1iZXIgPiAxMDAwMCkge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ01DQSBzY2hlZHVsZSBjYWxjdWxhdGlvbiBleGNlZWRlZCAxMCwwMDAgcGF5bWVudHMnKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25zdCBwYXlvZmZEYXRlID0gcGF5bWVudHMubGVuZ3RoID4gMFxyXG4gICAgPyBwYXltZW50c1twYXltZW50cy5sZW5ndGggLSAxXS5kYXRlXHJcbiAgICA6IGZpcnN0UGF5bWVudERhdGU7XHJcblxyXG4gIGNvbnN0IHRlcm1MZW5ndGggPSBkYXlzQmV0d2VlbihmaXJzdFBheW1lbnREYXRlLCBwYXlvZmZEYXRlKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHBheW1lbnRzLFxyXG4gICAgdG90YWxQYXliYWNrOiBNYXRoLnJvdW5kKHRvdGFsUGF5YmFjayAqIDEwMCkgLyAxMDAsXHJcbiAgICB0b3RhbEludGVyZXN0OiBNYXRoLnJvdW5kKHRvdGFsSW50ZXJlc3QgKiAxMDApIC8gMTAwLFxyXG4gICAgcGF5b2ZmRGF0ZSxcclxuICAgIHRlcm1MZW5ndGgsXHJcbiAgfTtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gVEVSTSBMT0FOIENBTENVTEFUSU9OU1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuLyoqXHJcbiAqIENhbGN1bGF0ZSBhIGNvbXBsZXRlIHRlcm0gbG9hbiBhbW9ydGl6YXRpb24gc2NoZWR1bGVcclxuICpcclxuICogVXNlcyB0aGUgc3RhbmRhcmQgYW1vcnRpemF0aW9uIGZvcm11bGE6XHJcbiAqIE0gPSBQICogW3IoMStyKV5uXSAvIFsoMStyKV5uIC0gMV1cclxuICpcclxuICogV2hlcmU6XHJcbiAqIC0gTSA9IG1vbnRobHkgcGF5bWVudFxyXG4gKiAtIFAgPSBwcmluY2lwYWxcclxuICogLSByID0gbW9udGhseSBpbnRlcmVzdCByYXRlXHJcbiAqIC0gbiA9IG51bWJlciBvZiBwYXltZW50c1xyXG4gKlxyXG4gKiBAcGFyYW0gaW5wdXQgLSBUZXJtIGxvYW4gcGFyYW1ldGVyc1xyXG4gKiBAcmV0dXJucyBDb21wbGV0ZSBhbW9ydGl6YXRpb24gc2NoZWR1bGUgd2l0aCBhbGwgcGF5bWVudHNcclxuICpcclxuICogQGV4YW1wbGVcclxuICogY29uc3Qgc2NoZWR1bGUgPSBjYWxjdWxhdGVUZXJtTG9hblNjaGVkdWxlKHtcclxuICogICBwcmluY2lwYWw6IDEwMDAwMCxcclxuICogICBhbm51YWxSYXRlOiAwLjEyLCAvLyAxMiUgQVBSXHJcbiAqICAgdGVybU1vbnRoczogMzYsXHJcbiAqICAgZmlyc3RQYXltZW50RGF0ZTogbmV3IERhdGUoJzIwMjUtMDItMDEnKSxcclxuICogfSk7XHJcbiAqIC8vIFJldHVybnMgMzYtbW9udGggc2NoZWR1bGUgd2l0aCBkZWNsaW5pbmcgaW50ZXJlc3QgcG9ydGlvbnNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVUZXJtTG9hblNjaGVkdWxlKGlucHV0OiBUZXJtTG9hbklucHV0KTogU2NoZWR1bGVSZXN1bHQge1xyXG4gIGNvbnN0IHsgcHJpbmNpcGFsLCBhbm51YWxSYXRlLCB0ZXJtTW9udGhzLCBmaXJzdFBheW1lbnREYXRlIH0gPSBpbnB1dDtcclxuXHJcbiAgLy8gTW9udGhseSBpbnRlcmVzdCByYXRlXHJcbiAgY29uc3QgbW9udGhseVJhdGUgPSBhbm51YWxSYXRlIC8gMTI7XHJcbiAgY29uc3QgbiA9IHRlcm1Nb250aHM7XHJcblxyXG4gIC8vIENhbGN1bGF0ZSBtb250aGx5IHBheW1lbnQgdXNpbmcgYW1vcnRpemF0aW9uIGZvcm11bGFcclxuICAvLyBNID0gUCAqIFtyKDErcilebl0gLyBbKDErcilebiAtIDFdXHJcbiAgbGV0IG1vbnRobHlQYXltZW50OiBudW1iZXI7XHJcblxyXG4gIGlmIChtb250aGx5UmF0ZSA9PT0gMCkge1xyXG4gICAgLy8gSGFuZGxlIDAlIGludGVyZXN0IGNhc2VcclxuICAgIG1vbnRobHlQYXltZW50ID0gcHJpbmNpcGFsIC8gbjtcclxuICB9IGVsc2Uge1xyXG4gICAgY29uc3QgcmF0ZUNvbXBvdW5kID0gTWF0aC5wb3coMSArIG1vbnRobHlSYXRlLCBuKTtcclxuICAgIG1vbnRobHlQYXltZW50ID0gcHJpbmNpcGFsICogKG1vbnRobHlSYXRlICogcmF0ZUNvbXBvdW5kKSAvIChyYXRlQ29tcG91bmQgLSAxKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHBheW1lbnRzOiBQYXltZW50Um93W10gPSBbXTtcclxuICBsZXQgcmVtYWluaW5nQmFsYW5jZSA9IHByaW5jaXBhbDtcclxuICBsZXQgY3VycmVudERhdGUgPSBuZXcgRGF0ZShmaXJzdFBheW1lbnREYXRlKTtcclxuICBsZXQgdG90YWxJbnRlcmVzdFBhaWQgPSAwO1xyXG5cclxuICBmb3IgKGxldCBwYXltZW50TnVtYmVyID0gMTsgcGF5bWVudE51bWJlciA8PSB0ZXJtTW9udGhzOyBwYXltZW50TnVtYmVyKyspIHtcclxuICAgIC8vIEludGVyZXN0IGZvciB0aGlzIHBlcmlvZCBpcyBjYWxjdWxhdGVkIG9uIHJlbWFpbmluZyBiYWxhbmNlXHJcbiAgICBjb25zdCBpbnRlcmVzdFRoaXNQYXltZW50ID0gcmVtYWluaW5nQmFsYW5jZSAqIG1vbnRobHlSYXRlO1xyXG5cclxuICAgIC8vIEZvciB0aGUgbGFzdCBwYXltZW50LCBhZGp1c3QgdG8gZXhhY3QgcmVtYWluaW5nIGJhbGFuY2UgcGx1cyBmaW5hbCBpbnRlcmVzdFxyXG4gICAgbGV0IGFjdHVhbFBheW1lbnQ6IG51bWJlcjtcclxuICAgIGxldCBwcmluY2lwYWxUaGlzUGF5bWVudDogbnVtYmVyO1xyXG5cclxuICAgIGlmIChwYXltZW50TnVtYmVyID09PSB0ZXJtTW9udGhzKSB7XHJcbiAgICAgIC8vIEZpbmFsIHBheW1lbnQgLSBwYXkgb2ZmIGV4YWN0IHJlbWFpbmluZyBiYWxhbmNlXHJcbiAgICAgIHByaW5jaXBhbFRoaXNQYXltZW50ID0gcmVtYWluaW5nQmFsYW5jZTtcclxuICAgICAgYWN0dWFsUGF5bWVudCA9IHByaW5jaXBhbFRoaXNQYXltZW50ICsgaW50ZXJlc3RUaGlzUGF5bWVudDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFjdHVhbFBheW1lbnQgPSBtb250aGx5UGF5bWVudDtcclxuICAgICAgcHJpbmNpcGFsVGhpc1BheW1lbnQgPSBhY3R1YWxQYXltZW50IC0gaW50ZXJlc3RUaGlzUGF5bWVudDtcclxuICAgIH1cclxuXHJcbiAgICByZW1haW5pbmdCYWxhbmNlIC09IHByaW5jaXBhbFRoaXNQYXltZW50O1xyXG4gICAgdG90YWxJbnRlcmVzdFBhaWQgKz0gaW50ZXJlc3RUaGlzUGF5bWVudDtcclxuXHJcbiAgICBwYXltZW50cy5wdXNoKHtcclxuICAgICAgcGF5bWVudE51bWJlcixcclxuICAgICAgZGF0ZTogbmV3IERhdGUoY3VycmVudERhdGUpLFxyXG4gICAgICBwYXltZW50OiBNYXRoLnJvdW5kKGFjdHVhbFBheW1lbnQgKiAxMDApIC8gMTAwLFxyXG4gICAgICBwcmluY2lwYWw6IE1hdGgucm91bmQocHJpbmNpcGFsVGhpc1BheW1lbnQgKiAxMDApIC8gMTAwLFxyXG4gICAgICBpbnRlcmVzdDogTWF0aC5yb3VuZChpbnRlcmVzdFRoaXNQYXltZW50ICogMTAwKSAvIDEwMCxcclxuICAgICAgYmFsYW5jZTogTWF0aC5tYXgoMCwgTWF0aC5yb3VuZChyZW1haW5pbmdCYWxhbmNlICogMTAwKSAvIDEwMCksXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBNb3ZlIHRvIG5leHQgbW9udGhcclxuICAgIGN1cnJlbnREYXRlID0gYWRkUGVyaW9kKGN1cnJlbnREYXRlLCAnbW9udGhseScpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgdG90YWxQYXliYWNrID0gcHJpbmNpcGFsICsgdG90YWxJbnRlcmVzdFBhaWQ7XHJcbiAgY29uc3QgcGF5b2ZmRGF0ZSA9IHBheW1lbnRzLmxlbmd0aCA+IDBcclxuICAgID8gcGF5bWVudHNbcGF5bWVudHMubGVuZ3RoIC0gMV0uZGF0ZVxyXG4gICAgOiBmaXJzdFBheW1lbnREYXRlO1xyXG5cclxuICBjb25zdCB0ZXJtTGVuZ3RoID0gZGF5c0JldHdlZW4oZmlyc3RQYXltZW50RGF0ZSwgcGF5b2ZmRGF0ZSk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBwYXltZW50cyxcclxuICAgIHRvdGFsUGF5YmFjazogTWF0aC5yb3VuZCh0b3RhbFBheWJhY2sgKiAxMDApIC8gMTAwLFxyXG4gICAgdG90YWxJbnRlcmVzdDogTWF0aC5yb3VuZCh0b3RhbEludGVyZXN0UGFpZCAqIDEwMCkgLyAxMDAsXHJcbiAgICBwYXlvZmZEYXRlLFxyXG4gICAgdGVybUxlbmd0aCxcclxuICB9O1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBFQVJMWSBQQVlPRkYgQ0FMQ1VMQVRJT05TXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4vKipcclxuICogQ2FsY3VsYXRlIHRoZSBlYXJseSBwYXlvZmYgYW1vdW50IGZvciBhIGRlYnQgYXQgYW55IHBvaW50IGluIHRoZSBzY2hlZHVsZVxyXG4gKlxyXG4gKiBUaHJlZSBwYXlvZmYgdHlwZXMgYXJlIHN1cHBvcnRlZDpcclxuICogLSBgcHJvcmF0ZWRgOiBSZW1haW5pbmcgZmFjdG9yIGFwcGxpZWQgdG8gb3V0c3RhbmRpbmcgcHJpbmNpcGFsIChjb21tb24gZm9yIE1DQSlcclxuICogLSBgcmVtYWluaW5nX2JhbGFuY2VgOiBKdXN0IHBheSByZW1haW5pbmcgYmFsYW5jZSAobm8gYWRqdXN0bWVudClcclxuICogLSBgZGlzY291bnRgOiBBcHBseSBwZXJjZW50YWdlIGRpc2NvdW50IHRvIHJlbWFpbmluZyBpbnRlcmVzdFxyXG4gKlxyXG4gKiBAcGFyYW0gc2NoZWR1bGUgLSBUaGUgb3JpZ2luYWwgc2NoZWR1bGUgcmVzdWx0XHJcbiAqIEBwYXJhbSBwYXltZW50c01hZGUgLSBOdW1iZXIgb2YgcGF5bWVudHMgYWxyZWFkeSBtYWRlICgxLWluZGV4ZWQpXHJcbiAqIEBwYXJhbSBwYXlvZmZUeXBlIC0gTWV0aG9kIGZvciBjYWxjdWxhdGluZyBwYXlvZmYgYW1vdW50XHJcbiAqIEBwYXJhbSBkaXNjb3VudFBlcmNlbnQgLSBEaXNjb3VudCBwZXJjZW50YWdlIGZvciAnZGlzY291bnQnIHR5cGUgKGUuZy4sIDAuMjUgZm9yIDI1JSlcclxuICogQHJldHVybnMgRWFybHkgcGF5b2ZmIGNhbGN1bGF0aW9uIHJlc3VsdHNcclxuICpcclxuICogQGV4YW1wbGVcclxuICogLy8gQWZ0ZXIgNTAgcGF5bWVudHMgb24gYSAxMzUtcGF5bWVudCBNQ0EsIGNhbGN1bGF0ZSBwcm9yYXRlZCBwYXlvZmZcclxuICogY29uc3QgcGF5b2ZmID0gY2FsY3VsYXRlRWFybHlQYXlvZmYoc2NoZWR1bGUsIDUwLCAncHJvcmF0ZWQnKTtcclxuICpcclxuICogQGV4YW1wbGVcclxuICogLy8gQ2FsY3VsYXRlIHBheW9mZiB3aXRoIDIwJSBpbnRlcmVzdCBkaXNjb3VudFxyXG4gKiBjb25zdCBwYXlvZmYgPSBjYWxjdWxhdGVFYXJseVBheW9mZihzY2hlZHVsZSwgNTAsICdkaXNjb3VudCcsIDAuMjApO1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZUVhcmx5UGF5b2ZmKFxyXG4gIHNjaGVkdWxlOiBTY2hlZHVsZVJlc3VsdCxcclxuICBwYXltZW50c01hZGU6IG51bWJlcixcclxuICBwYXlvZmZUeXBlOiBQYXlvZmZUeXBlLFxyXG4gIGRpc2NvdW50UGVyY2VudDogbnVtYmVyID0gMC4yNVxyXG4pOiBFYXJseVBheW9mZlJlc3VsdCB7XHJcbiAgY29uc3QgeyBwYXltZW50cywgdG90YWxQYXliYWNrLCB0b3RhbEludGVyZXN0IH0gPSBzY2hlZHVsZTtcclxuXHJcbiAgLy8gVmFsaWRhdGUgcGF5bWVudHNNYWRlXHJcbiAgaWYgKHBheW1lbnRzTWFkZSA8IDAgfHwgcGF5bWVudHNNYWRlID49IHBheW1lbnRzLmxlbmd0aCkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICBgSW52YWxpZCBwYXltZW50c01hZGU6ICR7cGF5bWVudHNNYWRlfS4gTXVzdCBiZSBiZXR3ZWVuIDAgYW5kICR7cGF5bWVudHMubGVuZ3RoIC0gMX1gXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy8gQ2FsY3VsYXRlIHRvdGFscyB1cCB0byB0aGUgcGF5b2ZmIHBvaW50XHJcbiAgbGV0IHByaW5jaXBhbFBhaWQgPSAwO1xyXG4gIGxldCBpbnRlcmVzdFBhaWQgPSAwO1xyXG5cclxuICBmb3IgKGxldCBpID0gMDsgaSA8IHBheW1lbnRzTWFkZTsgaSsrKSB7XHJcbiAgICBwcmluY2lwYWxQYWlkICs9IHBheW1lbnRzW2ldLnByaW5jaXBhbDtcclxuICAgIGludGVyZXN0UGFpZCArPSBwYXltZW50c1tpXS5pbnRlcmVzdDtcclxuICB9XHJcblxyXG4gIC8vIFJlbWFpbmluZyBhbW91bnRzXHJcbiAgY29uc3QgcmVtYWluaW5nQmFsYW5jZSA9IHBheW1lbnRzTWFkZSA+IDBcclxuICAgID8gcGF5bWVudHNbcGF5bWVudHNNYWRlIC0gMV0uYmFsYW5jZVxyXG4gICAgOiB0b3RhbFBheWJhY2s7XHJcblxyXG4gIGNvbnN0IHJlbWFpbmluZ1ByaW5jaXBhbCA9IHBheW1lbnRzLnJlZHVjZSgoc3VtLCBwKSA9PiBzdW0gKyBwLnByaW5jaXBhbCwgMCkgLSBwcmluY2lwYWxQYWlkO1xyXG4gIGNvbnN0IG9yaWdpbmFsUmVtYWluaW5nSW50ZXJlc3QgPSB0b3RhbEludGVyZXN0IC0gaW50ZXJlc3RQYWlkO1xyXG5cclxuICBsZXQgcGF5b2ZmQW1vdW50OiBudW1iZXI7XHJcbiAgbGV0IGludGVyZXN0U2F2ZWQ6IG51bWJlcjtcclxuICBsZXQgZGlzY291bnRBcHBsaWVkOiBudW1iZXIgfCB1bmRlZmluZWQ7XHJcblxyXG4gIHN3aXRjaCAocGF5b2ZmVHlwZSkge1xyXG4gICAgY2FzZSAncHJvcmF0ZWQnOiB7XHJcbiAgICAgIC8vIFByb3JhdGVkOiBBcHBseSB0aGUgc2FtZSBmYWN0b3IgcmF0ZSB0byByZW1haW5pbmcgcHJpbmNpcGFsXHJcbiAgICAgIC8vIFRoaXMgaXMgY29tbW9uIGZvciBNQ0Egd2hlcmUgeW91IHN0aWxsIG93ZSB0aGUgXCJmZWVcIiBwcm9wb3J0aW9uYWxseVxyXG4gICAgICAvLyBDYWxjdWxhdGUgb3JpZ2luYWwgZmFjdG9yIHJhdGUgZnJvbSBzY2hlZHVsZVxyXG4gICAgICBjb25zdCBvcmlnaW5hbFByaW5jaXBhbCA9IHBheW1lbnRzLnJlZHVjZSgoc3VtLCBwKSA9PiBzdW0gKyBwLnByaW5jaXBhbCwgMCk7XHJcbiAgICAgIGNvbnN0IGZhY3RvclJhdGUgPSB0b3RhbFBheWJhY2sgLyBvcmlnaW5hbFByaW5jaXBhbDtcclxuXHJcbiAgICAgIHBheW9mZkFtb3VudCA9IHJlbWFpbmluZ1ByaW5jaXBhbCAqIGZhY3RvclJhdGU7XHJcbiAgICAgIGludGVyZXN0U2F2ZWQgPSByZW1haW5pbmdCYWxhbmNlIC0gcGF5b2ZmQW1vdW50O1xyXG4gICAgICBicmVhaztcclxuICAgIH1cclxuXHJcbiAgICBjYXNlICdyZW1haW5pbmdfYmFsYW5jZSc6IHtcclxuICAgICAgLy8gSnVzdCBwYXkgdGhlIHJlbWFpbmluZyBiYWxhbmNlIGFzLWlzIChubyBkaXNjb3VudCwgbm8gYWRqdXN0bWVudClcclxuICAgICAgcGF5b2ZmQW1vdW50ID0gcmVtYWluaW5nQmFsYW5jZTtcclxuICAgICAgaW50ZXJlc3RTYXZlZCA9IDA7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG5cclxuICAgIGNhc2UgJ2Rpc2NvdW50Jzoge1xyXG4gICAgICAvLyBBcHBseSBhIHBlcmNlbnRhZ2UgZGlzY291bnQgdG8gcmVtYWluaW5nIGludGVyZXN0XHJcbiAgICAgIGNvbnN0IGRpc2NvdW50ZWRJbnRlcmVzdCA9IG9yaWdpbmFsUmVtYWluaW5nSW50ZXJlc3QgKiAoMSAtIGRpc2NvdW50UGVyY2VudCk7XHJcbiAgICAgIHBheW9mZkFtb3VudCA9IHJlbWFpbmluZ1ByaW5jaXBhbCArIGRpc2NvdW50ZWRJbnRlcmVzdDtcclxuICAgICAgaW50ZXJlc3RTYXZlZCA9IG9yaWdpbmFsUmVtYWluaW5nSW50ZXJlc3QgKiBkaXNjb3VudFBlcmNlbnQ7XHJcbiAgICAgIGRpc2NvdW50QXBwbGllZCA9IGRpc2NvdW50UGVyY2VudDtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcblxyXG4gICAgZGVmYXVsdDpcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHBheW9mZiB0eXBlOiAke3BheW9mZlR5cGV9YCk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgcGF5bWVudHNNYWRlLFxyXG4gICAgcmVtYWluaW5nQmFsYW5jZTogTWF0aC5yb3VuZChyZW1haW5pbmdCYWxhbmNlICogMTAwKSAvIDEwMCxcclxuICAgIGludGVyZXN0U2F2ZWQ6IE1hdGgucm91bmQoaW50ZXJlc3RTYXZlZCAqIDEwMCkgLyAxMDAsXHJcbiAgICBwYXlvZmZBbW91bnQ6IE1hdGgucm91bmQocGF5b2ZmQW1vdW50ICogMTAwKSAvIDEwMCxcclxuICAgIG9yaWdpbmFsUmVtYWluaW5nSW50ZXJlc3Q6IE1hdGgucm91bmQob3JpZ2luYWxSZW1haW5pbmdJbnRlcmVzdCAqIDEwMCkgLyAxMDAsXHJcbiAgICBkaXNjb3VudEFwcGxpZWQsXHJcbiAgfTtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gSEVMUEVSIEZVTkNUSU9OUyBGT1IgVUlcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbi8qKlxyXG4gKiBHZXQgYSBodW1hbi1yZWFkYWJsZSBkZXNjcmlwdGlvbiBvZiB0aGUgcGF5bWVudCBmcmVxdWVuY3lcclxuICpcclxuICogQHBhcmFtIGZyZXF1ZW5jeSAtIFRoZSBwYXltZW50IGZyZXF1ZW5jeVxyXG4gKiBAcmV0dXJucyBIdW1hbi1yZWFkYWJsZSBzdHJpbmdcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRGcmVxdWVuY3lMYWJlbChmcmVxdWVuY3k6IFBheW1lbnRGcmVxdWVuY3kpOiBzdHJpbmcge1xyXG4gIHN3aXRjaCAoZnJlcXVlbmN5KSB7XHJcbiAgICBjYXNlICdkYWlseSc6XHJcbiAgICAgIHJldHVybiAnRGFpbHknO1xyXG4gICAgY2FzZSAnd2Vla2x5JzpcclxuICAgICAgcmV0dXJuICdXZWVrbHknO1xyXG4gICAgY2FzZSAnbW9udGhseSc6XHJcbiAgICAgIHJldHVybiAnTW9udGhseSc7XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICByZXR1cm4gJ1Vua25vd24nO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIENhbGN1bGF0ZSB0aGUgZWZmZWN0aXZlIEFQUiBmb3IgYW4gTUNBIHByb2R1Y3RcclxuICogVGhpcyBpcyB1c2VmdWwgZm9yIGNvbXBhcmluZyBNQ0EgcHJvZHVjdHMgdG8gdHJhZGl0aW9uYWwgbG9hbnNcclxuICpcclxuICogQHBhcmFtIGZ1bmRlZEFtb3VudCAtIFRoZSBmdW5kZWQgYW1vdW50XHJcbiAqIEBwYXJhbSBmYWN0b3JSYXRlIC0gVGhlIGZhY3RvciByYXRlIChlLmcuLCAxLjM1KVxyXG4gKiBAcGFyYW0gdGVybURheXMgLSBFeHBlY3RlZCB0ZXJtIGluIGRheXNcclxuICogQHJldHVybnMgRXN0aW1hdGVkIEFQUiBhcyBhIGRlY2ltYWwgKGUuZy4sIDAuODUgZm9yIDg1JSlcclxuICpcclxuICogQGV4YW1wbGVcclxuICogLy8gJDUwLDAwMCBNQ0EgYXQgMS4zNSBmYWN0b3IsIDYtbW9udGggdGVybVxyXG4gKiBjb25zdCBhcHIgPSBjYWxjdWxhdGVNQ0FBcHIoNTAwMDAsIDEuMzUsIDE4MCk7XHJcbiAqIC8vIFJldHVybnMgYXBwcm94aW1hdGVseSAwLjcxICg3MSUgQVBSKVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZU1DQUFwcihcclxuICBmdW5kZWRBbW91bnQ6IG51bWJlcixcclxuICBmYWN0b3JSYXRlOiBudW1iZXIsXHJcbiAgdGVybURheXM6IG51bWJlclxyXG4pOiBudW1iZXIge1xyXG4gIGNvbnN0IHRvdGFsQ29zdCA9IGZ1bmRlZEFtb3VudCAqIChmYWN0b3JSYXRlIC0gMSk7XHJcbiAgY29uc3QgZGFpbHlSYXRlID0gdG90YWxDb3N0IC8gZnVuZGVkQW1vdW50IC8gdGVybURheXM7XHJcbiAgY29uc3QgYW5udWFsUmF0ZSA9IGRhaWx5UmF0ZSAqIDM2NTtcclxuXHJcbiAgcmV0dXJuIE1hdGgucm91bmQoYW5udWFsUmF0ZSAqIDEwMDAwKSAvIDEwMDAwOyAvLyBSb3VuZCB0byA0IGRlY2ltYWwgcGxhY2VzXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDYWxjdWxhdGUgZXN0aW1hdGVkIHBheW1lbnRzIHBlciBwZXJpb2RcclxuICpcclxuICogQHBhcmFtIGZyZXF1ZW5jeSAtIFBheW1lbnQgZnJlcXVlbmN5XHJcbiAqIEBwYXJhbSB0ZXJtRGF5cyAtIFRvdGFsIHRlcm0gaW4gZGF5c1xyXG4gKiBAcmV0dXJucyBFc3RpbWF0ZWQgbnVtYmVyIG9mIHBheW1lbnRzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZXN0aW1hdGVQYXltZW50Q291bnQoZnJlcXVlbmN5OiBQYXltZW50RnJlcXVlbmN5LCB0ZXJtRGF5czogbnVtYmVyKTogbnVtYmVyIHtcclxuICBzd2l0Y2ggKGZyZXF1ZW5jeSkge1xyXG4gICAgY2FzZSAnZGFpbHknOlxyXG4gICAgICAvLyBBc3N1bWUgcm91Z2hseSA1IGJ1c2luZXNzIGRheXMgcGVyIHdlZWsgKG5vIHdlZWtlbmRzKVxyXG4gICAgICByZXR1cm4gTWF0aC5jZWlsKHRlcm1EYXlzICogKDUgLyA3KSk7XHJcbiAgICBjYXNlICd3ZWVrbHknOlxyXG4gICAgICByZXR1cm4gTWF0aC5jZWlsKHRlcm1EYXlzIC8gNyk7XHJcbiAgICBjYXNlICdtb250aGx5JzpcclxuICAgICAgcmV0dXJuIE1hdGguY2VpbCh0ZXJtRGF5cyAvIDMwKTtcclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIHJldHVybiB0ZXJtRGF5cztcclxuICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiQUFzSE8sZ0JBQVMsZUFBZSxRQUF3QjtBQUNyRCxRQUFNLGFBQWEsU0FBUztBQUM1QixRQUFNLFlBQVksS0FBSyxJQUFJLE1BQU07QUFDakMsUUFBTSxZQUFZLElBQUksS0FBSyxhQUFhLFNBQVM7QUFBQSxJQUMvQyxPQUFPO0FBQUEsSUFDUCxVQUFVO0FBQUEsSUFDVix1QkFBdUI7QUFBQSxJQUN2Qix1QkFBdUI7QUFBQSxFQUN6QixDQUFDLEVBQUUsT0FBTyxTQUFTO0FBRW5CLFNBQU8sYUFBYSxJQUFJLFNBQVMsS0FBSztBQUN4QztBQWFPLGdCQUFTLG1CQUFtQixNQUFrQjtBQUNuRCxRQUFNLFNBQVMsSUFBSSxLQUFLLElBQUk7QUFD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