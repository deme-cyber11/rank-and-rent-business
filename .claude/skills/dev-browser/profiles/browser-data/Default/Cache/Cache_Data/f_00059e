import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/components/bollards/gameplan/ExcelUploadModal.tsx");import __vite__cjsImport0_react_jsxDevRuntime from "/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=9303f522"; const Fragment = __vite__cjsImport0_react_jsxDevRuntime["Fragment"]; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
import * as RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
let prevRefreshReg;
let prevRefreshSig;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  prevRefreshReg = window.$RefreshReg$;
  prevRefreshSig = window.$RefreshSig$;
  window.$RefreshReg$ = RefreshRuntime.getRefreshReg("C:/Projects/Source 4 Industries/src/components/bollards/gameplan/ExcelUploadModal.tsx");
  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;
}
var _s = $RefreshSig$();
import __vite__cjsImport3_react from "/node_modules/.vite/deps/react.js?v=9303f522"; const useState = __vite__cjsImport3_react["useState"];
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogTitle
} from "/src/components/ui/dialog.tsx";
import { Button } from "/src/components/ui/button.tsx";
import { Input } from "/src/components/ui/input.tsx";
import { Loader2, Upload, FileSpreadsheet } from "/node_modules/.vite/deps/lucide-react.js?v=9303f522";
import { supabase } from "/src/lib/supabase/client.ts";
export function ExcelUploadModal({ open, onOpenChange, onUploadSuccess }) {
  _s();
  const [file, setFile] = useState(null);
  const [uploading, setUploading] = useState(false);
  const [error, setError] = useState(null);
  const handleFileChange = (e) => {
    const selectedFile = e.target.files?.[0];
    if (selectedFile) {
      if (!selectedFile.name.endsWith(".xlsx") && !selectedFile.name.endsWith(".xls")) {
        setError("Please select a valid Excel file (.xlsx or .xls)");
        setFile(null);
        return;
      }
      setFile(selectedFile);
      setError(null);
    }
  };
  const handleUpload = async () => {
    if (!file) return;
    setUploading(true);
    setError(null);
    try {
      const session = await supabase.auth.getSession();
      const token = session.data.session?.access_token;
      if (!token) {
        throw new Error("Please log in to import the gameplan");
      }
      const formData = new FormData();
      formData.append("file", file);
      const response = await fetch("/api/bollards/import-gameplan", {
        method: "POST",
        headers: {
          Authorization: `Bearer ${token}`
        },
        body: formData
      });
      const result = await response.json();
      if (!response.ok || !result.success) {
        throw new Error(result.error || "Failed to upload Excel file");
      }
      onUploadSuccess();
      onOpenChange(false);
      setFile(null);
    } catch (err) {
      setError(err instanceof Error ? err.message : "Unknown error occurred");
    } finally {
      setUploading(false);
    }
  };
  const handleClose = () => {
    if (!uploading) {
      onOpenChange(false);
      setFile(null);
      setError(null);
    }
  };
  return /* @__PURE__ */ jsxDEV(Dialog, { open, onOpenChange: handleClose, children: /* @__PURE__ */ jsxDEV(DialogContent, { children: [
    /* @__PURE__ */ jsxDEV(DialogHeader, { children: [
      /* @__PURE__ */ jsxDEV(DialogTitle, { children: "Import 100 Day Gameplan" }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/bollards/gameplan/ExcelUploadModal.tsx",
        lineNumber: 114,
        columnNumber: 11
      }, this),
      /* @__PURE__ */ jsxDEV(DialogDescription, { children: "Upload the Excel file containing your 100-day bollard gameplan. All tabs and tasks will be imported and structured for tracking." }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/bollards/gameplan/ExcelUploadModal.tsx",
        lineNumber: 115,
        columnNumber: 11
      }, this)
    ] }, void 0, true, {
      fileName: "C:/Projects/Source 4 Industries/src/components/bollards/gameplan/ExcelUploadModal.tsx",
      lineNumber: 113,
      columnNumber: 9
    }, this),
    /* @__PURE__ */ jsxDEV("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsxDEV("div", { children: [
        /* @__PURE__ */ jsxDEV("label", { htmlFor: "excel-file", className: "text-sm font-medium mb-2 block", children: "Select Excel File" }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/components/bollards/gameplan/ExcelUploadModal.tsx",
          lineNumber: 124,
          columnNumber: 13
        }, this),
        /* @__PURE__ */ jsxDEV("div", { className: "relative", children: /* @__PURE__ */ jsxDEV(
          Input,
          {
            id: "excel-file",
            type: "file",
            accept: ".xlsx,.xls",
            onChange: handleFileChange,
            disabled: uploading,
            className: "cursor-pointer"
          },
          void 0,
          false,
          {
            fileName: "C:/Projects/Source 4 Industries/src/components/bollards/gameplan/ExcelUploadModal.tsx",
            lineNumber: 128,
            columnNumber: 15
          },
          this
        ) }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/components/bollards/gameplan/ExcelUploadModal.tsx",
          lineNumber: 127,
          columnNumber: 13
        }, this)
      ] }, void 0, true, {
        fileName: "C:/Projects/Source 4 Industries/src/components/bollards/gameplan/ExcelUploadModal.tsx",
        lineNumber: 123,
        columnNumber: 11
      }, this),
      file && /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-3 p-3 bg-muted rounded-md", children: [
        /* @__PURE__ */ jsxDEV(FileSpreadsheet, { className: "h-8 w-8 text-success" }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/components/bollards/gameplan/ExcelUploadModal.tsx",
          lineNumber: 142,
          columnNumber: 15
        }, this),
        /* @__PURE__ */ jsxDEV("div", { className: "flex-1 min-w-0", children: [
          /* @__PURE__ */ jsxDEV("p", { className: "text-sm font-medium truncate", children: file.name }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/components/bollards/gameplan/ExcelUploadModal.tsx",
            lineNumber: 144,
            columnNumber: 17
          }, this),
          /* @__PURE__ */ jsxDEV("p", { className: "text-xs text-muted-foreground", children: [
            (file.size / 1024).toFixed(1),
            " KB"
          ] }, void 0, true, {
            fileName: "C:/Projects/Source 4 Industries/src/components/bollards/gameplan/ExcelUploadModal.tsx",
            lineNumber: 145,
            columnNumber: 17
          }, this)
        ] }, void 0, true, {
          fileName: "C:/Projects/Source 4 Industries/src/components/bollards/gameplan/ExcelUploadModal.tsx",
          lineNumber: 143,
          columnNumber: 15
        }, this)
      ] }, void 0, true, {
        fileName: "C:/Projects/Source 4 Industries/src/components/bollards/gameplan/ExcelUploadModal.tsx",
        lineNumber: 141,
        columnNumber: 11
      }, this),
      error && /* @__PURE__ */ jsxDEV("div", { className: "p-3 bg-danger/10 border border-danger/20 rounded-md", children: /* @__PURE__ */ jsxDEV("p", { className: "text-sm text-danger", children: error }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/bollards/gameplan/ExcelUploadModal.tsx",
        lineNumber: 155,
        columnNumber: 15
      }, this) }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/bollards/gameplan/ExcelUploadModal.tsx",
        lineNumber: 154,
        columnNumber: 11
      }, this),
      /* @__PURE__ */ jsxDEV("div", { className: "p-3 bg-primary/10 border border-primary/20 rounded-md", children: /* @__PURE__ */ jsxDEV("p", { className: "text-xs text-muted-foreground", children: "The import will preserve all tabs, task hierarchies, due dates, and ownership assignments from your Excel file." }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/bollards/gameplan/ExcelUploadModal.tsx",
        lineNumber: 161,
        columnNumber: 13
      }, this) }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/bollards/gameplan/ExcelUploadModal.tsx",
        lineNumber: 160,
        columnNumber: 11
      }, this)
    ] }, void 0, true, {
      fileName: "C:/Projects/Source 4 Industries/src/components/bollards/gameplan/ExcelUploadModal.tsx",
      lineNumber: 121,
      columnNumber: 9
    }, this),
    /* @__PURE__ */ jsxDEV(DialogFooter, { children: [
      /* @__PURE__ */ jsxDEV(Button, { variant: "outline", onClick: handleClose, disabled: uploading, children: "Cancel" }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/bollards/gameplan/ExcelUploadModal.tsx",
        lineNumber: 169,
        columnNumber: 11
      }, this),
      /* @__PURE__ */ jsxDEV(Button, { onClick: handleUpload, disabled: !file || uploading, children: uploading ? /* @__PURE__ */ jsxDEV(Fragment, { children: [
        /* @__PURE__ */ jsxDEV(Loader2, { className: "h-4 w-4 mr-2 animate-spin" }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/components/bollards/gameplan/ExcelUploadModal.tsx",
          lineNumber: 175,
          columnNumber: 17
        }, this),
        "Importing..."
      ] }, void 0, true, {
        fileName: "C:/Projects/Source 4 Industries/src/components/bollards/gameplan/ExcelUploadModal.tsx",
        lineNumber: 174,
        columnNumber: 13
      }, this) : /* @__PURE__ */ jsxDEV(Fragment, { children: [
        /* @__PURE__ */ jsxDEV(Upload, { className: "h-4 w-4 mr-2" }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/components/bollards/gameplan/ExcelUploadModal.tsx",
          lineNumber: 180,
          columnNumber: 17
        }, this),
        "Import Gameplan"
      ] }, void 0, true, {
        fileName: "C:/Projects/Source 4 Industries/src/components/bollards/gameplan/ExcelUploadModal.tsx",
        lineNumber: 179,
        columnNumber: 13
      }, this) }, void 0, false, {
        fileName: "C:/Projects/Source 4 Industries/src/components/bollards/gameplan/ExcelUploadModal.tsx",
        lineNumber: 172,
        columnNumber: 11
      }, this)
    ] }, void 0, true, {
      fileName: "C:/Projects/Source 4 Industries/src/components/bollards/gameplan/ExcelUploadModal.tsx",
      lineNumber: 168,
      columnNumber: 9
    }, this)
  ] }, void 0, true, {
    fileName: "C:/Projects/Source 4 Industries/src/components/bollards/gameplan/ExcelUploadModal.tsx",
    lineNumber: 112,
    columnNumber: 7
  }, this) }, void 0, false, {
    fileName: "C:/Projects/Source 4 Industries/src/components/bollards/gameplan/ExcelUploadModal.tsx",
    lineNumber: 111,
    columnNumber: 5
  }, this);
}
_s(ExcelUploadModal, "P4uK+CGFy3V5VhPtt4YZdffEkXc=");
_c = ExcelUploadModal;
var _c;
$RefreshReg$(_c, "ExcelUploadModal");
if (import.meta.hot && !inWebWorker) {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}
if (import.meta.hot && !inWebWorker) {
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("C:/Projects/Source 4 Industries/src/components/bollards/gameplan/ExcelUploadModal.tsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("C:/Projects/Source 4 Industries/src/components/bollards/gameplan/ExcelUploadModal.tsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}

//# sourceMappingURL=data:application/json;base64,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QUFFLFdBQVUsaUNBQWdDLCtIQUE3QztBQUFBO0FBQUE7QUFBQTtBQUFBLGFBR0EsS0FKRjtBQUFBO0FBQUE7QUFBQTtBQUFBLGFBS0E7QUFBQSxTQTVDRjtBQUFBO0FBQUE7QUFBQTtBQUFBLFdBNkNBO0FBQUEsSUFFQSx1QkFBQyxnQkFDQztBQUFBLDZCQUFDLFVBQU8sU0FBUSxXQUFVLFNBQVNnQyxhQUFhLFVBQVVsQyxXQUFXLHNCQUFyRTtBQUFBO0FBQUE7QUFBQTtBQUFBLGFBRUE7QUFBQSxNQUNBLHVCQUFDLFVBQU8sU0FBU1csY0FBYyxVQUFVLENBQUNiLFFBQVFFLFdBQy9DQSxzQkFDQyxtQ0FDRTtBQUFBLCtCQUFDLFdBQVEsV0FBVSwrQkFBbkI7QUFBQTtBQUFBO0FBQUE7QUFBQSxlQUE4QztBQUFBLFFBQUc7QUFBQSxXQURuRDtBQUFBO0FBQUE7QUFBQTtBQUFBLGFBR0EsSUFFQSxtQ0FDRTtBQUFBLCtCQUFDLFVBQU8sV0FBVSxrQkFBbEI7QUFBQTtBQUFBO0FBQUE7QUFBQSxlQUFnQztBQUFBLFFBQUc7QUFBQSxXQURyQztBQUFBO0FBQUE7QUFBQTtBQUFBLGFBR0EsS0FWSjtBQUFBO0FBQUE7QUFBQTtBQUFBLGFBWUE7QUFBQSxTQWhCRjtBQUFBO0FBQUE7QUFBQTtBQUFBLFdBaUJBO0FBQUEsT0F6RUY7QUFBQTtBQUFBO0FBQUE7QUFBQSxTQTBFQSxLQTNFRjtBQUFBO0FBQUE7QUFBQTtBQUFBLFNBNEVBO0FBRUo7QUFBQ0gsR0FySmVKLGtCQUFnQjtBQUFBNEMsS0FBaEI1QztBQUFnQixJQUFBNEM7QUFBQUMsYUFBQUQsSUFBQSIsIm5hbWVzIjpbInVzZVN0YXRlIiwiRGlhbG9nIiwiRGlhbG9nQ29udGVudCIsIkRpYWxvZ0Rlc2NyaXB0aW9uIiwiRGlhbG9nRm9vdGVyIiwiRGlhbG9nSGVhZGVyIiwiRGlhbG9nVGl0bGUiLCJCdXR0b24iLCJJbnB1dCIsIkxvYWRlcjIiLCJVcGxvYWQiLCJGaWxlU3ByZWFkc2hlZXQiLCJzdXBhYmFzZSIsIkV4Y2VsVXBsb2FkTW9kYWwiLCJvcGVuIiwib25PcGVuQ2hhbmdlIiwib25VcGxvYWRTdWNjZXNzIiwiX3MiLCJmaWxlIiwic2V0RmlsZSIsInVwbG9hZGluZyIsInNldFVwbG9hZGluZyIsImVycm9yIiwic2V0RXJyb3IiLCJoYW5kbGVGaWxlQ2hhbmdlIiwiZSIsInNlbGVjdGVkRmlsZSIsInRhcmdldCIsImZpbGVzIiwibmFtZSIsImVuZHNXaXRoIiwiaGFuZGxlVXBsb2FkIiwic2Vzc2lvbiIsImF1dGgiLCJnZXRTZXNzaW9uIiwidG9rZW4iLCJkYXRhIiwiYWNjZXNzX3Rva2VuIiwiRXJyb3IiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwiYm9keSIsInJlc3VsdCIsImpzb24iLCJvayIsInN1Y2Nlc3MiLCJlcnIiLCJtZXNzYWdlIiwiaGFuZGxlQ2xvc2UiLCJzaXplIiwidG9GaXhlZCIsIl9jIiwiJFJlZnJlc2hSZWckIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VzIjpbIkV4Y2VsVXBsb2FkTW9kYWwudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7XHJcbiAgRGlhbG9nLFxyXG4gIERpYWxvZ0NvbnRlbnQsXHJcbiAgRGlhbG9nRGVzY3JpcHRpb24sXHJcbiAgRGlhbG9nRm9vdGVyLFxyXG4gIERpYWxvZ0hlYWRlcixcclxuICBEaWFsb2dUaXRsZSxcclxufSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2RpYWxvZ1wiO1xyXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2J1dHRvblwiO1xyXG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvaW5wdXRcIjtcclxuaW1wb3J0IHsgTG9hZGVyMiwgVXBsb2FkLCBGaWxlU3ByZWFkc2hlZXQgfSBmcm9tIFwibHVjaWRlLXJlYWN0XCI7XHJcbmltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSBcIkAvbGliL3N1cGFiYXNlL2NsaWVudFwiO1xyXG5cclxudHlwZSBFeGNlbFVwbG9hZE1vZGFsUHJvcHMgPSB7XHJcbiAgb3BlbjogYm9vbGVhbjtcclxuICBvbk9wZW5DaGFuZ2U6IChvcGVuOiBib29sZWFuKSA9PiB2b2lkO1xyXG4gIG9uVXBsb2FkU3VjY2VzczogKCkgPT4gdm9pZDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBFeGNlbFVwbG9hZE1vZGFsKHsgb3Blbiwgb25PcGVuQ2hhbmdlLCBvblVwbG9hZFN1Y2Nlc3MgfTogRXhjZWxVcGxvYWRNb2RhbFByb3BzKSB7XHJcbiAgY29uc3QgW2ZpbGUsIHNldEZpbGVdID0gdXNlU3RhdGU8RmlsZSB8IG51bGw+KG51bGwpO1xyXG4gIGNvbnN0IFt1cGxvYWRpbmcsIHNldFVwbG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcclxuXHJcbiAgY29uc3QgaGFuZGxlRmlsZUNoYW5nZSA9IChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xyXG4gICAgY29uc3Qgc2VsZWN0ZWRGaWxlID0gZS50YXJnZXQuZmlsZXM/LlswXTtcclxuICAgIGlmIChzZWxlY3RlZEZpbGUpIHtcclxuICAgICAgLy8gVmFsaWRhdGUgZmlsZSB0eXBlXHJcbiAgICAgIGlmICghc2VsZWN0ZWRGaWxlLm5hbWUuZW5kc1dpdGgoXCIueGxzeFwiKSAmJiAhc2VsZWN0ZWRGaWxlLm5hbWUuZW5kc1dpdGgoXCIueGxzXCIpKSB7XHJcbiAgICAgICAgc2V0RXJyb3IoXCJQbGVhc2Ugc2VsZWN0IGEgdmFsaWQgRXhjZWwgZmlsZSAoLnhsc3ggb3IgLnhscylcIik7XHJcbiAgICAgICAgc2V0RmlsZShudWxsKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgc2V0RmlsZShzZWxlY3RlZEZpbGUpO1xyXG4gICAgICBzZXRFcnJvcihudWxsKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVVcGxvYWQgPSBhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIWZpbGUpIHJldHVybjtcclxuXHJcbiAgICBzZXRVcGxvYWRpbmcodHJ1ZSk7XHJcbiAgICBzZXRFcnJvcihudWxsKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBHZXQgYXV0aCB0b2tlblxyXG4gICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRTZXNzaW9uKCk7XHJcbiAgICAgIGNvbnN0IHRva2VuID0gc2Vzc2lvbi5kYXRhLnNlc3Npb24/LmFjY2Vzc190b2tlbjtcclxuXHJcbiAgICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2UgbG9nIGluIHRvIGltcG9ydCB0aGUgZ2FtZXBsYW5cIik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgIGZvcm1EYXRhLmFwcGVuZChcImZpbGVcIiwgZmlsZSk7XHJcblxyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiL2FwaS9ib2xsYXJkcy9pbXBvcnQtZ2FtZXBsYW5cIiwge1xyXG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VufWAsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBib2R5OiBmb3JtRGF0YSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcblxyXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rIHx8ICFyZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihyZXN1bHQuZXJyb3IgfHwgXCJGYWlsZWQgdG8gdXBsb2FkIEV4Y2VsIGZpbGVcIik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFN1Y2Nlc3NcclxuICAgICAgb25VcGxvYWRTdWNjZXNzKCk7XHJcbiAgICAgIG9uT3BlbkNoYW5nZShmYWxzZSk7XHJcbiAgICAgIHNldEZpbGUobnVsbCk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgc2V0RXJyb3IoZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvciBvY2N1cnJlZFwiKTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIHNldFVwbG9hZGluZyhmYWxzZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlQ2xvc2UgPSAoKSA9PiB7XHJcbiAgICBpZiAoIXVwbG9hZGluZykge1xyXG4gICAgICBvbk9wZW5DaGFuZ2UoZmFsc2UpO1xyXG4gICAgICBzZXRGaWxlKG51bGwpO1xyXG4gICAgICBzZXRFcnJvcihudWxsKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPERpYWxvZyBvcGVuPXtvcGVufSBvbk9wZW5DaGFuZ2U9e2hhbmRsZUNsb3NlfT5cclxuICAgICAgPERpYWxvZ0NvbnRlbnQ+XHJcbiAgICAgICAgPERpYWxvZ0hlYWRlcj5cclxuICAgICAgICAgIDxEaWFsb2dUaXRsZT5JbXBvcnQgMTAwIERheSBHYW1lcGxhbjwvRGlhbG9nVGl0bGU+XHJcbiAgICAgICAgICA8RGlhbG9nRGVzY3JpcHRpb24+XHJcbiAgICAgICAgICAgIFVwbG9hZCB0aGUgRXhjZWwgZmlsZSBjb250YWluaW5nIHlvdXIgMTAwLWRheSBib2xsYXJkIGdhbWVwbGFuLiBBbGwgdGFicyBhbmQgdGFza3Mgd2lsbCBiZVxyXG4gICAgICAgICAgICBpbXBvcnRlZCBhbmQgc3RydWN0dXJlZCBmb3IgdHJhY2tpbmcuXHJcbiAgICAgICAgICA8L0RpYWxvZ0Rlc2NyaXB0aW9uPlxyXG4gICAgICAgIDwvRGlhbG9nSGVhZGVyPlxyXG5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNFwiPlxyXG4gICAgICAgICAgey8qIEZpbGUgSW5wdXQgKi99XHJcbiAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cImV4Y2VsLWZpbGVcIiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIG1iLTIgYmxvY2tcIj5cclxuICAgICAgICAgICAgICBTZWxlY3QgRXhjZWwgRmlsZVxyXG4gICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlXCI+XHJcbiAgICAgICAgICAgICAgPElucHV0XHJcbiAgICAgICAgICAgICAgICBpZD1cImV4Y2VsLWZpbGVcIlxyXG4gICAgICAgICAgICAgICAgdHlwZT1cImZpbGVcIlxyXG4gICAgICAgICAgICAgICAgYWNjZXB0PVwiLnhsc3gsLnhsc1wiXHJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlRmlsZUNoYW5nZX1cclxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXt1cGxvYWRpbmd9XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjdXJzb3ItcG9pbnRlclwiXHJcbiAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICB7LyogRmlsZSBQcmV2aWV3ICovfVxyXG4gICAgICAgICAge2ZpbGUgJiYgKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0zIHAtMyBiZy1tdXRlZCByb3VuZGVkLW1kXCI+XHJcbiAgICAgICAgICAgICAgPEZpbGVTcHJlYWRzaGVldCBjbGFzc05hbWU9XCJoLTggdy04IHRleHQtc3VjY2Vzc1wiIC8+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgbWluLXctMFwiPlxyXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0cnVuY2F0ZVwiPntmaWxlLm5hbWV9PC9wPlxyXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LW11dGVkLWZvcmVncm91bmRcIj5cclxuICAgICAgICAgICAgICAgICAgeyhmaWxlLnNpemUgLyAxMDI0KS50b0ZpeGVkKDEpfSBLQlxyXG4gICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICl9XHJcblxyXG4gICAgICAgICAgey8qIEVycm9yIE1lc3NhZ2UgKi99XHJcbiAgICAgICAgICB7ZXJyb3IgJiYgKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtMyBiZy1kYW5nZXIvMTAgYm9yZGVyIGJvcmRlci1kYW5nZXIvMjAgcm91bmRlZC1tZFwiPlxyXG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1kYW5nZXJcIj57ZXJyb3J9PC9wPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICl9XHJcblxyXG4gICAgICAgICAgey8qIEluZm8gTWVzc2FnZSAqL31cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0zIGJnLXByaW1hcnkvMTAgYm9yZGVyIGJvcmRlci1wcmltYXJ5LzIwIHJvdW5kZWQtbWRcIj5cclxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LW11dGVkLWZvcmVncm91bmRcIj5cclxuICAgICAgICAgICAgICBUaGUgaW1wb3J0IHdpbGwgcHJlc2VydmUgYWxsIHRhYnMsIHRhc2sgaGllcmFyY2hpZXMsIGR1ZSBkYXRlcywgYW5kIG93bmVyc2hpcCBhc3NpZ25tZW50c1xyXG4gICAgICAgICAgICAgIGZyb20geW91ciBFeGNlbCBmaWxlLlxyXG4gICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgPERpYWxvZ0Zvb3Rlcj5cclxuICAgICAgICAgIDxCdXR0b24gdmFyaWFudD1cIm91dGxpbmVcIiBvbkNsaWNrPXtoYW5kbGVDbG9zZX0gZGlzYWJsZWQ9e3VwbG9hZGluZ30+XHJcbiAgICAgICAgICAgIENhbmNlbFxyXG4gICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e2hhbmRsZVVwbG9hZH0gZGlzYWJsZWQ9eyFmaWxlIHx8IHVwbG9hZGluZ30+XHJcbiAgICAgICAgICAgIHt1cGxvYWRpbmcgPyAoXHJcbiAgICAgICAgICAgICAgPD5cclxuICAgICAgICAgICAgICAgIDxMb2FkZXIyIGNsYXNzTmFtZT1cImgtNCB3LTQgbXItMiBhbmltYXRlLXNwaW5cIiAvPlxyXG4gICAgICAgICAgICAgICAgSW1wb3J0aW5nLi4uXHJcbiAgICAgICAgICAgICAgPC8+XHJcbiAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgPD5cclxuICAgICAgICAgICAgICAgIDxVcGxvYWQgY2xhc3NOYW1lPVwiaC00IHctNCBtci0yXCIgLz5cclxuICAgICAgICAgICAgICAgIEltcG9ydCBHYW1lcGxhblxyXG4gICAgICAgICAgICAgIDwvPlxyXG4gICAgICAgICAgICApfVxyXG4gICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgPC9EaWFsb2dGb290ZXI+XHJcbiAgICAgIDwvRGlhbG9nQ29udGVudD5cclxuICAgIDwvRGlhbG9nPlxyXG4gICk7XHJcbn1cclxuIl0sImZpbGUiOiJDOi9Qcm9qZWN0cy9Tb3VyY2UgNCBJbmR1c3RyaWVzL3NyYy9jb21wb25lbnRzL2JvbGxhcmRzL2dhbWVwbGFuL0V4Y2VsVXBsb2FkTW9kYWwudHN4In0=