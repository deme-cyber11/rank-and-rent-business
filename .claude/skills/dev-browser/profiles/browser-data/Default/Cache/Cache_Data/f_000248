import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/components/layout/sidebar.tsx");import __vite__cjsImport0_react_jsxDevRuntime from "/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=dadb5dea"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
import * as RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
let prevRefreshReg;
let prevRefreshSig;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  prevRefreshReg = window.$RefreshReg$;
  prevRefreshSig = window.$RefreshSig$;
  window.$RefreshReg$ = RefreshRuntime.getRefreshReg("C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx");
  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;
}
"use client";
var _s = $RefreshSig$();
import { Link, useLocation } from "/node_modules/.vite/deps/react-router-dom.js?v=dadb5dea";
import { ChevronRight, Sun, Moon } from "/node_modules/.vite/deps/lucide-react.js?v=dadb5dea";
import __vite__cjsImport5_react from "/node_modules/.vite/deps/react.js?v=dadb5dea"; const useEffect = __vite__cjsImport5_react["useEffect"]; const useMemo = __vite__cjsImport5_react["useMemo"]; const useState = __vite__cjsImport5_react["useState"];
import { getRoleLabel } from "/src/lib/auth/roles.ts";
import { getNavSectionsForRole } from "/src/lib/navigation.ts?t=1768426849742";
import { useTheme } from "/src/components/providers/theme-provider.tsx";
import { cn } from "/src/lib/utils.ts";
const COLLAPSED_BY_DEFAULT = ["Data", "Admin"];
function CollapsibleSection({
  section,
  isExpanded,
  onToggle,
  pathname,
  isFirstSection
}) {
  const SectionIcon = section.icon;
  const hasActiveItem = section.items.some((item) => pathname.startsWith(item.href));
  return /* @__PURE__ */ jsxDEV("li", { children: [
    /* @__PURE__ */ jsxDEV(
      "button",
      {
        onClick: onToggle,
        className: cn(
          "w-full flex items-center gap-2 px-3 py-2.5 text-sm font-medium rounded-lg transition-all duration-200",
          "hover:bg-muted/50 group",
          hasActiveItem && "bg-primary/5 text-primary",
          !isFirstSection && "mt-2"
        ),
        children: [
          SectionIcon && /* @__PURE__ */ jsxDEV(
            SectionIcon,
            {
              className: cn(
                "h-4 w-4 transition-colors",
                hasActiveItem ? "text-primary" : "text-muted-foreground group-hover:text-foreground"
              )
            },
            void 0,
            false,
            {
              fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
              lineNumber: 71,
              columnNumber: 9
            },
            this
          ),
          /* @__PURE__ */ jsxDEV(
            "span",
            {
              className: cn(
                "flex-1 text-left transition-colors",
                hasActiveItem ? "text-primary" : "text-foreground/80 group-hover:text-foreground"
              ),
              children: section.title
            },
            void 0,
            false,
            {
              fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
              lineNumber: 80,
              columnNumber: 9
            },
            this
          ),
          /* @__PURE__ */ jsxDEV(
            ChevronRight,
            {
              className: cn(
                "h-4 w-4 text-muted-foreground transition-transform duration-200",
                isExpanded && "rotate-90"
              )
            },
            void 0,
            false,
            {
              fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
              lineNumber: 90,
              columnNumber: 9
            },
            this
          )
        ]
      },
      void 0,
      true,
      {
        fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
        lineNumber: 61,
        columnNumber: 7
      },
      this
    ),
    /* @__PURE__ */ jsxDEV(
      "ul",
      {
        className: cn(
          "overflow-hidden transition-all duration-200 ease-out",
          isExpanded ? "max-h-[500px] opacity-100 mt-1" : "max-h-0 opacity-0"
        ),
        children: section.items.filter((item) => item.status !== "future").map(
          (item) => /* @__PURE__ */ jsxDEV(
            CollapsibleItem,
            {
              item,
              isActive: pathname.startsWith(item.href)
            },
            item.href,
            false,
            {
              fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
              lineNumber: 108,
              columnNumber: 9
            },
            this
          )
        )
      },
      void 0,
      false,
      {
        fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
        lineNumber: 99,
        columnNumber: 7
      },
      this
    )
  ] }, void 0, true, {
    fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
    lineNumber: 59,
    columnNumber: 5
  }, this);
}
_c = CollapsibleSection;
function CollapsibleItem({ item, isActive }) {
  const ItemIcon = item.icon;
  return /* @__PURE__ */ jsxDEV("li", { children: /* @__PURE__ */ jsxDEV(
    Link,
    {
      to: item.href,
      className: cn(
        "group flex items-center gap-3 rounded-lg px-3 py-2 ml-6 text-sm font-medium transition-all duration-200",
        isActive ? "bg-primary/10 text-primary shadow-sm" : "text-foreground/70 hover:bg-muted/50 hover:text-foreground"
      ),
      children: [
        ItemIcon && /* @__PURE__ */ jsxDEV(
          ItemIcon,
          {
            className: cn(
              "h-4 w-4 transition-colors shrink-0",
              isActive ? "text-primary" : "text-muted-foreground group-hover:text-foreground"
            )
          },
          void 0,
          false,
          {
            fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
            lineNumber: 139,
            columnNumber: 9
          },
          this
        ),
        /* @__PURE__ */ jsxDEV("span", { className: "flex-1 truncate", children: item.title }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
          lineNumber: 148,
          columnNumber: 9
        }, this),
        item.badge && /* @__PURE__ */ jsxDEV(
          "span",
          {
            className: cn(
              "px-2 py-0.5 text-xs font-medium rounded-full shrink-0",
              item.badge === "New" && "bg-green-500/10 text-green-500",
              item.badge === "Demo" && "bg-blue-500/10 text-blue-500",
              item.badge === "Broken" && "bg-red-500/10 text-red-500",
              !["New", "Demo", "Broken"].includes(item.badge) && "bg-primary/10 text-primary"
            ),
            children: item.badge
          },
          void 0,
          false,
          {
            fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
            lineNumber: 150,
            columnNumber: 9
          },
          this
        ),
        item.status === "beta" && /* @__PURE__ */ jsxDEV("span", { className: "px-2 py-0.5 text-xs font-medium rounded-full bg-amber-500/10 text-amber-500 shrink-0", children: "Beta" }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
          lineNumber: 164,
          columnNumber: 9
        }, this)
      ]
    },
    void 0,
    true,
    {
      fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
      lineNumber: 129,
      columnNumber: 7
    },
    this
  ) }, void 0, false, {
    fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
    lineNumber: 128,
    columnNumber: 5
  }, this);
}
_c2 = CollapsibleItem;
export function Sidebar({ role, userEmail }) {
  _s();
  const { theme, toggleTheme } = useTheme();
  const pathname = useLocation().pathname;
  const sections = useMemo(() => getNavSectionsForRole(role), [role]);
  const defaultExpanded = useMemo(
    () => sections.map((section) => section.title).filter((title) => !COLLAPSED_BY_DEFAULT.includes(title)),
    [sections]
  );
  const [expandedSections, setExpandedSections] = useState(defaultExpanded);
  useEffect(() => {
    setExpandedSections(defaultExpanded);
  }, [defaultExpanded]);
  useEffect(() => {
    const activeSection = sections.find(
      (section) => section.items.some((item) => pathname.startsWith(item.href))
    );
    if (activeSection && !expandedSections.includes(activeSection.title)) {
      setExpandedSections((prev) => [...prev, activeSection.title]);
    }
  }, [pathname, sections, expandedSections]);
  const toggleSection = (sectionTitle) => {
    setExpandedSections(
      (prev) => prev.includes(sectionTitle) ? prev.filter((title) => title !== sectionTitle) : [...prev, sectionTitle]
    );
  };
  return /* @__PURE__ */ jsxDEV(
    "aside",
    {
      className: cn(
        "hidden shrink-0 border-r border-border/60 bg-gradient-to-b from-card/95 to-card/90 backdrop-blur-xl lg:flex lg:flex-col transition-all duration-300 sticky top-0 h-screen",
        "w-72"
      ),
      children: [
        /* @__PURE__ */ jsxDEV("div", { className: "flex h-16 items-center border-b border-border/60 bg-card/50 backdrop-blur-md px-4 shrink-0", children: /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-3", children: [
          /* @__PURE__ */ jsxDEV("div", { className: "relative h-10 w-10 overflow-hidden rounded-xl bg-white shadow-lg", children: /* @__PURE__ */ jsxDEV(
            "img",
            {
              src: "/favicon.png",
              alt: "S4 Logo",
              className: "h-10 w-10 object-contain"
            },
            void 0,
            false,
            {
              fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
              lineNumber: 224,
              columnNumber: 13
            },
            this
          ) }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
            lineNumber: 223,
            columnNumber: 11
          }, this),
          /* @__PURE__ */ jsxDEV("div", { className: "flex flex-col", children: /* @__PURE__ */ jsxDEV("span", { className: "text-sm font-bold bg-gradient-to-r from-foreground to-foreground/80 bg-clip-text text-transparent", children: "Performance Dashboard" }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
            lineNumber: 231,
            columnNumber: 13
          }, this) }, void 0, false, {
            fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
            lineNumber: 230,
            columnNumber: 11
          }, this)
        ] }, void 0, true, {
          fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
          lineNumber: 222,
          columnNumber: 9
        }, this) }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
          lineNumber: 221,
          columnNumber: 7
        }, this),
        /* @__PURE__ */ jsxDEV("nav", { className: "flex-1 overflow-y-auto px-3 py-4 scrollbar-hide", children: /* @__PURE__ */ jsxDEV("ul", { className: "flex flex-col gap-1", children: sections.map(
          (section, index) => /* @__PURE__ */ jsxDEV(
            CollapsibleSection,
            {
              section,
              isExpanded: expandedSections.includes(section.title),
              onToggle: () => toggleSection(section.title),
              pathname,
              isFirstSection: index === 0
            },
            section.title,
            false,
            {
              fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
              lineNumber: 242,
              columnNumber: 11
            },
            this
          )
        ) }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
          lineNumber: 240,
          columnNumber: 9
        }, this) }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
          lineNumber: 239,
          columnNumber: 7
        }, this),
        /* @__PURE__ */ jsxDEV("div", { className: "border-t border-border/60 p-3 shrink-0", children: /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-3 px-2 py-2 rounded-lg bg-muted/30", children: [
          /* @__PURE__ */ jsxDEV(
            "button",
            {
              onClick: toggleTheme,
              className: "flex h-8 w-8 items-center justify-center rounded-full bg-primary/10 text-primary hover:bg-primary/20 transition-colors",
              title: theme === "dark" ? "Switch to Light Mode" : "Switch to Dark Mode",
              children: theme === "dark" ? /* @__PURE__ */ jsxDEV(Sun, { className: "h-4 w-4" }, void 0, false, {
                fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
                lineNumber: 263,
                columnNumber: 13
              }, this) : /* @__PURE__ */ jsxDEV(Moon, { className: "h-4 w-4" }, void 0, false, {
                fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
                lineNumber: 265,
                columnNumber: 13
              }, this)
            },
            void 0,
            false,
            {
              fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
              lineNumber: 257,
              columnNumber: 11
            },
            this
          ),
          /* @__PURE__ */ jsxDEV("div", { className: "flex-1 min-w-0", children: [
            /* @__PURE__ */ jsxDEV("p", { className: "text-xs font-medium text-foreground truncate", children: userEmail }, void 0, false, {
              fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
              lineNumber: 269,
              columnNumber: 13
            }, this),
            /* @__PURE__ */ jsxDEV("p", { className: "text-xs text-muted-foreground", children: getRoleLabel(role) }, void 0, false, {
              fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
              lineNumber: 272,
              columnNumber: 13
            }, this)
          ] }, void 0, true, {
            fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
            lineNumber: 268,
            columnNumber: 11
          }, this)
        ] }, void 0, true, {
          fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
          lineNumber: 256,
          columnNumber: 9
        }, this) }, void 0, false, {
          fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
          lineNumber: 255,
          columnNumber: 7
        }, this)
      ]
    },
    void 0,
    true,
    {
      fileName: "C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx",
      lineNumber: 214,
      columnNumber: 5
    },
    this
  );
}
_s(Sidebar, "XkjcZh9MtdIGLvb36wyeQ4AaxCE=", false, function() {
  return [useTheme, useLocation];
});
_c3 = Sidebar;
var _c, _c2, _c3;
$RefreshReg$(_c, "CollapsibleSection");
$RefreshReg$(_c2, "CollapsibleItem");
$RefreshReg$(_c3, "Sidebar");
if (import.meta.hot && !inWebWorker) {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}
if (import.meta.hot && !inWebWorker) {
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("C:/Projects/Source 4 Industries/src/components/layout/sidebar.tsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJtYXBwaW5ncyI6IkFBbURVOzs7Ozs7Ozs7Ozs7Ozs7O0FBbkRWO0FBQWEsSUFBQUEsS0FBQUMsYUFBQTtBQUViLFNBQVNDLE1BQU1DLG1CQUFtQjtBQUNsQyxTQUFTQyxjQUFjQyxLQUFLQyxZQUFZO0FBQ3hDLFNBQVNDLFdBQVdDLFNBQVNDLGdCQUFnQjtBQUc3QyxTQUFTQyxvQkFBb0I7QUFDN0IsU0FBU0MsNkJBQWtEO0FBQzNELFNBQVNDLGdCQUFnQjtBQUN6QixTQUFTQyxVQUFVO0FBUW5CLE1BQU1DLHVCQUF1QixDQUFDLFFBQVEsT0FBTztBQVU3QyxTQUFTQyxtQkFBbUI7QUFBQSxFQUMxQkM7QUFBQUEsRUFDQUM7QUFBQUEsRUFDQUM7QUFBQUEsRUFDQUM7QUFBQUEsRUFDQUM7QUFDdUIsR0FBRztBQUMxQixRQUFNQyxjQUFjTCxRQUFRTTtBQUM1QixRQUFNQyxnQkFBZ0JQLFFBQVFRLE1BQU1DLEtBQUssQ0FBQ0MsU0FBU1AsU0FBU1EsV0FBV0QsS0FBS0UsSUFBSSxDQUFDO0FBRWpGLFNBQ0UsdUJBQUMsUUFFQztBQUFBO0FBQUEsTUFBQztBQUFBO0FBQUEsUUFDQyxTQUFTVjtBQUFBQSxRQUNULFdBQVdMO0FBQUFBLFVBQ1Q7QUFBQSxVQUNBO0FBQUEsVUFDQVUsaUJBQWlCO0FBQUEsVUFDakIsQ0FBQ0gsa0JBQWtCO0FBQUEsUUFDckI7QUFBQSxRQUVDQztBQUFBQSx5QkFDQztBQUFBLFlBQUM7QUFBQTtBQUFBLGNBQ0MsV0FBV1I7QUFBQUEsZ0JBQ1Q7QUFBQSxnQkFDQVUsZ0JBQ0ksaUJBQ0E7QUFBQSxjQUNOO0FBQUE7QUFBQSxZQU5GO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxVQU1JO0FBQUEsVUFHTjtBQUFBLFlBQUM7QUFBQTtBQUFBLGNBQ0MsV0FBV1Y7QUFBQUEsZ0JBQ1Q7QUFBQSxnQkFDQVUsZ0JBQ0ksaUJBQ0E7QUFBQSxjQUNOO0FBQUEsY0FFQ1Asa0JBQVFhO0FBQUFBO0FBQUFBLFlBUlg7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFVBU0E7QUFBQSxVQUNBO0FBQUEsWUFBQztBQUFBO0FBQUEsY0FDQyxXQUFXaEI7QUFBQUEsZ0JBQ1Q7QUFBQSxnQkFDQUksY0FBYztBQUFBLGNBQ2hCO0FBQUE7QUFBQSxZQUpGO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxVQUlJO0FBQUE7QUFBQTtBQUFBLE1BakNOO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQW1DQTtBQUFBLElBR0E7QUFBQSxNQUFDO0FBQUE7QUFBQSxRQUNDLFdBQVdKO0FBQUFBLFVBQ1Q7QUFBQSxVQUNBSSxhQUFhLG1DQUFtQztBQUFBLFFBQ2xEO0FBQUEsUUFFQ0Qsa0JBQVFRLE1BQ05NLE9BQU8sQ0FBQ0osU0FBU0EsS0FBS0ssV0FBVyxRQUFRLEVBQ3pDQztBQUFBQSxVQUFJLENBQUNOLFNBQ0o7QUFBQSxZQUFDO0FBQUE7QUFBQSxjQUVDO0FBQUEsY0FDQSxVQUFVUCxTQUFTUSxXQUFXRCxLQUFLRSxJQUFJO0FBQUE7QUFBQSxZQUZsQ0YsS0FBS0U7QUFBQUEsWUFEWjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFVBRzJDO0FBQUEsUUFFNUM7QUFBQTtBQUFBLE1BZEw7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBZUE7QUFBQSxPQXZERjtBQUFBO0FBQUE7QUFBQTtBQUFBLFNBd0RBO0FBRUo7QUFBQ0ssS0FyRVFsQjtBQTRFVCxTQUFTbUIsZ0JBQWdCLEVBQUVSLE1BQU1TLFNBQStCLEdBQUc7QUFDakUsUUFBTUMsV0FBV1YsS0FBS0o7QUFFdEIsU0FDRSx1QkFBQyxRQUNDO0FBQUEsSUFBQztBQUFBO0FBQUEsTUFDQyxJQUFJSSxLQUFLRTtBQUFBQSxNQUNULFdBQVdmO0FBQUFBLFFBQ1Q7QUFBQSxRQUNBc0IsV0FDSSx5Q0FDQTtBQUFBLE1BQ047QUFBQSxNQUVDQztBQUFBQSxvQkFDQztBQUFBLFVBQUM7QUFBQTtBQUFBLFlBQ0MsV0FBV3ZCO0FBQUFBLGNBQ1Q7QUFBQSxjQUNBc0IsV0FDSSxpQkFDQTtBQUFBLFlBQ047QUFBQTtBQUFBLFVBTkY7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFFBTUk7QUFBQSxRQUdOLHVCQUFDLFVBQUssV0FBVSxtQkFBbUJULGVBQUtHLFNBQXhDO0FBQUE7QUFBQTtBQUFBO0FBQUEsZUFBOEM7QUFBQSxRQUM3Q0gsS0FBS1csU0FDSjtBQUFBLFVBQUM7QUFBQTtBQUFBLFlBQ0MsV0FBV3hCO0FBQUFBLGNBQ1Q7QUFBQSxjQUNBYSxLQUFLVyxVQUFVLFNBQVM7QUFBQSxjQUN4QlgsS0FBS1csVUFBVSxVQUFVO0FBQUEsY0FDekJYLEtBQUtXLFVBQVUsWUFBWTtBQUFBLGNBQzNCLENBQUMsQ0FBQyxPQUFPLFFBQVEsUUFBUSxFQUFFQyxTQUFTWixLQUFLVyxLQUFLLEtBQzVDO0FBQUEsWUFDSjtBQUFBLFlBRUNYLGVBQUtXO0FBQUFBO0FBQUFBLFVBVlI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFFBV0E7QUFBQSxRQUVEWCxLQUFLSyxXQUFXLFVBQ2YsdUJBQUMsVUFBSyxXQUFVLHdGQUF1RixvQkFBdkc7QUFBQTtBQUFBO0FBQUE7QUFBQSxlQUVBO0FBQUE7QUFBQTtBQUFBLElBckNKO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQXVDQSxLQXhDRjtBQUFBO0FBQUE7QUFBQTtBQUFBLFNBeUNBO0FBRUo7QUFBQ1EsTUEvQ1FMO0FBaURGLGdCQUFTTSxRQUFRLEVBQUVDLE1BQU1DLFVBQXdCLEdBQUc7QUFBQTFDLEtBQUE7QUFDekQsUUFBTSxFQUFFMkMsT0FBT0MsWUFBWSxJQUFJaEMsU0FBUztBQUN4QyxRQUFNTyxXQUFXaEIsWUFBWSxFQUFFZ0I7QUFDL0IsUUFBTTBCLFdBQVdyQyxRQUFRLE1BQU1HLHNCQUFzQjhCLElBQUksR0FBRyxDQUFDQSxJQUFJLENBQUM7QUFHbEUsUUFBTUssa0JBQWtCdEM7QUFBQUEsSUFDdEIsTUFDRXFDLFNBQ0diLElBQUksQ0FBQ2hCLFlBQVlBLFFBQVFhLEtBQUssRUFDOUJDLE9BQU8sQ0FBQ0QsVUFBVSxDQUFDZixxQkFBcUJ3QixTQUFTVCxLQUFLLENBQUM7QUFBQSxJQUM1RCxDQUFDZ0IsUUFBUTtBQUFBLEVBQ1g7QUFHQSxRQUFNLENBQUNFLGtCQUFrQkMsbUJBQW1CLElBQUl2QyxTQUFtQnFDLGVBQWU7QUFHbEZ2QyxZQUFVLE1BQU07QUFDZHlDLHdCQUFvQkYsZUFBZTtBQUFBLEVBQ3JDLEdBQUcsQ0FBQ0EsZUFBZSxDQUFDO0FBR3BCdkMsWUFBVSxNQUFNO0FBQ2QsVUFBTTBDLGdCQUFnQkosU0FBU0s7QUFBQUEsTUFBSyxDQUFDbEMsWUFDbkNBLFFBQVFRLE1BQU1DLEtBQUssQ0FBQ0MsU0FBU1AsU0FBU1EsV0FBV0QsS0FBS0UsSUFBSSxDQUFDO0FBQUEsSUFDN0Q7QUFDQSxRQUFJcUIsaUJBQWlCLENBQUNGLGlCQUFpQlQsU0FBU1csY0FBY3BCLEtBQUssR0FBRztBQUNwRW1CLDBCQUFvQixDQUFDRyxTQUFTLENBQUMsR0FBR0EsTUFBTUYsY0FBY3BCLEtBQUssQ0FBQztBQUFBLElBQzlEO0FBQUEsRUFDRixHQUFHLENBQUNWLFVBQVUwQixVQUFVRSxnQkFBZ0IsQ0FBQztBQUV6QyxRQUFNSyxnQkFBZ0JBLENBQUNDLGlCQUF5QjtBQUM5Q0w7QUFBQUEsTUFBb0IsQ0FBQ0csU0FDbkJBLEtBQUtiLFNBQVNlLFlBQVksSUFDdEJGLEtBQUtyQixPQUFPLENBQUNELFVBQVVBLFVBQVV3QixZQUFZLElBQzdDLENBQUMsR0FBR0YsTUFBTUUsWUFBWTtBQUFBLElBQzVCO0FBQUEsRUFDRjtBQUVBLFNBQ0U7QUFBQSxJQUFDO0FBQUE7QUFBQSxNQUNDLFdBQVd4QztBQUFBQSxRQUNUO0FBQUEsUUFDQTtBQUFBLE1BQ0Y7QUFBQSxNQUdBO0FBQUEsK0JBQUMsU0FBSSxXQUFVLDhGQUNiLGlDQUFDLFNBQUksV0FBVSwyQkFDYjtBQUFBLGlDQUFDLFNBQUksV0FBVSxvRUFDYjtBQUFBLFlBQUM7QUFBQTtBQUFBLGNBQ0MsS0FBSTtBQUFBLGNBQ0osS0FBSTtBQUFBLGNBQ0osV0FBVTtBQUFBO0FBQUEsWUFIWjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFHc0MsS0FKeEM7QUFBQTtBQUFBO0FBQUE7QUFBQSxpQkFNQTtBQUFBLFVBQ0EsdUJBQUMsU0FBSSxXQUFVLGlCQUNiLGlDQUFDLFVBQUssV0FBVSxxR0FBb0cscUNBQXBIO0FBQUE7QUFBQTtBQUFBO0FBQUEsaUJBRUEsS0FIRjtBQUFBO0FBQUE7QUFBQTtBQUFBLGlCQUlBO0FBQUEsYUFaRjtBQUFBO0FBQUE7QUFBQTtBQUFBLGVBYUEsS0FkRjtBQUFBO0FBQUE7QUFBQTtBQUFBLGVBZUE7QUFBQSxRQUdBLHVCQUFDLFNBQUksV0FBVSxtREFDYixpQ0FBQyxRQUFHLFdBQVUsdUJBQ1hnQyxtQkFBU2I7QUFBQUEsVUFBSSxDQUFDaEIsU0FBU3NDLFVBQ3RCO0FBQUEsWUFBQztBQUFBO0FBQUEsY0FFQztBQUFBLGNBQ0EsWUFBWVAsaUJBQWlCVCxTQUFTdEIsUUFBUWEsS0FBSztBQUFBLGNBQ25ELFVBQVUsTUFBTXVCLGNBQWNwQyxRQUFRYSxLQUFLO0FBQUEsY0FDM0M7QUFBQSxjQUNBLGdCQUFnQnlCLFVBQVU7QUFBQTtBQUFBLFlBTHJCdEMsUUFBUWE7QUFBQUEsWUFEZjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFVBTThCO0FBQUEsUUFFL0IsS0FWSDtBQUFBO0FBQUE7QUFBQTtBQUFBLGVBV0EsS0FaRjtBQUFBO0FBQUE7QUFBQTtBQUFBLGVBYUE7QUFBQSxRQUdBLHVCQUFDLFNBQUksV0FBVSwwQ0FDYixpQ0FBQyxTQUFJLFdBQVUsNERBQ2I7QUFBQTtBQUFBLFlBQUM7QUFBQTtBQUFBLGNBQ0MsU0FBU2U7QUFBQUEsY0FDVCxXQUFVO0FBQUEsY0FDVixPQUFPRCxVQUFVLFNBQVMseUJBQXlCO0FBQUEsY0FFbERBLG9CQUFVLFNBQ1QsdUJBQUMsT0FBSSxXQUFVLGFBQWY7QUFBQTtBQUFBO0FBQUE7QUFBQSxxQkFBd0IsSUFFeEIsdUJBQUMsUUFBSyxXQUFVLGFBQWhCO0FBQUE7QUFBQTtBQUFBO0FBQUEscUJBQXlCO0FBQUE7QUFBQSxZQVI3QjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFVQTtBQUFBLFVBQ0EsdUJBQUMsU0FBSSxXQUFVLGtCQUNiO0FBQUEsbUNBQUMsT0FBRSxXQUFVLGdEQUNWRCx1QkFESDtBQUFBO0FBQUE7QUFBQTtBQUFBLG1CQUVBO0FBQUEsWUFDQSx1QkFBQyxPQUFFLFdBQVUsaUNBQWlDaEMsdUJBQWErQixJQUFJLEtBQS9EO0FBQUE7QUFBQTtBQUFBO0FBQUEsbUJBQWlFO0FBQUEsZUFKbkU7QUFBQTtBQUFBO0FBQUE7QUFBQSxpQkFLQTtBQUFBLGFBakJGO0FBQUE7QUFBQTtBQUFBO0FBQUEsZUFrQkEsS0FuQkY7QUFBQTtBQUFBO0FBQUE7QUFBQSxlQW9CQTtBQUFBO0FBQUE7QUFBQSxJQTdERjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUE4REE7QUFFSjtBQUFDekMsR0F6R2V3QyxTQUFPO0FBQUEsVUFDVTVCLFVBQ2RULFdBQVc7QUFBQTtBQUFBb0QsTUFGZGY7QUFBTyxJQUFBUCxJQUFBTSxLQUFBZ0I7QUFBQUMsYUFBQXZCLElBQUE7QUFBQXVCLGFBQUFqQixLQUFBO0FBQUFpQixhQUFBRCxLQUFBIiwibmFtZXMiOlsiX3MiLCIkUmVmcmVzaFNpZyQiLCJMaW5rIiwidXNlTG9jYXRpb24iLCJDaGV2cm9uUmlnaHQiLCJTdW4iLCJNb29uIiwidXNlRWZmZWN0IiwidXNlTWVtbyIsInVzZVN0YXRlIiwiZ2V0Um9sZUxhYmVsIiwiZ2V0TmF2U2VjdGlvbnNGb3JSb2xlIiwidXNlVGhlbWUiLCJjbiIsIkNPTExBUFNFRF9CWV9ERUZBVUxUIiwiQ29sbGFwc2libGVTZWN0aW9uIiwic2VjdGlvbiIsImlzRXhwYW5kZWQiLCJvblRvZ2dsZSIsInBhdGhuYW1lIiwiaXNGaXJzdFNlY3Rpb24iLCJTZWN0aW9uSWNvbiIsImljb24iLCJoYXNBY3RpdmVJdGVtIiwiaXRlbXMiLCJzb21lIiwiaXRlbSIsInN0YXJ0c1dpdGgiLCJocmVmIiwidGl0bGUiLCJmaWx0ZXIiLCJzdGF0dXMiLCJtYXAiLCJfYyIsIkNvbGxhcHNpYmxlSXRlbSIsImlzQWN0aXZlIiwiSXRlbUljb24iLCJiYWRnZSIsImluY2x1ZGVzIiwiX2MyIiwiU2lkZWJhciIsInJvbGUiLCJ1c2VyRW1haWwiLCJ0aGVtZSIsInRvZ2dsZVRoZW1lIiwic2VjdGlvbnMiLCJkZWZhdWx0RXhwYW5kZWQiLCJleHBhbmRlZFNlY3Rpb25zIiwic2V0RXhwYW5kZWRTZWN0aW9ucyIsImFjdGl2ZVNlY3Rpb24iLCJmaW5kIiwicHJldiIsInRvZ2dsZVNlY3Rpb24iLCJzZWN0aW9uVGl0bGUiLCJpbmRleCIsIl9jMyIsIiRSZWZyZXNoUmVnJCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJzaWRlYmFyLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcclxuXHJcbmltcG9ydCB7IExpbmssIHVzZUxvY2F0aW9uIH0gZnJvbSBcInJlYWN0LXJvdXRlci1kb21cIjtcclxuaW1wb3J0IHsgQ2hldnJvblJpZ2h0LCBTdW4sIE1vb24gfSBmcm9tIFwibHVjaWRlLXJlYWN0XCI7XHJcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcclxuXHJcbmltcG9ydCB0eXBlIHsgUm9sZSB9IGZyb20gXCJAL2xpYi9hdXRoL3JvbGVzXCI7XHJcbmltcG9ydCB7IGdldFJvbGVMYWJlbCB9IGZyb20gXCJAL2xpYi9hdXRoL3JvbGVzXCI7XHJcbmltcG9ydCB7IGdldE5hdlNlY3Rpb25zRm9yUm9sZSwgTmF2U2VjdGlvbiwgTmF2SXRlbSB9IGZyb20gXCJAL2xpYi9uYXZpZ2F0aW9uXCI7XHJcbmltcG9ydCB7IHVzZVRoZW1lIH0gZnJvbSBcIkAvY29tcG9uZW50cy9wcm92aWRlcnMvdGhlbWUtcHJvdmlkZXJcIjtcclxuaW1wb3J0IHsgY24gfSBmcm9tIFwiQC9saWIvdXRpbHNcIjtcclxuXHJcbnR5cGUgU2lkZWJhclByb3BzID0ge1xyXG4gIHJvbGU6IFJvbGU7XHJcbiAgdXNlckVtYWlsOiBzdHJpbmc7XHJcbn07XHJcblxyXG4vLyBTZWN0aW9ucyB0aGF0IHNob3VsZCBiZSBjb2xsYXBzZWQgYnkgZGVmYXVsdFxyXG5jb25zdCBDT0xMQVBTRURfQllfREVGQVVMVCA9IFtcIkRhdGFcIiwgXCJBZG1pblwiXTtcclxuXHJcbnR5cGUgQ29sbGFwc2libGVTZWN0aW9uUHJvcHMgPSB7XHJcbiAgc2VjdGlvbjogTmF2U2VjdGlvbjtcclxuICBpc0V4cGFuZGVkOiBib29sZWFuO1xyXG4gIG9uVG9nZ2xlOiAoKSA9PiB2b2lkO1xyXG4gIHBhdGhuYW1lOiBzdHJpbmc7XHJcbiAgaXNGaXJzdFNlY3Rpb246IGJvb2xlYW47XHJcbn07XHJcblxyXG5mdW5jdGlvbiBDb2xsYXBzaWJsZVNlY3Rpb24oe1xyXG4gIHNlY3Rpb24sXHJcbiAgaXNFeHBhbmRlZCxcclxuICBvblRvZ2dsZSxcclxuICBwYXRobmFtZSxcclxuICBpc0ZpcnN0U2VjdGlvbixcclxufTogQ29sbGFwc2libGVTZWN0aW9uUHJvcHMpIHtcclxuICBjb25zdCBTZWN0aW9uSWNvbiA9IHNlY3Rpb24uaWNvbjtcclxuICBjb25zdCBoYXNBY3RpdmVJdGVtID0gc2VjdGlvbi5pdGVtcy5zb21lKChpdGVtKSA9PiBwYXRobmFtZS5zdGFydHNXaXRoKGl0ZW0uaHJlZikpO1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGxpPlxyXG4gICAgICB7LyogU2VjdGlvbiBIZWFkZXIgKi99XHJcbiAgICAgIDxidXR0b25cclxuICAgICAgICBvbkNsaWNrPXtvblRvZ2dsZX1cclxuICAgICAgICBjbGFzc05hbWU9e2NuKFxyXG4gICAgICAgICAgXCJ3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgcHgtMyBweS0yLjUgdGV4dC1zbSBmb250LW1lZGl1bSByb3VuZGVkLWxnIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTIwMFwiLFxyXG4gICAgICAgICAgXCJob3ZlcjpiZy1tdXRlZC81MCBncm91cFwiLFxyXG4gICAgICAgICAgaGFzQWN0aXZlSXRlbSAmJiBcImJnLXByaW1hcnkvNSB0ZXh0LXByaW1hcnlcIixcclxuICAgICAgICAgICFpc0ZpcnN0U2VjdGlvbiAmJiBcIm10LTJcIlxyXG4gICAgICAgICl9XHJcbiAgICAgID5cclxuICAgICAgICB7U2VjdGlvbkljb24gJiYgKFxyXG4gICAgICAgICAgPFNlY3Rpb25JY29uXHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y24oXHJcbiAgICAgICAgICAgICAgXCJoLTQgdy00IHRyYW5zaXRpb24tY29sb3JzXCIsXHJcbiAgICAgICAgICAgICAgaGFzQWN0aXZlSXRlbVxyXG4gICAgICAgICAgICAgICAgPyBcInRleHQtcHJpbWFyeVwiXHJcbiAgICAgICAgICAgICAgICA6IFwidGV4dC1tdXRlZC1mb3JlZ3JvdW5kIGdyb3VwLWhvdmVyOnRleHQtZm9yZWdyb3VuZFwiXHJcbiAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgICl9XHJcbiAgICAgICAgPHNwYW5cclxuICAgICAgICAgIGNsYXNzTmFtZT17Y24oXHJcbiAgICAgICAgICAgIFwiZmxleC0xIHRleHQtbGVmdCB0cmFuc2l0aW9uLWNvbG9yc1wiLFxyXG4gICAgICAgICAgICBoYXNBY3RpdmVJdGVtXHJcbiAgICAgICAgICAgICAgPyBcInRleHQtcHJpbWFyeVwiXHJcbiAgICAgICAgICAgICAgOiBcInRleHQtZm9yZWdyb3VuZC84MCBncm91cC1ob3Zlcjp0ZXh0LWZvcmVncm91bmRcIlxyXG4gICAgICAgICAgKX1cclxuICAgICAgICA+XHJcbiAgICAgICAgICB7c2VjdGlvbi50aXRsZX1cclxuICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgPENoZXZyb25SaWdodFxyXG4gICAgICAgICAgY2xhc3NOYW1lPXtjbihcclxuICAgICAgICAgICAgXCJoLTQgdy00IHRleHQtbXV0ZWQtZm9yZWdyb3VuZCB0cmFuc2l0aW9uLXRyYW5zZm9ybSBkdXJhdGlvbi0yMDBcIixcclxuICAgICAgICAgICAgaXNFeHBhbmRlZCAmJiBcInJvdGF0ZS05MFwiXHJcbiAgICAgICAgICApfVxyXG4gICAgICAgIC8+XHJcbiAgICAgIDwvYnV0dG9uPlxyXG5cclxuICAgICAgey8qIFNlY3Rpb24gSXRlbXMgKi99XHJcbiAgICAgIDx1bFxyXG4gICAgICAgIGNsYXNzTmFtZT17Y24oXHJcbiAgICAgICAgICBcIm92ZXJmbG93LWhpZGRlbiB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0yMDAgZWFzZS1vdXRcIixcclxuICAgICAgICAgIGlzRXhwYW5kZWQgPyBcIm1heC1oLVs1MDBweF0gb3BhY2l0eS0xMDAgbXQtMVwiIDogXCJtYXgtaC0wIG9wYWNpdHktMFwiXHJcbiAgICAgICAgKX1cclxuICAgICAgPlxyXG4gICAgICAgIHtzZWN0aW9uLml0ZW1zXHJcbiAgICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBpdGVtLnN0YXR1cyAhPT0gXCJmdXR1cmVcIilcclxuICAgICAgICAgIC5tYXAoKGl0ZW0pID0+IChcclxuICAgICAgICAgICAgPENvbGxhcHNpYmxlSXRlbVxyXG4gICAgICAgICAgICAgIGtleT17aXRlbS5ocmVmfVxyXG4gICAgICAgICAgICAgIGl0ZW09e2l0ZW19XHJcbiAgICAgICAgICAgICAgaXNBY3RpdmU9e3BhdGhuYW1lLnN0YXJ0c1dpdGgoaXRlbS5ocmVmKX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgICkpfVxyXG4gICAgICA8L3VsPlxyXG4gICAgPC9saT5cclxuICApO1xyXG59XHJcblxyXG50eXBlIENvbGxhcHNpYmxlSXRlbVByb3BzID0ge1xyXG4gIGl0ZW06IE5hdkl0ZW07XHJcbiAgaXNBY3RpdmU6IGJvb2xlYW47XHJcbn07XHJcblxyXG5mdW5jdGlvbiBDb2xsYXBzaWJsZUl0ZW0oeyBpdGVtLCBpc0FjdGl2ZSB9OiBDb2xsYXBzaWJsZUl0ZW1Qcm9wcykge1xyXG4gIGNvbnN0IEl0ZW1JY29uID0gaXRlbS5pY29uO1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGxpPlxyXG4gICAgICA8TGlua1xyXG4gICAgICAgIHRvPXtpdGVtLmhyZWZ9XHJcbiAgICAgICAgY2xhc3NOYW1lPXtjbihcclxuICAgICAgICAgIFwiZ3JvdXAgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMgcm91bmRlZC1sZyBweC0zIHB5LTIgbWwtNiB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTIwMFwiLFxyXG4gICAgICAgICAgaXNBY3RpdmVcclxuICAgICAgICAgICAgPyBcImJnLXByaW1hcnkvMTAgdGV4dC1wcmltYXJ5IHNoYWRvdy1zbVwiXHJcbiAgICAgICAgICAgIDogXCJ0ZXh0LWZvcmVncm91bmQvNzAgaG92ZXI6YmctbXV0ZWQvNTAgaG92ZXI6dGV4dC1mb3JlZ3JvdW5kXCJcclxuICAgICAgICApfVxyXG4gICAgICA+XHJcbiAgICAgICAge0l0ZW1JY29uICYmIChcclxuICAgICAgICAgIDxJdGVtSWNvblxyXG4gICAgICAgICAgICBjbGFzc05hbWU9e2NuKFxyXG4gICAgICAgICAgICAgIFwiaC00IHctNCB0cmFuc2l0aW9uLWNvbG9ycyBzaHJpbmstMFwiLFxyXG4gICAgICAgICAgICAgIGlzQWN0aXZlXHJcbiAgICAgICAgICAgICAgICA/IFwidGV4dC1wcmltYXJ5XCJcclxuICAgICAgICAgICAgICAgIDogXCJ0ZXh0LW11dGVkLWZvcmVncm91bmQgZ3JvdXAtaG92ZXI6dGV4dC1mb3JlZ3JvdW5kXCJcclxuICAgICAgICAgICAgKX1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgKX1cclxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmbGV4LTEgdHJ1bmNhdGVcIj57aXRlbS50aXRsZX08L3NwYW4+XHJcbiAgICAgICAge2l0ZW0uYmFkZ2UgJiYgKFxyXG4gICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgY2xhc3NOYW1lPXtjbihcclxuICAgICAgICAgICAgICBcInB4LTIgcHktMC41IHRleHQteHMgZm9udC1tZWRpdW0gcm91bmRlZC1mdWxsIHNocmluay0wXCIsXHJcbiAgICAgICAgICAgICAgaXRlbS5iYWRnZSA9PT0gXCJOZXdcIiAmJiBcImJnLWdyZWVuLTUwMC8xMCB0ZXh0LWdyZWVuLTUwMFwiLFxyXG4gICAgICAgICAgICAgIGl0ZW0uYmFkZ2UgPT09IFwiRGVtb1wiICYmIFwiYmctYmx1ZS01MDAvMTAgdGV4dC1ibHVlLTUwMFwiLFxyXG4gICAgICAgICAgICAgIGl0ZW0uYmFkZ2UgPT09IFwiQnJva2VuXCIgJiYgXCJiZy1yZWQtNTAwLzEwIHRleHQtcmVkLTUwMFwiLFxyXG4gICAgICAgICAgICAgICFbXCJOZXdcIiwgXCJEZW1vXCIsIFwiQnJva2VuXCJdLmluY2x1ZGVzKGl0ZW0uYmFkZ2UpICYmXHJcbiAgICAgICAgICAgICAgICBcImJnLXByaW1hcnkvMTAgdGV4dC1wcmltYXJ5XCJcclxuICAgICAgICAgICAgKX1cclxuICAgICAgICAgID5cclxuICAgICAgICAgICAge2l0ZW0uYmFkZ2V9XHJcbiAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgKX1cclxuICAgICAgICB7aXRlbS5zdGF0dXMgPT09IFwiYmV0YVwiICYmIChcclxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInB4LTIgcHktMC41IHRleHQteHMgZm9udC1tZWRpdW0gcm91bmRlZC1mdWxsIGJnLWFtYmVyLTUwMC8xMCB0ZXh0LWFtYmVyLTUwMCBzaHJpbmstMFwiPlxyXG4gICAgICAgICAgICBCZXRhXHJcbiAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgKX1cclxuICAgICAgPC9MaW5rPlxyXG4gICAgPC9saT5cclxuICApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gU2lkZWJhcih7IHJvbGUsIHVzZXJFbWFpbCB9OiBTaWRlYmFyUHJvcHMpIHtcclxuICBjb25zdCB7IHRoZW1lLCB0b2dnbGVUaGVtZSB9ID0gdXNlVGhlbWUoKTtcclxuICBjb25zdCBwYXRobmFtZSA9IHVzZUxvY2F0aW9uKCkucGF0aG5hbWU7XHJcbiAgY29uc3Qgc2VjdGlvbnMgPSB1c2VNZW1vKCgpID0+IGdldE5hdlNlY3Rpb25zRm9yUm9sZShyb2xlKSwgW3JvbGVdKTtcclxuXHJcbiAgLy8gQ2FsY3VsYXRlIGRlZmF1bHQgZXhwYW5kZWQgc2VjdGlvbnMgKGFsbCBleGNlcHQgdGhvc2UgaW4gQ09MTEFQU0VEX0JZX0RFRkFVTFQpXHJcbiAgY29uc3QgZGVmYXVsdEV4cGFuZGVkID0gdXNlTWVtbyhcclxuICAgICgpID0+XHJcbiAgICAgIHNlY3Rpb25zXHJcbiAgICAgICAgLm1hcCgoc2VjdGlvbikgPT4gc2VjdGlvbi50aXRsZSlcclxuICAgICAgICAuZmlsdGVyKCh0aXRsZSkgPT4gIUNPTExBUFNFRF9CWV9ERUZBVUxULmluY2x1ZGVzKHRpdGxlKSksXHJcbiAgICBbc2VjdGlvbnNdXHJcbiAgKTtcclxuXHJcbiAgLy8gVHJhY2sgd2hpY2ggc2VjdGlvbnMgYXJlIGV4cGFuZGVkIChtdWx0aXBsZSBjYW4gYmUgZXhwYW5kZWQgYXQgb25jZSlcclxuICBjb25zdCBbZXhwYW5kZWRTZWN0aW9ucywgc2V0RXhwYW5kZWRTZWN0aW9uc10gPSB1c2VTdGF0ZTxzdHJpbmdbXT4oZGVmYXVsdEV4cGFuZGVkKTtcclxuXHJcbiAgLy8gUmVzZXQgZXhwYW5kZWQgc2VjdGlvbnMgd2hlbiByb2xlIGNoYW5nZXMgKHNlY3Rpb25zIGNoYW5nZSlcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgc2V0RXhwYW5kZWRTZWN0aW9ucyhkZWZhdWx0RXhwYW5kZWQpO1xyXG4gIH0sIFtkZWZhdWx0RXhwYW5kZWRdKTtcclxuXHJcbiAgLy8gQXV0by1leHBhbmQgc2VjdGlvbiBjb250YWluaW5nIHRoZSBhY3RpdmUgcm91dGVcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3QgYWN0aXZlU2VjdGlvbiA9IHNlY3Rpb25zLmZpbmQoKHNlY3Rpb24pID0+XHJcbiAgICAgIHNlY3Rpb24uaXRlbXMuc29tZSgoaXRlbSkgPT4gcGF0aG5hbWUuc3RhcnRzV2l0aChpdGVtLmhyZWYpKVxyXG4gICAgKTtcclxuICAgIGlmIChhY3RpdmVTZWN0aW9uICYmICFleHBhbmRlZFNlY3Rpb25zLmluY2x1ZGVzKGFjdGl2ZVNlY3Rpb24udGl0bGUpKSB7XHJcbiAgICAgIHNldEV4cGFuZGVkU2VjdGlvbnMoKHByZXYpID0+IFsuLi5wcmV2LCBhY3RpdmVTZWN0aW9uLnRpdGxlXSk7XHJcbiAgICB9XHJcbiAgfSwgW3BhdGhuYW1lLCBzZWN0aW9ucywgZXhwYW5kZWRTZWN0aW9uc10pO1xyXG5cclxuICBjb25zdCB0b2dnbGVTZWN0aW9uID0gKHNlY3Rpb25UaXRsZTogc3RyaW5nKSA9PiB7XHJcbiAgICBzZXRFeHBhbmRlZFNlY3Rpb25zKChwcmV2KSA9PlxyXG4gICAgICBwcmV2LmluY2x1ZGVzKHNlY3Rpb25UaXRsZSlcclxuICAgICAgICA/IHByZXYuZmlsdGVyKCh0aXRsZSkgPT4gdGl0bGUgIT09IHNlY3Rpb25UaXRsZSlcclxuICAgICAgICA6IFsuLi5wcmV2LCBzZWN0aW9uVGl0bGVdXHJcbiAgICApO1xyXG4gIH07XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8YXNpZGVcclxuICAgICAgY2xhc3NOYW1lPXtjbihcclxuICAgICAgICBcImhpZGRlbiBzaHJpbmstMCBib3JkZXItciBib3JkZXItYm9yZGVyLzYwIGJnLWdyYWRpZW50LXRvLWIgZnJvbS1jYXJkLzk1IHRvLWNhcmQvOTAgYmFja2Ryb3AtYmx1ci14bCBsZzpmbGV4IGxnOmZsZXgtY29sIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTMwMCBzdGlja3kgdG9wLTAgaC1zY3JlZW5cIixcclxuICAgICAgICBcInctNzJcIlxyXG4gICAgICApfVxyXG4gICAgPlxyXG4gICAgICB7LyogSGVhZGVyICovfVxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC0xNiBpdGVtcy1jZW50ZXIgYm9yZGVyLWIgYm9yZGVyLWJvcmRlci82MCBiZy1jYXJkLzUwIGJhY2tkcm9wLWJsdXItbWQgcHgtNCBzaHJpbmstMFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTNcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmUgaC0xMCB3LTEwIG92ZXJmbG93LWhpZGRlbiByb3VuZGVkLXhsIGJnLXdoaXRlIHNoYWRvdy1sZ1wiPlxyXG4gICAgICAgICAgICA8aW1nXHJcbiAgICAgICAgICAgICAgc3JjPVwiL2Zhdmljb24ucG5nXCJcclxuICAgICAgICAgICAgICBhbHQ9XCJTNCBMb2dvXCJcclxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoLTEwIHctMTAgb2JqZWN0LWNvbnRhaW5cIlxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LWJvbGQgYmctZ3JhZGllbnQtdG8tciBmcm9tLWZvcmVncm91bmQgdG8tZm9yZWdyb3VuZC84MCBiZy1jbGlwLXRleHQgdGV4dC10cmFuc3BhcmVudFwiPlxyXG4gICAgICAgICAgICAgIFBlcmZvcm1hbmNlIERhc2hib2FyZFxyXG4gICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcblxyXG4gICAgICB7LyogTmF2aWdhdGlvbiAqL31cclxuICAgICAgPG5hdiBjbGFzc05hbWU9XCJmbGV4LTEgb3ZlcmZsb3cteS1hdXRvIHB4LTMgcHktNCBzY3JvbGxiYXItaGlkZVwiPlxyXG4gICAgICAgIDx1bCBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGdhcC0xXCI+XHJcbiAgICAgICAgICB7c2VjdGlvbnMubWFwKChzZWN0aW9uLCBpbmRleCkgPT4gKFxyXG4gICAgICAgICAgICA8Q29sbGFwc2libGVTZWN0aW9uXHJcbiAgICAgICAgICAgICAga2V5PXtzZWN0aW9uLnRpdGxlfVxyXG4gICAgICAgICAgICAgIHNlY3Rpb249e3NlY3Rpb259XHJcbiAgICAgICAgICAgICAgaXNFeHBhbmRlZD17ZXhwYW5kZWRTZWN0aW9ucy5pbmNsdWRlcyhzZWN0aW9uLnRpdGxlKX1cclxuICAgICAgICAgICAgICBvblRvZ2dsZT17KCkgPT4gdG9nZ2xlU2VjdGlvbihzZWN0aW9uLnRpdGxlKX1cclxuICAgICAgICAgICAgICBwYXRobmFtZT17cGF0aG5hbWV9XHJcbiAgICAgICAgICAgICAgaXNGaXJzdFNlY3Rpb249e2luZGV4ID09PSAwfVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICAgKSl9XHJcbiAgICAgICAgPC91bD5cclxuICAgICAgPC9uYXY+XHJcblxyXG4gICAgICB7LyogVXNlciBJbmZvICYgVGhlbWUgVG9nZ2xlICovfVxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImJvcmRlci10IGJvcmRlci1ib3JkZXIvNjAgcC0zIHNocmluay0wXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyBweC0yIHB5LTIgcm91bmRlZC1sZyBiZy1tdXRlZC8zMFwiPlxyXG4gICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICBvbkNsaWNrPXt0b2dnbGVUaGVtZX1cclxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleCBoLTggdy04IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciByb3VuZGVkLWZ1bGwgYmctcHJpbWFyeS8xMCB0ZXh0LXByaW1hcnkgaG92ZXI6YmctcHJpbWFyeS8yMCB0cmFuc2l0aW9uLWNvbG9yc1wiXHJcbiAgICAgICAgICAgIHRpdGxlPXt0aGVtZSA9PT0gXCJkYXJrXCIgPyBcIlN3aXRjaCB0byBMaWdodCBNb2RlXCIgOiBcIlN3aXRjaCB0byBEYXJrIE1vZGVcIn1cclxuICAgICAgICAgID5cclxuICAgICAgICAgICAge3RoZW1lID09PSBcImRhcmtcIiA/IChcclxuICAgICAgICAgICAgICA8U3VuIGNsYXNzTmFtZT1cImgtNCB3LTRcIiAvPlxyXG4gICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgIDxNb29uIGNsYXNzTmFtZT1cImgtNCB3LTRcIiAvPlxyXG4gICAgICAgICAgICApfVxyXG4gICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBtaW4tdy0wXCI+XHJcbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgZm9udC1tZWRpdW0gdGV4dC1mb3JlZ3JvdW5kIHRydW5jYXRlXCI+XHJcbiAgICAgICAgICAgICAge3VzZXJFbWFpbH1cclxuICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiPntnZXRSb2xlTGFiZWwocm9sZSl9PC9wPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9hc2lkZT5cclxuICApO1xyXG59XHJcbiJdLCJmaWxlIjoiQzovUHJvamVjdHMvU291cmNlIDQgSW5kdXN0cmllcy9zcmMvY29tcG9uZW50cy9sYXlvdXQvc2lkZWJhci50c3gifQ==